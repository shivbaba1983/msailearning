(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uR(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var nm={exports:{}},sc={},im={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ms=Symbol.for("react.element"),lR=Symbol.for("react.portal"),pR=Symbol.for("react.fragment"),dR=Symbol.for("react.strict_mode"),hR=Symbol.for("react.profiler"),vR=Symbol.for("react.provider"),fR=Symbol.for("react.context"),gR=Symbol.for("react.forward_ref"),mR=Symbol.for("react.suspense"),yR=Symbol.for("react.memo"),SR=Symbol.for("react.lazy"),dh=Symbol.iterator;function CR(e){return e===null||typeof e!="object"?null:(e=dh&&e[dh]||e["@@iterator"],typeof e=="function"?e:null)}var om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sm=Object.assign,am={};function qn(e,t,r){this.props=e,this.context=t,this.refs=am,this.updater=r||om}qn.prototype.isReactComponent={};qn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};qn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cm(){}cm.prototype=qn.prototype;function Lp(e,t,r){this.props=e,this.context=t,this.refs=am,this.updater=r||om}var jp=Lp.prototype=new cm;jp.constructor=Lp;sm(jp,qn.prototype);jp.isPureReactComponent=!0;var hh=Array.isArray,um=Object.prototype.hasOwnProperty,xp={current:null},lm={key:!0,ref:!0,__self:!0,__source:!0};function pm(e,t,r){var n,i={},s=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(s=""+t.key),t)um.call(t,n)&&!lm.hasOwnProperty(n)&&(i[n]=t[n]);var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){for(var c=Array(o),u=0;u<o;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps,o)i[n]===void 0&&(i[n]=o[n]);return{$$typeof:Ms,type:e,key:s,ref:a,props:i,_owner:xp.current}}function PR(e,t){return{$$typeof:Ms,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Bp(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ms}function RR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var vh=/\/+/g;function qu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?RR(""+e.key):t.toString(36)}function ma(e,t,r,n,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ms:case lR:a=!0}}if(a)return a=e,i=i(a),e=n===""?"."+qu(a,0):n,hh(i)?(r="",e!=null&&(r=e.replace(vh,"$&/")+"/"),ma(i,t,r,"",function(u){return u})):i!=null&&(Bp(i)&&(i=PR(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(vh,"$&/")+"/")+e)),t.push(i)),1;if(a=0,n=n===""?".":n+":",hh(e))for(var o=0;o<e.length;o++){s=e[o];var c=n+qu(s,o);a+=ma(s,t,r,c,i)}else if(c=CR(e),typeof c=="function")for(e=c.call(e),o=0;!(s=e.next()).done;)s=s.value,c=n+qu(s,o++),a+=ma(s,t,r,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Qs(e,t,r){if(e==null)return e;var n=[],i=0;return ma(e,n,"","",function(s){return t.call(r,s,i++)}),n}function ER(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Be={current:null},ya={transition:null},wR={ReactCurrentDispatcher:Be,ReactCurrentBatchConfig:ya,ReactCurrentOwner:xp};function dm(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:Qs,forEach:function(e,t,r){Qs(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Qs(e,function(){t++}),t},toArray:function(e){return Qs(e,function(t){return t})||[]},only:function(e){if(!Bp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};U.Component=qn;U.Fragment=pR;U.Profiler=hR;U.PureComponent=Lp;U.StrictMode=dR;U.Suspense=mR;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wR;U.act=dm;U.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=sm({},e.props),i=e.key,s=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,a=xp.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)um.call(t,c)&&!lm.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){o=Array(c);for(var u=0;u<c;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:Ms,type:e.type,key:i,ref:s,props:n,_owner:a}};U.createContext=function(e){return e={$$typeof:fR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vR,_context:e},e.Consumer=e};U.createElement=pm;U.createFactory=function(e){var t=pm.bind(null,e);return t.type=e,t};U.createRef=function(){return{current:null}};U.forwardRef=function(e){return{$$typeof:gR,render:e}};U.isValidElement=Bp;U.lazy=function(e){return{$$typeof:SR,_payload:{_status:-1,_result:e},_init:ER}};U.memo=function(e,t){return{$$typeof:yR,type:e,compare:t===void 0?null:t}};U.startTransition=function(e){var t=ya.transition;ya.transition={};try{e()}finally{ya.transition=t}};U.unstable_act=dm;U.useCallback=function(e,t){return Be.current.useCallback(e,t)};U.useContext=function(e){return Be.current.useContext(e)};U.useDebugValue=function(){};U.useDeferredValue=function(e){return Be.current.useDeferredValue(e)};U.useEffect=function(e,t){return Be.current.useEffect(e,t)};U.useId=function(){return Be.current.useId()};U.useImperativeHandle=function(e,t,r){return Be.current.useImperativeHandle(e,t,r)};U.useInsertionEffect=function(e,t){return Be.current.useInsertionEffect(e,t)};U.useLayoutEffect=function(e,t){return Be.current.useLayoutEffect(e,t)};U.useMemo=function(e,t){return Be.current.useMemo(e,t)};U.useReducer=function(e,t,r){return Be.current.useReducer(e,t,r)};U.useRef=function(e){return Be.current.useRef(e)};U.useState=function(e){return Be.current.useState(e)};U.useSyncExternalStore=function(e,t,r){return Be.current.useSyncExternalStore(e,t,r)};U.useTransition=function(){return Be.current.useTransition()};U.version="18.3.1";im.exports=U;var w=im.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IR=w,TR=Symbol.for("react.element"),_R=Symbol.for("react.fragment"),AR=Object.prototype.hasOwnProperty,kR=IR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MR={key:!0,ref:!0,__self:!0,__source:!0};function hm(e,t,r){var n,i={},s=null,a=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)AR.call(t,n)&&!MR.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:TR,type:e,key:s,ref:a,props:i,_owner:kR.current}}sc.Fragment=_R;sc.jsx=hm;sc.jsxs=hm;nm.exports=sc;var H=nm.exports,vm={exports:{}},Ze={},fm={exports:{}},gm={};(function(e){/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function t(k,j){var B=k.length;k.push(j);e:for(;0<B;){var Z=B-1>>>1,ue=k[Z];if(0<i(ue,j))k[Z]=j,k[B]=ue,B=Z;else break e}}function r(k){return k.length===0?null:k[0]}function n(k){if(k.length===0)return null;var j=k[0],B=k.pop();if(B!==j){k[0]=B;e:for(var Z=0,ue=k.length,an=ue>>>1;Z<an;){var kt=2*(Z+1)-1,Zn=k[kt],Mt=kt+1,cn=k[Mt];if(0>i(Zn,B))Mt<ue&&0>i(cn,Zn)?(k[Z]=cn,k[Mt]=B,Z=Mt):(k[Z]=Zn,k[kt]=B,Z=kt);else if(Mt<ue&&0>i(cn,B))k[Z]=cn,k[Mt]=B,Z=Mt;else break e}}return j}function i(k,j){var B=k.sortIndex-j.sortIndex;return B!==0?B:k.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var c=[],u=[],l=1,p=null,d=3,h=!1,m=!1,y=!1,S=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(k){for(var j=r(u);j!==null;){if(j.callback===null)n(u);else if(j.startTime<=k)n(u),j.sortIndex=j.expirationTime,t(c,j);else break;j=r(u)}}function C(k){if(y=!1,g(k),!m)if(r(c)!==null)m=!0,Yn(P);else{var j=r(u);j!==null&&Xn(C,j.startTime-k)}}function P(k,j){m=!1,y&&(y=!1,v(R),R=-1),h=!0;var B=d;try{for(g(j),p=r(c);p!==null&&(!(p.expirationTime>j)||k&&!K());){var Z=p.callback;if(typeof Z=="function"){p.callback=null,d=p.priorityLevel;var ue=Z(p.expirationTime<=j);j=e.unstable_now(),typeof ue=="function"?p.callback=ue:p===r(c)&&n(c),g(j)}else n(c);p=r(c)}if(p!==null)var an=!0;else{var kt=r(u);kt!==null&&Xn(C,kt.startTime-j),an=!1}return an}finally{p=null,d=B,h=!1}}var E=!1,I=null,R=-1,D=5,A=-1;function K(){return!(e.unstable_now()-A<D)}function rt(){if(I!==null){var k=e.unstable_now();A=k;var j=!0;try{j=I(!0,k)}finally{j?ae():(E=!1,I=null)}}else E=!1}var ae;if(typeof f=="function")ae=function(){f(rt)};else if(typeof MessageChannel<"u"){var Qn=new MessageChannel,xu=Qn.port2;Qn.port1.onmessage=rt,ae=function(){xu.postMessage(null)}}else ae=function(){S(rt,0)};function Yn(k){I=k,E||(E=!0,ae())}function Xn(k,j){R=S(function(){k(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,Yn(P))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(k){switch(d){case 1:case 2:case 3:var j=3;break;default:j=d}var B=d;d=j;try{return k()}finally{d=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,j){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var B=d;d=k;try{return j()}finally{d=B}},e.unstable_scheduleCallback=function(k,j,B){var Z=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?Z+B:Z):B=Z,k){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=B+ue,k={id:l++,callback:j,priorityLevel:k,startTime:B,expirationTime:ue,sortIndex:-1},B>Z?(k.sortIndex=B,t(u,k),r(c)===null&&k===r(u)&&(y?(v(R),R=-1):y=!0,Xn(C,B-Z))):(k.sortIndex=ue,t(c,k),m||h||(m=!0,Yn(P))),k},e.unstable_shouldYield=K,e.unstable_wrapCallback=function(k){var j=d;return function(){var B=d;d=j;try{return k.apply(this,arguments)}finally{d=B}}}})(gm);fm.exports=gm;var OR=fm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DR=w,Xe=OR;function _(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mm=new Set,us={};function tn(e,t){Mn(e,t),Mn(e+"Capture",t)}function Mn(e,t){for(us[e]=t,e=0;e<t.length;e++)mm.add(t[e])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=Object.prototype.hasOwnProperty,bR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fh={},gh={};function NR(e){return Ll.call(gh,e)?!0:Ll.call(fh,e)?!1:bR.test(e)?gh[e]=!0:(fh[e]=!0,!1)}function zR(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function LR(e,t,r,n){if(t===null||typeof t>"u"||zR(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Fe(e,t,r,n,i,s,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ee[e]=new Fe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ee[t]=new Fe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ee[e]=new Fe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ee[e]=new Fe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ee[e]=new Fe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ee[e]=new Fe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ee[e]=new Fe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ee[e]=new Fe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ee[e]=new Fe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Fp=/[\-:]([a-z])/g;function qp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Fp,qp);Ee[t]=new Fe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Fp,qp);Ee[t]=new Fe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Fp,qp);Ee[t]=new Fe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ee[e]=new Fe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ee[e]=new Fe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Up(e,t,r,n){var i=Ee.hasOwnProperty(t)?Ee[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(LR(t,r,i,n)&&(r=null),n||i===null?NR(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ht=DR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ys=Symbol.for("react.element"),dn=Symbol.for("react.portal"),hn=Symbol.for("react.fragment"),$p=Symbol.for("react.strict_mode"),jl=Symbol.for("react.profiler"),ym=Symbol.for("react.provider"),Sm=Symbol.for("react.context"),Wp=Symbol.for("react.forward_ref"),xl=Symbol.for("react.suspense"),Bl=Symbol.for("react.suspense_list"),Vp=Symbol.for("react.memo"),Xt=Symbol.for("react.lazy"),Cm=Symbol.for("react.offscreen"),mh=Symbol.iterator;function ei(e){return e===null||typeof e!="object"?null:(e=mh&&e[mh]||e["@@iterator"],typeof e=="function"?e:null)}var ne=Object.assign,Uu;function Jo(e){if(Uu===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Uu=t&&t[1]||""}return`
`+Uu+e}var $u=!1;function Wu(e,t){if(!e||$u)return"";$u=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==s[o]){var c=`
`+i[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=o);break}}}finally{$u=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Jo(e):""}function jR(e){switch(e.tag){case 5:return Jo(e.type);case 16:return Jo("Lazy");case 13:return Jo("Suspense");case 19:return Jo("SuspenseList");case 0:case 2:case 15:return e=Wu(e.type,!1),e;case 11:return e=Wu(e.type.render,!1),e;case 1:return e=Wu(e.type,!0),e;default:return""}}function Fl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hn:return"Fragment";case dn:return"Portal";case jl:return"Profiler";case $p:return"StrictMode";case xl:return"Suspense";case Bl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Sm:return(e.displayName||"Context")+".Consumer";case ym:return(e._context.displayName||"Context")+".Provider";case Wp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vp:return t=e.displayName||null,t!==null?t:Fl(e.type)||"Memo";case Xt:t=e._payload,e=e._init;try{return Fl(e(t))}catch{}}return null}function xR(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fl(t);case 8:return t===$p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Pm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function BR(e){var t=Pm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Xs(e){e._valueTracker||(e._valueTracker=BR(e))}function Rm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Pm(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ba(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ql(e,t){var r=t.checked;return ne({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function yh(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Em(e,t){t=t.checked,t!=null&&Up(e,"checked",t,!1)}function Ul(e,t){Em(e,t);var r=gr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$l(e,t.type,r):t.hasOwnProperty("defaultValue")&&$l(e,t.type,gr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Sh(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function $l(e,t,r){(t!=="number"||ba(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Go=Array.isArray;function wn(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gr(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Wl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(_(91));return ne({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ch(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(_(92));if(Go(r)){if(1<r.length)throw Error(_(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gr(r)}}function wm(e,t){var r=gr(t.value),n=gr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Ph(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Im(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Im(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Zs,Tm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Zs=Zs||document.createElement("div"),Zs.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Zs.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ls(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Zo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FR=["Webkit","ms","Moz","O"];Object.keys(Zo).forEach(function(e){FR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Zo[t]=Zo[e]})});function _m(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Zo.hasOwnProperty(e)&&Zo[e]?(""+t).trim():t+"px"}function Am(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=_m(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var qR=ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Hl(e,t){if(t){if(qR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(_(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(_(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(_(61))}if(t.style!=null&&typeof t.style!="object")throw Error(_(62))}}function Kl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jl=null;function Hp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gl=null,In=null,Tn=null;function Rh(e){if(e=bs(e)){if(typeof Gl!="function")throw Error(_(280));var t=e.stateNode;t&&(t=pc(t),Gl(e.stateNode,e.type,t))}}function km(e){In?Tn?Tn.push(e):Tn=[e]:In=e}function Mm(){if(In){var e=In,t=Tn;if(Tn=In=null,Rh(e),t)for(e=0;e<t.length;e++)Rh(t[e])}}function Om(e,t){return e(t)}function Dm(){}var Vu=!1;function bm(e,t,r){if(Vu)return e(t,r);Vu=!0;try{return Om(e,t,r)}finally{Vu=!1,(In!==null||Tn!==null)&&(Dm(),Mm())}}function ps(e,t){var r=e.stateNode;if(r===null)return null;var n=pc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(_(231,t,typeof r));return r}var Ql=!1;if(Ut)try{var ti={};Object.defineProperty(ti,"passive",{get:function(){Ql=!0}}),window.addEventListener("test",ti,ti),window.removeEventListener("test",ti,ti)}catch{Ql=!1}function UR(e,t,r,n,i,s,a,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(l){this.onError(l)}}var es=!1,Na=null,za=!1,Yl=null,$R={onError:function(e){es=!0,Na=e}};function WR(e,t,r,n,i,s,a,o,c){es=!1,Na=null,UR.apply($R,arguments)}function VR(e,t,r,n,i,s,a,o,c){if(WR.apply(this,arguments),es){if(es){var u=Na;es=!1,Na=null}else throw Error(_(198));za||(za=!0,Yl=u)}}function rn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Nm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Eh(e){if(rn(e)!==e)throw Error(_(188))}function HR(e){var t=e.alternate;if(!t){if(t=rn(e),t===null)throw Error(_(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return Eh(i),e;if(s===n)return Eh(i),t;s=s.sibling}throw Error(_(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,o=i.child;o;){if(o===r){a=!0,r=i,n=s;break}if(o===n){a=!0,n=i,r=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===r){a=!0,r=s,n=i;break}if(o===n){a=!0,n=s,r=i;break}o=o.sibling}if(!a)throw Error(_(189))}}if(r.alternate!==n)throw Error(_(190))}if(r.tag!==3)throw Error(_(188));return r.stateNode.current===r?e:t}function zm(e){return e=HR(e),e!==null?Lm(e):null}function Lm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Lm(e);if(t!==null)return t;e=e.sibling}return null}var jm=Xe.unstable_scheduleCallback,wh=Xe.unstable_cancelCallback,KR=Xe.unstable_shouldYield,JR=Xe.unstable_requestPaint,ce=Xe.unstable_now,GR=Xe.unstable_getCurrentPriorityLevel,Kp=Xe.unstable_ImmediatePriority,xm=Xe.unstable_UserBlockingPriority,La=Xe.unstable_NormalPriority,QR=Xe.unstable_LowPriority,Bm=Xe.unstable_IdlePriority,ac=null,It=null;function YR(e){if(It&&typeof It.onCommitFiberRoot=="function")try{It.onCommitFiberRoot(ac,e,void 0,(e.current.flags&128)===128)}catch{}}var ft=Math.clz32?Math.clz32:eE,XR=Math.log,ZR=Math.LN2;function eE(e){return e>>>=0,e===0?32:31-(XR(e)/ZR|0)|0}var ea=64,ta=4194304;function Qo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ja(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,s=e.pingedLanes,a=r&268435455;if(a!==0){var o=a&~i;o!==0?n=Qo(o):(s&=a,s!==0&&(n=Qo(s)))}else a=r&~i,a!==0?n=Qo(a):s!==0&&(n=Qo(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ft(t),i=1<<r,n|=e[r],t&=~i;return n}function tE(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rE(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-ft(s),o=1<<a,c=i[a];c===-1?(!(o&r)||o&n)&&(i[a]=tE(o,t)):c<=t&&(e.expiredLanes|=o),s&=~o}}function Xl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fm(){var e=ea;return ea<<=1,!(ea&4194240)&&(ea=64),e}function Hu(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Os(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ft(t),e[t]=r}function nE(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-ft(r),s=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~s}}function Jp(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ft(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var V=0;function qm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Um,Gp,$m,Wm,Vm,Zl=!1,ra=[],ar=null,cr=null,ur=null,ds=new Map,hs=new Map,rr=[],iE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ih(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":ds.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":hs.delete(t.pointerId)}}function ri(e,t,r,n,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},t!==null&&(t=bs(t),t!==null&&Gp(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function oE(e,t,r,n,i){switch(t){case"focusin":return ar=ri(ar,e,t,r,n,i),!0;case"dragenter":return cr=ri(cr,e,t,r,n,i),!0;case"mouseover":return ur=ri(ur,e,t,r,n,i),!0;case"pointerover":var s=i.pointerId;return ds.set(s,ri(ds.get(s)||null,e,t,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,hs.set(s,ri(hs.get(s)||null,e,t,r,n,i)),!0}return!1}function Hm(e){var t=Wr(e.target);if(t!==null){var r=rn(t);if(r!==null){if(t=r.tag,t===13){if(t=Nm(r),t!==null){e.blockedOn=t,Vm(e.priority,function(){$m(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Sa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ep(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Jl=n,r.target.dispatchEvent(n),Jl=null}else return t=bs(r),t!==null&&Gp(t),e.blockedOn=r,!1;t.shift()}return!0}function Th(e,t,r){Sa(e)&&r.delete(t)}function sE(){Zl=!1,ar!==null&&Sa(ar)&&(ar=null),cr!==null&&Sa(cr)&&(cr=null),ur!==null&&Sa(ur)&&(ur=null),ds.forEach(Th),hs.forEach(Th)}function ni(e,t){e.blockedOn===t&&(e.blockedOn=null,Zl||(Zl=!0,Xe.unstable_scheduleCallback(Xe.unstable_NormalPriority,sE)))}function vs(e){function t(i){return ni(i,e)}if(0<ra.length){ni(ra[0],e);for(var r=1;r<ra.length;r++){var n=ra[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ar!==null&&ni(ar,e),cr!==null&&ni(cr,e),ur!==null&&ni(ur,e),ds.forEach(t),hs.forEach(t),r=0;r<rr.length;r++)n=rr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<rr.length&&(r=rr[0],r.blockedOn===null);)Hm(r),r.blockedOn===null&&rr.shift()}var _n=Ht.ReactCurrentBatchConfig,xa=!0;function aE(e,t,r,n){var i=V,s=_n.transition;_n.transition=null;try{V=1,Qp(e,t,r,n)}finally{V=i,_n.transition=s}}function cE(e,t,r,n){var i=V,s=_n.transition;_n.transition=null;try{V=4,Qp(e,t,r,n)}finally{V=i,_n.transition=s}}function Qp(e,t,r,n){if(xa){var i=ep(e,t,r,n);if(i===null)rl(e,t,n,Ba,r),Ih(e,n);else if(oE(i,e,t,r,n))n.stopPropagation();else if(Ih(e,n),t&4&&-1<iE.indexOf(e)){for(;i!==null;){var s=bs(i);if(s!==null&&Um(s),s=ep(e,t,r,n),s===null&&rl(e,t,n,Ba,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else rl(e,t,n,null,r)}}var Ba=null;function ep(e,t,r,n){if(Ba=null,e=Hp(n),e=Wr(e),e!==null)if(t=rn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Nm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ba=e,null}function Km(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(GR()){case Kp:return 1;case xm:return 4;case La:case QR:return 16;case Bm:return 536870912;default:return 16}default:return 16}}var ir=null,Yp=null,Ca=null;function Jm(){if(Ca)return Ca;var e,t=Yp,r=t.length,n,i="value"in ir?ir.value:ir.textContent,s=i.length;for(e=0;e<r&&t[e]===i[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===i[s-n];n++);return Ca=i.slice(e,1<n?1-n:void 0)}function Pa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function na(){return!0}function _h(){return!1}function et(e){function t(r,n,i,s,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?na:_h,this.isPropagationStopped=_h,this}return ne(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),t}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xp=et(Un),Ds=ne({},Un,{view:0,detail:0}),uE=et(Ds),Ku,Ju,ii,cc=ne({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zp,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ii&&(ii&&e.type==="mousemove"?(Ku=e.screenX-ii.screenX,Ju=e.screenY-ii.screenY):Ju=Ku=0,ii=e),Ku)},movementY:function(e){return"movementY"in e?e.movementY:Ju}}),Ah=et(cc),lE=ne({},cc,{dataTransfer:0}),pE=et(lE),dE=ne({},Ds,{relatedTarget:0}),Gu=et(dE),hE=ne({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),vE=et(hE),fE=ne({},Un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gE=et(fE),mE=ne({},Un,{data:0}),kh=et(mE),yE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PE(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CE[e])?!!t[e]:!1}function Zp(){return PE}var RE=ne({},Ds,{key:function(e){if(e.key){var t=yE[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SE[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zp,charCode:function(e){return e.type==="keypress"?Pa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),EE=et(RE),wE=ne({},cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mh=et(wE),IE=ne({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zp}),TE=et(IE),_E=ne({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),AE=et(_E),kE=ne({},cc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ME=et(kE),OE=[9,13,27,32],ed=Ut&&"CompositionEvent"in window,ts=null;Ut&&"documentMode"in document&&(ts=document.documentMode);var DE=Ut&&"TextEvent"in window&&!ts,Gm=Ut&&(!ed||ts&&8<ts&&11>=ts),Oh=" ",Dh=!1;function Qm(e,t){switch(e){case"keyup":return OE.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ym(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var vn=!1;function bE(e,t){switch(e){case"compositionend":return Ym(t);case"keypress":return t.which!==32?null:(Dh=!0,Oh);case"textInput":return e=t.data,e===Oh&&Dh?null:e;default:return null}}function NE(e,t){if(vn)return e==="compositionend"||!ed&&Qm(e,t)?(e=Jm(),Ca=Yp=ir=null,vn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gm&&t.locale!=="ko"?null:t.data;default:return null}}var zE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zE[e.type]:t==="textarea"}function Xm(e,t,r,n){km(n),t=Fa(t,"onChange"),0<t.length&&(r=new Xp("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var rs=null,fs=null;function LE(e){uy(e,0)}function uc(e){var t=mn(e);if(Rm(t))return e}function jE(e,t){if(e==="change")return t}var Zm=!1;if(Ut){var Qu;if(Ut){var Yu="oninput"in document;if(!Yu){var Nh=document.createElement("div");Nh.setAttribute("oninput","return;"),Yu=typeof Nh.oninput=="function"}Qu=Yu}else Qu=!1;Zm=Qu&&(!document.documentMode||9<document.documentMode)}function zh(){rs&&(rs.detachEvent("onpropertychange",ey),fs=rs=null)}function ey(e){if(e.propertyName==="value"&&uc(fs)){var t=[];Xm(t,fs,e,Hp(e)),bm(LE,t)}}function xE(e,t,r){e==="focusin"?(zh(),rs=t,fs=r,rs.attachEvent("onpropertychange",ey)):e==="focusout"&&zh()}function BE(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uc(fs)}function FE(e,t){if(e==="click")return uc(t)}function qE(e,t){if(e==="input"||e==="change")return uc(t)}function UE(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mt=typeof Object.is=="function"?Object.is:UE;function gs(e,t){if(mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ll.call(t,i)||!mt(e[i],t[i]))return!1}return!0}function Lh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function jh(e,t){var r=Lh(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Lh(r)}}function ty(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ty(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ry(){for(var e=window,t=ba();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ba(e.document)}return t}function td(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $E(e){var t=ry(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ty(r.ownerDocument.documentElement,r)){if(n!==null&&td(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!e.extend&&s>n&&(i=n,n=s,s=i),i=jh(r,s);var a=jh(r,n);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var WE=Ut&&"documentMode"in document&&11>=document.documentMode,fn=null,tp=null,ns=null,rp=!1;function xh(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;rp||fn==null||fn!==ba(n)||(n=fn,"selectionStart"in n&&td(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ns&&gs(ns,n)||(ns=n,n=Fa(tp,"onSelect"),0<n.length&&(t=new Xp("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=fn)))}function ia(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var gn={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionend:ia("Transition","TransitionEnd")},Xu={},ny={};Ut&&(ny=document.createElement("div").style,"AnimationEvent"in window||(delete gn.animationend.animation,delete gn.animationiteration.animation,delete gn.animationstart.animation),"TransitionEvent"in window||delete gn.transitionend.transition);function lc(e){if(Xu[e])return Xu[e];if(!gn[e])return e;var t=gn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ny)return Xu[e]=t[r];return e}var iy=lc("animationend"),oy=lc("animationiteration"),sy=lc("animationstart"),ay=lc("transitionend"),cy=new Map,Bh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){cy.set(e,t),tn(t,[e])}for(var Zu=0;Zu<Bh.length;Zu++){var el=Bh[Zu],VE=el.toLowerCase(),HE=el[0].toUpperCase()+el.slice(1);Pr(VE,"on"+HE)}Pr(iy,"onAnimationEnd");Pr(oy,"onAnimationIteration");Pr(sy,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(ay,"onTransitionEnd");Mn("onMouseEnter",["mouseout","mouseover"]);Mn("onMouseLeave",["mouseout","mouseover"]);Mn("onPointerEnter",["pointerout","pointerover"]);Mn("onPointerLeave",["pointerout","pointerover"]);tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function Fh(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,VR(n,t,void 0,e),e.currentTarget=null}function uy(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var s=void 0;if(t)for(var a=n.length-1;0<=a;a--){var o=n[a],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==s&&i.isPropagationStopped())break e;Fh(i,o,u),s=c}else for(a=0;a<n.length;a++){if(o=n[a],c=o.instance,u=o.currentTarget,o=o.listener,c!==s&&i.isPropagationStopped())break e;Fh(i,o,u),s=c}}}if(za)throw e=Yl,za=!1,Yl=null,e}function G(e,t){var r=t[ap];r===void 0&&(r=t[ap]=new Set);var n=e+"__bubble";r.has(n)||(ly(t,e,2,!1),r.add(n))}function tl(e,t,r){var n=0;t&&(n|=4),ly(r,e,n,t)}var oa="_reactListening"+Math.random().toString(36).slice(2);function ms(e){if(!e[oa]){e[oa]=!0,mm.forEach(function(r){r!=="selectionchange"&&(KE.has(r)||tl(r,!1,e),tl(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oa]||(t[oa]=!0,tl("selectionchange",!1,t))}}function ly(e,t,r,n){switch(Km(t)){case 1:var i=aE;break;case 4:i=cE;break;default:i=Qp}r=i.bind(null,t,r,e),i=void 0,!Ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function rl(e,t,r,n,i){var s=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;o!==null;){if(a=Wr(o),a===null)return;if(c=a.tag,c===5||c===6){n=s=a;continue e}o=o.parentNode}}n=n.return}bm(function(){var u=s,l=Hp(r),p=[];e:{var d=cy.get(e);if(d!==void 0){var h=Xp,m=e;switch(e){case"keypress":if(Pa(r)===0)break e;case"keydown":case"keyup":h=EE;break;case"focusin":m="focus",h=Gu;break;case"focusout":m="blur",h=Gu;break;case"beforeblur":case"afterblur":h=Gu;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ah;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=pE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=TE;break;case iy:case oy:case sy:h=vE;break;case ay:h=AE;break;case"scroll":h=uE;break;case"wheel":h=ME;break;case"copy":case"cut":case"paste":h=gE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Mh}var y=(t&4)!==0,S=!y&&e==="scroll",v=y?d!==null?d+"Capture":null:d;y=[];for(var f=u,g;f!==null;){g=f;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,v!==null&&(C=ps(f,v),C!=null&&y.push(ys(f,C,g)))),S)break;f=f.return}0<y.length&&(d=new h(d,m,null,r,l),p.push({event:d,listeners:y}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&r!==Jl&&(m=r.relatedTarget||r.fromElement)&&(Wr(m)||m[$t]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=u,m=m?Wr(m):null,m!==null&&(S=rn(m),m!==S||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=u),h!==m)){if(y=Ah,C="onMouseLeave",v="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(y=Mh,C="onPointerLeave",v="onPointerEnter",f="pointer"),S=h==null?d:mn(h),g=m==null?d:mn(m),d=new y(C,f+"leave",h,r,l),d.target=S,d.relatedTarget=g,C=null,Wr(l)===u&&(y=new y(v,f+"enter",m,r,l),y.target=g,y.relatedTarget=S,C=y),S=C,h&&m)t:{for(y=h,v=m,f=0,g=y;g;g=un(g))f++;for(g=0,C=v;C;C=un(C))g++;for(;0<f-g;)y=un(y),f--;for(;0<g-f;)v=un(v),g--;for(;f--;){if(y===v||v!==null&&y===v.alternate)break t;y=un(y),v=un(v)}y=null}else y=null;h!==null&&qh(p,d,h,y,!1),m!==null&&S!==null&&qh(p,S,m,y,!0)}}e:{if(d=u?mn(u):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var P=jE;else if(bh(d))if(Zm)P=qE;else{P=BE;var E=xE}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(P=FE);if(P&&(P=P(e,u))){Xm(p,P,r,l);break e}E&&E(e,d,u),e==="focusout"&&(E=d._wrapperState)&&E.controlled&&d.type==="number"&&$l(d,"number",d.value)}switch(E=u?mn(u):window,e){case"focusin":(bh(E)||E.contentEditable==="true")&&(fn=E,tp=u,ns=null);break;case"focusout":ns=tp=fn=null;break;case"mousedown":rp=!0;break;case"contextmenu":case"mouseup":case"dragend":rp=!1,xh(p,r,l);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":xh(p,r,l)}var I;if(ed)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else vn?Qm(e,r)&&(R="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(Gm&&r.locale!=="ko"&&(vn||R!=="onCompositionStart"?R==="onCompositionEnd"&&vn&&(I=Jm()):(ir=l,Yp="value"in ir?ir.value:ir.textContent,vn=!0)),E=Fa(u,R),0<E.length&&(R=new kh(R,e,null,r,l),p.push({event:R,listeners:E}),I?R.data=I:(I=Ym(r),I!==null&&(R.data=I)))),(I=DE?bE(e,r):NE(e,r))&&(u=Fa(u,"onBeforeInput"),0<u.length&&(l=new kh("onBeforeInput","beforeinput",null,r,l),p.push({event:l,listeners:u}),l.data=I))}uy(p,t)})}function ys(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Fa(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ps(e,r),s!=null&&n.unshift(ys(e,s,i)),s=ps(e,t),s!=null&&n.push(ys(e,s,i))),e=e.return}return n}function un(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qh(e,t,r,n,i){for(var s=t._reactName,a=[];r!==null&&r!==n;){var o=r,c=o.alternate,u=o.stateNode;if(c!==null&&c===n)break;o.tag===5&&u!==null&&(o=u,i?(c=ps(r,s),c!=null&&a.unshift(ys(r,c,o))):i||(c=ps(r,s),c!=null&&a.push(ys(r,c,o)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var JE=/\r\n?/g,GE=/\u0000|\uFFFD/g;function Uh(e){return(typeof e=="string"?e:""+e).replace(JE,`
`).replace(GE,"")}function sa(e,t,r){if(t=Uh(t),Uh(e)!==t&&r)throw Error(_(425))}function qa(){}var np=null,ip=null;function op(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var sp=typeof setTimeout=="function"?setTimeout:void 0,QE=typeof clearTimeout=="function"?clearTimeout:void 0,$h=typeof Promise=="function"?Promise:void 0,YE=typeof queueMicrotask=="function"?queueMicrotask:typeof $h<"u"?function(e){return $h.resolve(null).then(e).catch(XE)}:sp;function XE(e){setTimeout(function(){throw e})}function nl(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),vs(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);vs(t)}function lr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Wh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var $n=Math.random().toString(36).slice(2),Et="__reactFiber$"+$n,Ss="__reactProps$"+$n,$t="__reactContainer$"+$n,ap="__reactEvents$"+$n,ZE="__reactListeners$"+$n,ew="__reactHandles$"+$n;function Wr(e){var t=e[Et];if(t)return t;for(var r=e.parentNode;r;){if(t=r[$t]||r[Et]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Wh(e);e!==null;){if(r=e[Et])return r;e=Wh(e)}return t}e=r,r=e.parentNode}return null}function bs(e){return e=e[Et]||e[$t],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function mn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(_(33))}function pc(e){return e[Ss]||null}var cp=[],yn=-1;function Rr(e){return{current:e}}function Q(e){0>yn||(e.current=cp[yn],cp[yn]=null,yn--)}function J(e,t){yn++,cp[yn]=e.current,e.current=t}var mr={},ze=Rr(mr),Ve=Rr(!1),Gr=mr;function On(e,t){var r=e.type.contextTypes;if(!r)return mr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function He(e){return e=e.childContextTypes,e!=null}function Ua(){Q(Ve),Q(ze)}function Vh(e,t,r){if(ze.current!==mr)throw Error(_(168));J(ze,t),J(Ve,r)}function py(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(_(108,xR(e)||"Unknown",i));return ne({},r,n)}function $a(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mr,Gr=ze.current,J(ze,e),J(Ve,Ve.current),!0}function Hh(e,t,r){var n=e.stateNode;if(!n)throw Error(_(169));r?(e=py(e,t,Gr),n.__reactInternalMemoizedMergedChildContext=e,Q(Ve),Q(ze),J(ze,e)):Q(Ve),J(Ve,r)}var Lt=null,dc=!1,il=!1;function dy(e){Lt===null?Lt=[e]:Lt.push(e)}function tw(e){dc=!0,dy(e)}function Er(){if(!il&&Lt!==null){il=!0;var e=0,t=V;try{var r=Lt;for(V=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Lt=null,dc=!1}catch(i){throw Lt!==null&&(Lt=Lt.slice(e+1)),jm(Kp,Er),i}finally{V=t,il=!1}}return null}var Sn=[],Cn=0,Wa=null,Va=0,it=[],ot=0,Qr=null,jt=1,xt="";function Ur(e,t){Sn[Cn++]=Va,Sn[Cn++]=Wa,Wa=e,Va=t}function hy(e,t,r){it[ot++]=jt,it[ot++]=xt,it[ot++]=Qr,Qr=e;var n=jt;e=xt;var i=32-ft(n)-1;n&=~(1<<i),r+=1;var s=32-ft(t)+i;if(30<s){var a=i-i%5;s=(n&(1<<a)-1).toString(32),n>>=a,i-=a,jt=1<<32-ft(t)+i|r<<i|n,xt=s+e}else jt=1<<s|r<<i|n,xt=e}function rd(e){e.return!==null&&(Ur(e,1),hy(e,1,0))}function nd(e){for(;e===Wa;)Wa=Sn[--Cn],Sn[Cn]=null,Va=Sn[--Cn],Sn[Cn]=null;for(;e===Qr;)Qr=it[--ot],it[ot]=null,xt=it[--ot],it[ot]=null,jt=it[--ot],it[ot]=null}var Ye=null,Qe=null,Y=!1,vt=null;function vy(e,t){var r=st(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Kh(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ye=e,Qe=lr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ye=e,Qe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qr!==null?{id:jt,overflow:xt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=st(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ye=e,Qe=null,!0):!1;default:return!1}}function up(e){return(e.mode&1)!==0&&(e.flags&128)===0}function lp(e){if(Y){var t=Qe;if(t){var r=t;if(!Kh(e,t)){if(up(e))throw Error(_(418));t=lr(r.nextSibling);var n=Ye;t&&Kh(e,t)?vy(n,r):(e.flags=e.flags&-4097|2,Y=!1,Ye=e)}}else{if(up(e))throw Error(_(418));e.flags=e.flags&-4097|2,Y=!1,Ye=e}}}function Jh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ye=e}function aa(e){if(e!==Ye)return!1;if(!Y)return Jh(e),Y=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!op(e.type,e.memoizedProps)),t&&(t=Qe)){if(up(e))throw fy(),Error(_(418));for(;t;)vy(e,t),t=lr(t.nextSibling)}if(Jh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(_(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qe=lr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qe=null}}else Qe=Ye?lr(e.stateNode.nextSibling):null;return!0}function fy(){for(var e=Qe;e;)e=lr(e.nextSibling)}function Dn(){Qe=Ye=null,Y=!1}function id(e){vt===null?vt=[e]:vt.push(e)}var rw=Ht.ReactCurrentBatchConfig;function oi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(_(309));var n=r.stateNode}if(!n)throw Error(_(147,e));var i=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(a){var o=i.refs;a===null?delete o[s]:o[s]=a},t._stringRef=s,t)}if(typeof e!="string")throw Error(_(284));if(!r._owner)throw Error(_(290,e))}return e}function ca(e,t){throw e=Object.prototype.toString.call(t),Error(_(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Gh(e){var t=e._init;return t(e._payload)}function gy(e){function t(v,f){if(e){var g=v.deletions;g===null?(v.deletions=[f],v.flags|=16):g.push(f)}}function r(v,f){if(!e)return null;for(;f!==null;)t(v,f),f=f.sibling;return null}function n(v,f){for(v=new Map;f!==null;)f.key!==null?v.set(f.key,f):v.set(f.index,f),f=f.sibling;return v}function i(v,f){return v=vr(v,f),v.index=0,v.sibling=null,v}function s(v,f,g){return v.index=g,e?(g=v.alternate,g!==null?(g=g.index,g<f?(v.flags|=2,f):g):(v.flags|=2,f)):(v.flags|=1048576,f)}function a(v){return e&&v.alternate===null&&(v.flags|=2),v}function o(v,f,g,C){return f===null||f.tag!==6?(f=pl(g,v.mode,C),f.return=v,f):(f=i(f,g),f.return=v,f)}function c(v,f,g,C){var P=g.type;return P===hn?l(v,f,g.props.children,C,g.key):f!==null&&(f.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xt&&Gh(P)===f.type)?(C=i(f,g.props),C.ref=oi(v,f,g),C.return=v,C):(C=Aa(g.type,g.key,g.props,null,v.mode,C),C.ref=oi(v,f,g),C.return=v,C)}function u(v,f,g,C){return f===null||f.tag!==4||f.stateNode.containerInfo!==g.containerInfo||f.stateNode.implementation!==g.implementation?(f=dl(g,v.mode,C),f.return=v,f):(f=i(f,g.children||[]),f.return=v,f)}function l(v,f,g,C,P){return f===null||f.tag!==7?(f=Jr(g,v.mode,C,P),f.return=v,f):(f=i(f,g),f.return=v,f)}function p(v,f,g){if(typeof f=="string"&&f!==""||typeof f=="number")return f=pl(""+f,v.mode,g),f.return=v,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ys:return g=Aa(f.type,f.key,f.props,null,v.mode,g),g.ref=oi(v,null,f),g.return=v,g;case dn:return f=dl(f,v.mode,g),f.return=v,f;case Xt:var C=f._init;return p(v,C(f._payload),g)}if(Go(f)||ei(f))return f=Jr(f,v.mode,g,null),f.return=v,f;ca(v,f)}return null}function d(v,f,g,C){var P=f!==null?f.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return P!==null?null:o(v,f,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Ys:return g.key===P?c(v,f,g,C):null;case dn:return g.key===P?u(v,f,g,C):null;case Xt:return P=g._init,d(v,f,P(g._payload),C)}if(Go(g)||ei(g))return P!==null?null:l(v,f,g,C,null);ca(v,g)}return null}function h(v,f,g,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(g)||null,o(f,v,""+C,P);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Ys:return v=v.get(C.key===null?g:C.key)||null,c(f,v,C,P);case dn:return v=v.get(C.key===null?g:C.key)||null,u(f,v,C,P);case Xt:var E=C._init;return h(v,f,g,E(C._payload),P)}if(Go(C)||ei(C))return v=v.get(g)||null,l(f,v,C,P,null);ca(f,C)}return null}function m(v,f,g,C){for(var P=null,E=null,I=f,R=f=0,D=null;I!==null&&R<g.length;R++){I.index>R?(D=I,I=null):D=I.sibling;var A=d(v,I,g[R],C);if(A===null){I===null&&(I=D);break}e&&I&&A.alternate===null&&t(v,I),f=s(A,f,R),E===null?P=A:E.sibling=A,E=A,I=D}if(R===g.length)return r(v,I),Y&&Ur(v,R),P;if(I===null){for(;R<g.length;R++)I=p(v,g[R],C),I!==null&&(f=s(I,f,R),E===null?P=I:E.sibling=I,E=I);return Y&&Ur(v,R),P}for(I=n(v,I);R<g.length;R++)D=h(I,v,R,g[R],C),D!==null&&(e&&D.alternate!==null&&I.delete(D.key===null?R:D.key),f=s(D,f,R),E===null?P=D:E.sibling=D,E=D);return e&&I.forEach(function(K){return t(v,K)}),Y&&Ur(v,R),P}function y(v,f,g,C){var P=ei(g);if(typeof P!="function")throw Error(_(150));if(g=P.call(g),g==null)throw Error(_(151));for(var E=P=null,I=f,R=f=0,D=null,A=g.next();I!==null&&!A.done;R++,A=g.next()){I.index>R?(D=I,I=null):D=I.sibling;var K=d(v,I,A.value,C);if(K===null){I===null&&(I=D);break}e&&I&&K.alternate===null&&t(v,I),f=s(K,f,R),E===null?P=K:E.sibling=K,E=K,I=D}if(A.done)return r(v,I),Y&&Ur(v,R),P;if(I===null){for(;!A.done;R++,A=g.next())A=p(v,A.value,C),A!==null&&(f=s(A,f,R),E===null?P=A:E.sibling=A,E=A);return Y&&Ur(v,R),P}for(I=n(v,I);!A.done;R++,A=g.next())A=h(I,v,R,A.value,C),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?R:A.key),f=s(A,f,R),E===null?P=A:E.sibling=A,E=A);return e&&I.forEach(function(rt){return t(v,rt)}),Y&&Ur(v,R),P}function S(v,f,g,C){if(typeof g=="object"&&g!==null&&g.type===hn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Ys:e:{for(var P=g.key,E=f;E!==null;){if(E.key===P){if(P=g.type,P===hn){if(E.tag===7){r(v,E.sibling),f=i(E,g.props.children),f.return=v,v=f;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===Xt&&Gh(P)===E.type){r(v,E.sibling),f=i(E,g.props),f.ref=oi(v,E,g),f.return=v,v=f;break e}r(v,E);break}else t(v,E);E=E.sibling}g.type===hn?(f=Jr(g.props.children,v.mode,C,g.key),f.return=v,v=f):(C=Aa(g.type,g.key,g.props,null,v.mode,C),C.ref=oi(v,f,g),C.return=v,v=C)}return a(v);case dn:e:{for(E=g.key;f!==null;){if(f.key===E)if(f.tag===4&&f.stateNode.containerInfo===g.containerInfo&&f.stateNode.implementation===g.implementation){r(v,f.sibling),f=i(f,g.children||[]),f.return=v,v=f;break e}else{r(v,f);break}else t(v,f);f=f.sibling}f=dl(g,v.mode,C),f.return=v,v=f}return a(v);case Xt:return E=g._init,S(v,f,E(g._payload),C)}if(Go(g))return m(v,f,g,C);if(ei(g))return y(v,f,g,C);ca(v,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,f!==null&&f.tag===6?(r(v,f.sibling),f=i(f,g),f.return=v,v=f):(r(v,f),f=pl(g,v.mode,C),f.return=v,v=f),a(v)):r(v,f)}return S}var bn=gy(!0),my=gy(!1),Ha=Rr(null),Ka=null,Pn=null,od=null;function sd(){od=Pn=Ka=null}function ad(e){var t=Ha.current;Q(Ha),e._currentValue=t}function pp(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function An(e,t){Ka=e,od=Pn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(We=!0),e.firstContext=null)}function ct(e){var t=e._currentValue;if(od!==e)if(e={context:e,memoizedValue:t,next:null},Pn===null){if(Ka===null)throw Error(_(308));Pn=e,Ka.dependencies={lanes:0,firstContext:e}}else Pn=Pn.next=e;return t}var Vr=null;function cd(e){Vr===null?Vr=[e]:Vr.push(e)}function yy(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,cd(t)):(r.next=i.next,i.next=r),t.interleaved=r,Wt(e,n)}function Wt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Zt=!1;function ud(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,W&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Wt(e,r)}return i=n.interleaved,i===null?(t.next=t,cd(n)):(t.next=i.next,i.next=t),n.interleaved=t,Wt(e,r)}function Ra(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Jp(e,r)}}function Qh(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=a:s=s.next=a,r=r.next}while(r!==null);s===null?i=s=t:s=s.next=t}else i=s=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ja(e,t,r,n){var i=e.updateQueue;Zt=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var c=o,u=c.next;c.next=null,a===null?s=u:a.next=u,a=c;var l=e.alternate;l!==null&&(l=l.updateQueue,o=l.lastBaseUpdate,o!==a&&(o===null?l.firstBaseUpdate=u:o.next=u,l.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,l=u=c=null,o=s;do{var d=o.lane,h=o.eventTime;if((n&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,y=o;switch(d=t,h=r,y.tag){case 1:if(m=y.payload,typeof m=="function"){p=m.call(h,p,d);break e}p=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,d=typeof m=="function"?m.call(h,p,d):m,d==null)break e;p=ne({},p,d);break e;case 2:Zt=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[o]:d.push(o))}else h={eventTime:h,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},l===null?(u=l=h,c=p):l=l.next=h,a|=d;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;d=o,o=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(l===null&&(c=p),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=l,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Xr|=a,e.lanes=a,e.memoizedState=p}}function Yh(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(_(191,i));i.call(n)}}}var Ns={},Tt=Rr(Ns),Cs=Rr(Ns),Ps=Rr(Ns);function Hr(e){if(e===Ns)throw Error(_(174));return e}function ld(e,t){switch(J(Ps,t),J(Cs,e),J(Tt,Ns),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Vl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Vl(t,e)}Q(Tt),J(Tt,t)}function Nn(){Q(Tt),Q(Cs),Q(Ps)}function Cy(e){Hr(Ps.current);var t=Hr(Tt.current),r=Vl(t,e.type);t!==r&&(J(Cs,e),J(Tt,r))}function pd(e){Cs.current===e&&(Q(Tt),Q(Cs))}var ee=Rr(0);function Ga(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ol=[];function dd(){for(var e=0;e<ol.length;e++)ol[e]._workInProgressVersionPrimary=null;ol.length=0}var Ea=Ht.ReactCurrentDispatcher,sl=Ht.ReactCurrentBatchConfig,Yr=0,te=null,pe=null,he=null,Qa=!1,is=!1,Rs=0,nw=0;function Te(){throw Error(_(321))}function hd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mt(e[r],t[r]))return!1;return!0}function vd(e,t,r,n,i,s){if(Yr=s,te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ea.current=e===null||e.memoizedState===null?aw:cw,e=r(n,i),is){s=0;do{if(is=!1,Rs=0,25<=s)throw Error(_(301));s+=1,he=pe=null,t.updateQueue=null,Ea.current=uw,e=r(n,i)}while(is)}if(Ea.current=Ya,t=pe!==null&&pe.next!==null,Yr=0,he=pe=te=null,Qa=!1,t)throw Error(_(300));return e}function fd(){var e=Rs!==0;return Rs=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?te.memoizedState=he=e:he=he.next=e,he}function ut(){if(pe===null){var e=te.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=he===null?te.memoizedState:he.next;if(t!==null)he=t,pe=e;else{if(e===null)throw Error(_(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},he===null?te.memoizedState=he=e:he=he.next=e}return he}function Es(e,t){return typeof t=="function"?t(e):t}function al(e){var t=ut(),r=t.queue;if(r===null)throw Error(_(311));r.lastRenderedReducer=e;var n=pe,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var o=a=null,c=null,u=s;do{var l=u.lane;if((Yr&l)===l)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var p={lane:l,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(o=c=p,a=n):c=c.next=p,te.lanes|=l,Xr|=l}u=u.next}while(u!==null&&u!==s);c===null?a=n:c.next=o,mt(n,t.memoizedState)||(We=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do s=i.lane,te.lanes|=s,Xr|=s,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function cl(e){var t=ut(),r=t.queue;if(r===null)throw Error(_(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do s=e(s,a.action),a=a.next;while(a!==i);mt(s,t.memoizedState)||(We=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Py(){}function Ry(e,t){var r=te,n=ut(),i=t(),s=!mt(n.memoizedState,i);if(s&&(n.memoizedState=i,We=!0),n=n.queue,gd(Iy.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||he!==null&&he.memoizedState.tag&1){if(r.flags|=2048,ws(9,wy.bind(null,r,n,i,t),void 0,null),ve===null)throw Error(_(349));Yr&30||Ey(r,t,i)}return i}function Ey(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function wy(e,t,r,n){t.value=r,t.getSnapshot=n,Ty(t)&&_y(e)}function Iy(e,t,r){return r(function(){Ty(t)&&_y(e)})}function Ty(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mt(e,r)}catch{return!0}}function _y(e){var t=Wt(e,1);t!==null&&gt(t,e,1,-1)}function Xh(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Es,lastRenderedState:e},t.queue=e,e=e.dispatch=sw.bind(null,te,e),[t.memoizedState,e]}function ws(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=te.updateQueue,t===null?(t={lastEffect:null,stores:null},te.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ay(){return ut().memoizedState}function wa(e,t,r,n){var i=Rt();te.flags|=e,i.memoizedState=ws(1|t,r,void 0,n===void 0?null:n)}function hc(e,t,r,n){var i=ut();n=n===void 0?null:n;var s=void 0;if(pe!==null){var a=pe.memoizedState;if(s=a.destroy,n!==null&&hd(n,a.deps)){i.memoizedState=ws(t,r,s,n);return}}te.flags|=e,i.memoizedState=ws(1|t,r,s,n)}function Zh(e,t){return wa(8390656,8,e,t)}function gd(e,t){return hc(2048,8,e,t)}function ky(e,t){return hc(4,2,e,t)}function My(e,t){return hc(4,4,e,t)}function Oy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Dy(e,t,r){return r=r!=null?r.concat([e]):null,hc(4,4,Oy.bind(null,t,e),r)}function md(){}function by(e,t){var r=ut();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hd(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ny(e,t){var r=ut();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&hd(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function zy(e,t,r){return Yr&21?(mt(r,t)||(r=Fm(),te.lanes|=r,Xr|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,We=!0),e.memoizedState=r)}function iw(e,t){var r=V;V=r!==0&&4>r?r:4,e(!0);var n=sl.transition;sl.transition={};try{e(!1),t()}finally{V=r,sl.transition=n}}function Ly(){return ut().memoizedState}function ow(e,t,r){var n=hr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jy(e))xy(t,r);else if(r=yy(e,t,r,n),r!==null){var i=xe();gt(r,e,n,i),By(r,t,n)}}function sw(e,t,r){var n=hr(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jy(e))xy(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var a=t.lastRenderedState,o=s(a,r);if(i.hasEagerState=!0,i.eagerState=o,mt(o,a)){var c=t.interleaved;c===null?(i.next=i,cd(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}r=yy(e,t,i,n),r!==null&&(i=xe(),gt(r,e,n,i),By(r,t,n))}}function jy(e){var t=e.alternate;return e===te||t!==null&&t===te}function xy(e,t){is=Qa=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function By(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Jp(e,r)}}var Ya={readContext:ct,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useInsertionEffect:Te,useLayoutEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useMutableSource:Te,useSyncExternalStore:Te,useId:Te,unstable_isNewReconciler:!1},aw={readContext:ct,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:ct,useEffect:Zh,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,wa(4194308,4,Oy.bind(null,t,e),r)},useLayoutEffect:function(e,t){return wa(4194308,4,e,t)},useInsertionEffect:function(e,t){return wa(4,2,e,t)},useMemo:function(e,t){var r=Rt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ow.bind(null,te,e),[n.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:Xh,useDebugValue:md,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=Xh(!1),t=e[0];return e=iw.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=te,i=Rt();if(Y){if(r===void 0)throw Error(_(407));r=r()}else{if(r=t(),ve===null)throw Error(_(349));Yr&30||Ey(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Zh(Iy.bind(null,n,s,e),[e]),n.flags|=2048,ws(9,wy.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=Rt(),t=ve.identifierPrefix;if(Y){var r=xt,n=jt;r=(n&~(1<<32-ft(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Rs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=nw++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cw={readContext:ct,useCallback:by,useContext:ct,useEffect:gd,useImperativeHandle:Dy,useInsertionEffect:ky,useLayoutEffect:My,useMemo:Ny,useReducer:al,useRef:Ay,useState:function(){return al(Es)},useDebugValue:md,useDeferredValue:function(e){var t=ut();return zy(t,pe.memoizedState,e)},useTransition:function(){var e=al(Es)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Py,useSyncExternalStore:Ry,useId:Ly,unstable_isNewReconciler:!1},uw={readContext:ct,useCallback:by,useContext:ct,useEffect:gd,useImperativeHandle:Dy,useInsertionEffect:ky,useLayoutEffect:My,useMemo:Ny,useReducer:cl,useRef:Ay,useState:function(){return cl(Es)},useDebugValue:md,useDeferredValue:function(e){var t=ut();return pe===null?t.memoizedState=e:zy(t,pe.memoizedState,e)},useTransition:function(){var e=cl(Es)[0],t=ut().memoizedState;return[e,t]},useMutableSource:Py,useSyncExternalStore:Ry,useId:Ly,unstable_isNewReconciler:!1};function dt(e,t){if(e&&e.defaultProps){t=ne({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function dp(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ne({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var vc={isMounted:function(e){return(e=e._reactInternals)?rn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=xe(),i=hr(e),s=Bt(n,i);s.payload=t,r!=null&&(s.callback=r),t=pr(e,s,i),t!==null&&(gt(t,e,i,n),Ra(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=xe(),i=hr(e),s=Bt(n,i);s.tag=1,s.payload=t,r!=null&&(s.callback=r),t=pr(e,s,i),t!==null&&(gt(t,e,i,n),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xe(),n=hr(e),i=Bt(r,n);i.tag=2,t!=null&&(i.callback=t),t=pr(e,i,n),t!==null&&(gt(t,e,n,r),Ra(t,e,n))}};function ev(e,t,r,n,i,s,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,a):t.prototype&&t.prototype.isPureReactComponent?!gs(r,n)||!gs(i,s):!0}function Fy(e,t,r){var n=!1,i=mr,s=t.contextType;return typeof s=="object"&&s!==null?s=ct(s):(i=He(t)?Gr:ze.current,n=t.contextTypes,s=(n=n!=null)?On(e,i):mr),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function tv(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&vc.enqueueReplaceState(t,t.state,null)}function hp(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},ud(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=ct(s):(s=He(t)?Gr:ze.current,i.context=On(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(dp(e,t,s,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vc.enqueueReplaceState(i,i.state,null),Ja(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function zn(e,t){try{var r="",n=t;do r+=jR(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function ul(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function vp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lw=typeof WeakMap=="function"?WeakMap:Map;function qy(e,t,r){r=Bt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Za||(Za=!0,wp=n),vp(e,t)},r}function Uy(e,t,r){r=Bt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){vp(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){vp(e,t),typeof n!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function rv(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lw;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=ww.bind(null,e,t,r),t.then(e,e))}function nv(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iv(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Bt(-1,1),t.tag=2,pr(r,t,1))),r.lanes|=1),e)}var pw=Ht.ReactCurrentOwner,We=!1;function je(e,t,r,n){t.child=e===null?my(t,null,r,n):bn(t,e.child,r,n)}function ov(e,t,r,n,i){r=r.render;var s=t.ref;return An(t,i),n=vd(e,t,r,n,s,i),r=fd(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vt(e,t,i)):(Y&&r&&rd(t),t.flags|=1,je(e,t,n,i),t.child)}function sv(e,t,r,n,i){if(e===null){var s=r.type;return typeof s=="function"&&!Id(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,$y(e,t,s,n,i)):(e=Aa(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var a=s.memoizedProps;if(r=r.compare,r=r!==null?r:gs,r(a,n)&&e.ref===t.ref)return Vt(e,t,i)}return t.flags|=1,e=vr(s,n),e.ref=t.ref,e.return=t,t.child=e}function $y(e,t,r,n,i){if(e!==null){var s=e.memoizedProps;if(gs(s,n)&&e.ref===t.ref)if(We=!1,t.pendingProps=n=s,(e.lanes&i)!==0)e.flags&131072&&(We=!0);else return t.lanes=e.lanes,Vt(e,t,i)}return fp(e,t,r,n,i)}function Wy(e,t,r){var n=t.pendingProps,i=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(En,Ge),Ge|=r;else{if(!(r&1073741824))return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,J(En,Ge),Ge|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,J(En,Ge),Ge|=n}else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,J(En,Ge),Ge|=n;return je(e,t,i,r),t.child}function Vy(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fp(e,t,r,n,i){var s=He(r)?Gr:ze.current;return s=On(t,s),An(t,i),r=vd(e,t,r,n,s,i),n=fd(),e!==null&&!We?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Vt(e,t,i)):(Y&&n&&rd(t),t.flags|=1,je(e,t,r,i),t.child)}function av(e,t,r,n,i){if(He(r)){var s=!0;$a(t)}else s=!1;if(An(t,i),t.stateNode===null)Ia(e,t),Fy(t,r,n),hp(t,r,n,i),n=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=ct(u):(u=He(r)?Gr:ze.current,u=On(t,u));var l=r.getDerivedStateFromProps,p=typeof l=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||c!==u)&&tv(t,a,n,u),Zt=!1;var d=t.memoizedState;a.state=d,Ja(t,n,a,i),c=t.memoizedState,o!==n||d!==c||Ve.current||Zt?(typeof l=="function"&&(dp(t,r,l,n),c=t.memoizedState),(o=Zt||ev(t,r,o,n,d,c,u))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Sy(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:dt(t.type,o),a.props=u,p=t.pendingProps,d=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=ct(c):(c=He(r)?Gr:ze.current,c=On(t,c));var h=r.getDerivedStateFromProps;(l=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==p||d!==c)&&tv(t,a,n,c),Zt=!1,d=t.memoizedState,a.state=d,Ja(t,n,a,i);var m=t.memoizedState;o!==p||d!==m||Ve.current||Zt?(typeof h=="function"&&(dp(t,r,h,n),m=t.memoizedState),(u=Zt||ev(t,r,u,n,d,m,c)||!1)?(l||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),a.props=n,a.state=m,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return gp(e,t,r,n,s,i)}function gp(e,t,r,n,i,s){Vy(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return i&&Hh(t,r,!1),Vt(e,t,s);n=t.stateNode,pw.current=t;var o=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=bn(t,e.child,null,s),t.child=bn(t,null,o,s)):je(e,t,o,s),t.memoizedState=n.state,i&&Hh(t,r,!0),t.child}function Hy(e){var t=e.stateNode;t.pendingContext?Vh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vh(e,t.context,!1),ld(e,t.containerInfo)}function cv(e,t,r,n,i){return Dn(),id(i),t.flags|=256,je(e,t,r,n),t.child}var mp={dehydrated:null,treeContext:null,retryLane:0};function yp(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ky(e,t,r){var n=t.pendingProps,i=ee.current,s=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),J(ee,i&1),e===null)return lp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,s?(n=t.mode,s=t.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=mc(a,n,0,null),e=Jr(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=yp(r),t.memoizedState=mp,e):yd(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return dw(e,t,a,n,o,i,r);if(s){s=n.fallback,a=t.mode,i=e.child,o=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=vr(i,c),n.subtreeFlags=i.subtreeFlags&14680064),o!==null?s=vr(o,s):(s=Jr(s,a,r,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,a=e.child.memoizedState,a=a===null?yp(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=e.childLanes&~r,t.memoizedState=mp,n}return s=e.child,e=s.sibling,n=vr(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function yd(e,t){return t=mc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ua(e,t,r,n){return n!==null&&id(n),bn(t,e.child,null,r),e=yd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function dw(e,t,r,n,i,s,a){if(r)return t.flags&256?(t.flags&=-257,n=ul(Error(_(422))),ua(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=mc({mode:"visible",children:n.children},i,0,null),s=Jr(s,i,a,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&bn(t,e.child,null,a),t.child.memoizedState=yp(a),t.memoizedState=mp,s);if(!(t.mode&1))return ua(e,t,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(_(419)),n=ul(s,n,void 0),ua(e,t,a,n)}if(o=(a&e.childLanes)!==0,We||o){if(n=ve,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wt(e,i),gt(n,e,i,-1))}return wd(),n=ul(Error(_(421))),ua(e,t,a,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Iw.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Qe=lr(i.nextSibling),Ye=t,Y=!0,vt=null,e!==null&&(it[ot++]=jt,it[ot++]=xt,it[ot++]=Qr,jt=e.id,xt=e.overflow,Qr=t),t=yd(t,n.children),t.flags|=4096,t)}function uv(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),pp(e.return,t,r)}function ll(e,t,r,n,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function Jy(e,t,r){var n=t.pendingProps,i=n.revealOrder,s=n.tail;if(je(e,t,n.children,r),n=ee.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uv(e,r,t);else if(e.tag===19)uv(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(J(ee,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Ga(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),ll(t,!1,i,r,s);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ga(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}ll(t,!0,r,null,s);break;case"together":ll(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ia(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Vt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Xr|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(_(153));if(t.child!==null){for(e=t.child,r=vr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function hw(e,t,r){switch(t.tag){case 3:Hy(t),Dn();break;case 5:Cy(t);break;case 1:He(t.type)&&$a(t);break;case 4:ld(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;J(Ha,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(J(ee,ee.current&1),t.flags|=128,null):r&t.child.childLanes?Ky(e,t,r):(J(ee,ee.current&1),e=Vt(e,t,r),e!==null?e.sibling:null);J(ee,ee.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Jy(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),J(ee,ee.current),n)break;return null;case 22:case 23:return t.lanes=0,Wy(e,t,r)}return Vt(e,t,r)}var Gy,Sp,Qy,Yy;Gy=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sp=function(){};Qy=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Hr(Tt.current);var s=null;switch(r){case"input":i=ql(e,i),n=ql(e,n),s=[];break;case"select":i=ne({},i,{value:void 0}),n=ne({},n,{value:void 0}),s=[];break;case"textarea":i=Wl(e,i),n=Wl(e,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=qa)}Hl(r,n);var a;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(a in o)o.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(us.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(o=i?.[u],n.hasOwnProperty(u)&&c!==o&&(c!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&o[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(s||(s=[]),s.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(s=s||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(us.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&G("scroll",e),s||o===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Yy=function(e,t,r,n){r!==n&&(t.flags|=4)};function si(e,t){if(!Y)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function _e(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function vw(e,t,r){var n=t.pendingProps;switch(nd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(t),null;case 1:return He(t.type)&&Ua(),_e(t),null;case 3:return n=t.stateNode,Nn(),Q(Ve),Q(ze),dd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(aa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vt!==null&&(_p(vt),vt=null))),Sp(e,t),_e(t),null;case 5:pd(t);var i=Hr(Ps.current);if(r=t.type,e!==null&&t.stateNode!=null)Qy(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(_(166));return _e(t),null}if(e=Hr(Tt.current),aa(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[Et]=t,n[Ss]=s,e=(t.mode&1)!==0,r){case"dialog":G("cancel",n),G("close",n);break;case"iframe":case"object":case"embed":G("load",n);break;case"video":case"audio":for(i=0;i<Yo.length;i++)G(Yo[i],n);break;case"source":G("error",n);break;case"img":case"image":case"link":G("error",n),G("load",n);break;case"details":G("toggle",n);break;case"input":yh(n,s),G("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},G("invalid",n);break;case"textarea":Ch(n,s),G("invalid",n)}Hl(r,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&sa(n.textContent,o,e),i=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&sa(n.textContent,o,e),i=["children",""+o]):us.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&G("scroll",n)}switch(r){case"input":Xs(n),Sh(n,s,!0);break;case"textarea":Xs(n),Ph(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=qa)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Im(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Et]=t,e[Ss]=n,Gy(e,t,!1,!1),t.stateNode=e;e:{switch(a=Kl(r,n),r){case"dialog":G("cancel",e),G("close",e),i=n;break;case"iframe":case"object":case"embed":G("load",e),i=n;break;case"video":case"audio":for(i=0;i<Yo.length;i++)G(Yo[i],e);i=n;break;case"source":G("error",e),i=n;break;case"img":case"image":case"link":G("error",e),G("load",e),i=n;break;case"details":G("toggle",e),i=n;break;case"input":yh(e,n),i=ql(e,n),G("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=ne({},n,{value:void 0}),G("invalid",e);break;case"textarea":Ch(e,n),i=Wl(e,n),G("invalid",e);break;default:i=n}Hl(r,i),o=i;for(s in o)if(o.hasOwnProperty(s)){var c=o[s];s==="style"?Am(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tm(e,c)):s==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ls(e,c):typeof c=="number"&&ls(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(us.hasOwnProperty(s)?c!=null&&s==="onScroll"&&G("scroll",e):c!=null&&Up(e,s,c,a))}switch(r){case"input":Xs(e),Sh(e,n,!1);break;case"textarea":Xs(e),Ph(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gr(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?wn(e,!!n.multiple,s,!1):n.defaultValue!=null&&wn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=qa)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return _e(t),null;case 6:if(e&&t.stateNode!=null)Yy(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(_(166));if(r=Hr(Ps.current),Hr(Tt.current),aa(t)){if(n=t.stateNode,r=t.memoizedProps,n[Et]=t,(s=n.nodeValue!==r)&&(e=Ye,e!==null))switch(e.tag){case 3:sa(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&sa(n.nodeValue,r,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Et]=t,t.stateNode=n}return _e(t),null;case 13:if(Q(ee),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Y&&Qe!==null&&t.mode&1&&!(t.flags&128))fy(),Dn(),t.flags|=98560,s=!1;else if(s=aa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(_(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(_(317));s[Et]=t}else Dn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;_e(t),s=!1}else vt!==null&&(_p(vt),vt=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||ee.current&1?de===0&&(de=3):wd())),t.updateQueue!==null&&(t.flags|=4),_e(t),null);case 4:return Nn(),Sp(e,t),e===null&&ms(t.stateNode.containerInfo),_e(t),null;case 10:return ad(t.type._context),_e(t),null;case 17:return He(t.type)&&Ua(),_e(t),null;case 19:if(Q(ee),s=t.memoizedState,s===null)return _e(t),null;if(n=(t.flags&128)!==0,a=s.rendering,a===null)if(n)si(s,!1);else{if(de!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Ga(e),a!==null){for(t.flags|=128,si(s,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)s=r,e=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,e=a.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return J(ee,ee.current&1|2),t.child}e=e.sibling}s.tail!==null&&ce()>Ln&&(t.flags|=128,n=!0,si(s,!1),t.lanes=4194304)}else{if(!n)if(e=Ga(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),si(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Y)return _e(t),null}else 2*ce()-s.renderingStartTime>Ln&&r!==1073741824&&(t.flags|=128,n=!0,si(s,!1),t.lanes=4194304);s.isBackwards?(a.sibling=t.child,t.child=a):(r=s.last,r!==null?r.sibling=a:t.child=a,s.last=a)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ce(),t.sibling=null,r=ee.current,J(ee,n?r&1|2:r&1),t):(_e(t),null);case 22:case 23:return Ed(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Ge&1073741824&&(_e(t),t.subtreeFlags&6&&(t.flags|=8192)):_e(t),null;case 24:return null;case 25:return null}throw Error(_(156,t.tag))}function fw(e,t){switch(nd(t),t.tag){case 1:return He(t.type)&&Ua(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Nn(),Q(Ve),Q(ze),dd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return pd(t),null;case 13:if(Q(ee),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(_(340));Dn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(ee),null;case 4:return Nn(),null;case 10:return ad(t.type._context),null;case 22:case 23:return Ed(),null;case 24:return null;default:return null}}var la=!1,Ne=!1,gw=typeof WeakSet=="function"?WeakSet:Set,M=null;function Rn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){se(e,t,n)}else r.current=null}function Cp(e,t,r){try{r()}catch(n){se(e,t,n)}}var lv=!1;function mw(e,t){if(np=xa,e=ry(),td(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var a=0,o=-1,c=-1,u=0,l=0,p=e,d=null;t:for(;;){for(var h;p!==r||i!==0&&p.nodeType!==3||(o=a+i),p!==s||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(h=p.firstChild)!==null;)d=p,p=h;for(;;){if(p===e)break t;if(d===r&&++u===i&&(o=a),d===s&&++l===n&&(c=a),(h=p.nextSibling)!==null)break;p=d,d=p.parentNode}p=h}r=o===-1||c===-1?null:{start:o,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ip={focusedElem:e,selectionRange:r},xa=!1,M=t;M!==null;)if(t=M,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,M=e;else for(;M!==null;){t=M;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,S=m.memoizedState,v=t.stateNode,f=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:dt(t.type,y),S);v.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(_(163))}}catch(C){se(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,M=e;break}M=t.return}return m=lv,lv=!1,m}function os(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&Cp(t,r,s)}i=i.next}while(i!==n)}}function fc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Pp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Xy(e){var t=e.alternate;t!==null&&(e.alternate=null,Xy(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Et],delete t[Ss],delete t[ap],delete t[ZE],delete t[ew])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zy(e){return e.tag===5||e.tag===3||e.tag===4}function pv(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zy(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rp(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=qa));else if(n!==4&&(e=e.child,e!==null))for(Rp(e,t,r),e=e.sibling;e!==null;)Rp(e,t,r),e=e.sibling}function Ep(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Ep(e,t,r),e=e.sibling;e!==null;)Ep(e,t,r),e=e.sibling}var ye=null,ht=!1;function Qt(e,t,r){for(r=r.child;r!==null;)eS(e,t,r),r=r.sibling}function eS(e,t,r){if(It&&typeof It.onCommitFiberUnmount=="function")try{It.onCommitFiberUnmount(ac,r)}catch{}switch(r.tag){case 5:Ne||Rn(r,t);case 6:var n=ye,i=ht;ye=null,Qt(e,t,r),ye=n,ht=i,ye!==null&&(ht?(e=ye,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ye.removeChild(r.stateNode));break;case 18:ye!==null&&(ht?(e=ye,r=r.stateNode,e.nodeType===8?nl(e.parentNode,r):e.nodeType===1&&nl(e,r),vs(e)):nl(ye,r.stateNode));break;case 4:n=ye,i=ht,ye=r.stateNode.containerInfo,ht=!0,Qt(e,t,r),ye=n,ht=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&Cp(r,t,a),i=i.next}while(i!==n)}Qt(e,t,r);break;case 1:if(!Ne&&(Rn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(o){se(r,t,o)}Qt(e,t,r);break;case 21:Qt(e,t,r);break;case 22:r.mode&1?(Ne=(n=Ne)||r.memoizedState!==null,Qt(e,t,r),Ne=n):Qt(e,t,r);break;default:Qt(e,t,r)}}function dv(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new gw),t.forEach(function(n){var i=Tw.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function pt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:ye=o.stateNode,ht=!1;break e;case 3:ye=o.stateNode.containerInfo,ht=!0;break e;case 4:ye=o.stateNode.containerInfo,ht=!0;break e}o=o.return}if(ye===null)throw Error(_(160));eS(s,a,i),ye=null,ht=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){se(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)tS(t,e),t=t.sibling}function tS(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pt(t,e),Pt(e),n&4){try{os(3,e,e.return),fc(3,e)}catch(y){se(e,e.return,y)}try{os(5,e,e.return)}catch(y){se(e,e.return,y)}}break;case 1:pt(t,e),Pt(e),n&512&&r!==null&&Rn(r,r.return);break;case 5:if(pt(t,e),Pt(e),n&512&&r!==null&&Rn(r,r.return),e.flags&32){var i=e.stateNode;try{ls(i,"")}catch(y){se(e,e.return,y)}}if(n&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,a=r!==null?r.memoizedProps:s,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Em(i,s),Kl(o,a);var u=Kl(o,s);for(a=0;a<c.length;a+=2){var l=c[a],p=c[a+1];l==="style"?Am(i,p):l==="dangerouslySetInnerHTML"?Tm(i,p):l==="children"?ls(i,p):Up(i,l,p,u)}switch(o){case"input":Ul(i,s);break;case"textarea":wm(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?wn(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?wn(i,!!s.multiple,s.defaultValue,!0):wn(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ss]=s}catch(y){se(e,e.return,y)}}break;case 6:if(pt(t,e),Pt(e),n&4){if(e.stateNode===null)throw Error(_(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(y){se(e,e.return,y)}}break;case 3:if(pt(t,e),Pt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{vs(t.containerInfo)}catch(y){se(e,e.return,y)}break;case 4:pt(t,e),Pt(e);break;case 13:pt(t,e),Pt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pd=ce())),n&4&&dv(e);break;case 22:if(l=r!==null&&r.memoizedState!==null,e.mode&1?(Ne=(u=Ne)||l,pt(t,e),Ne=u):pt(t,e),Pt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!l&&e.mode&1)for(M=e,l=e.child;l!==null;){for(p=M=l;M!==null;){switch(d=M,h=d.child,d.tag){case 0:case 11:case 14:case 15:os(4,d,d.return);break;case 1:Rn(d,d.return);var m=d.stateNode;if(typeof m.componentWillUnmount=="function"){n=d,r=d.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(y){se(n,r,y)}}break;case 5:Rn(d,d.return);break;case 22:if(d.memoizedState!==null){vv(p);continue}}h!==null?(h.return=d,M=h):vv(p)}l=l.sibling}e:for(l=null,p=e;;){if(p.tag===5){if(l===null){l=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=_m("display",a))}catch(y){se(e,e.return,y)}}}else if(p.tag===6){if(l===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(y){se(e,e.return,y)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===e)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;p.sibling===null;){if(p.return===null||p.return===e)break e;l===p&&(l=null),p=p.return}l===p&&(l=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:pt(t,e),Pt(e),n&4&&dv(e);break;case 21:break;default:pt(t,e),Pt(e)}}function Pt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zy(r)){var n=r;break e}r=r.return}throw Error(_(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ls(i,""),n.flags&=-33);var s=pv(e);Ep(e,s,i);break;case 3:case 4:var a=n.stateNode.containerInfo,o=pv(e);Rp(e,o,a);break;default:throw Error(_(161))}}catch(c){se(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yw(e,t,r){M=e,rS(e)}function rS(e,t,r){for(var n=(e.mode&1)!==0;M!==null;){var i=M,s=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||la;if(!a){var o=i.alternate,c=o!==null&&o.memoizedState!==null||Ne;o=la;var u=Ne;if(la=a,(Ne=c)&&!u)for(M=i;M!==null;)a=M,c=a.child,a.tag===22&&a.memoizedState!==null?fv(i):c!==null?(c.return=a,M=c):fv(i);for(;s!==null;)M=s,rS(s),s=s.sibling;M=i,la=o,Ne=u}hv(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,M=s):hv(e)}}function hv(e){for(;M!==null;){var t=M;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ne||fc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ne)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:dt(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Yh(t,s,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Yh(t,a,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var l=u.memoizedState;if(l!==null){var p=l.dehydrated;p!==null&&vs(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(_(163))}Ne||t.flags&512&&Pp(t)}catch(d){se(t,t.return,d)}}if(t===e){M=null;break}if(r=t.sibling,r!==null){r.return=t.return,M=r;break}M=t.return}}function vv(e){for(;M!==null;){var t=M;if(t===e){M=null;break}var r=t.sibling;if(r!==null){r.return=t.return,M=r;break}M=t.return}}function fv(e){for(;M!==null;){var t=M;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{fc(4,t)}catch(c){se(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(c){se(t,i,c)}}var s=t.return;try{Pp(t)}catch(c){se(t,s,c)}break;case 5:var a=t.return;try{Pp(t)}catch(c){se(t,a,c)}}}catch(c){se(t,t.return,c)}if(t===e){M=null;break}var o=t.sibling;if(o!==null){o.return=t.return,M=o;break}M=t.return}}var Sw=Math.ceil,Xa=Ht.ReactCurrentDispatcher,Sd=Ht.ReactCurrentOwner,at=Ht.ReactCurrentBatchConfig,W=0,ve=null,le=null,Pe=0,Ge=0,En=Rr(0),de=0,Is=null,Xr=0,gc=0,Cd=0,ss=null,$e=null,Pd=0,Ln=1/0,zt=null,Za=!1,wp=null,dr=null,pa=!1,or=null,ec=0,as=0,Ip=null,Ta=-1,_a=0;function xe(){return W&6?ce():Ta!==-1?Ta:Ta=ce()}function hr(e){return e.mode&1?W&2&&Pe!==0?Pe&-Pe:rw.transition!==null?(_a===0&&(_a=Fm()),_a):(e=V,e!==0||(e=window.event,e=e===void 0?16:Km(e.type)),e):1}function gt(e,t,r,n){if(50<as)throw as=0,Ip=null,Error(_(185));Os(e,r,n),(!(W&2)||e!==ve)&&(e===ve&&(!(W&2)&&(gc|=r),de===4&&nr(e,Pe)),Ke(e,n),r===1&&W===0&&!(t.mode&1)&&(Ln=ce()+500,dc&&Er()))}function Ke(e,t){var r=e.callbackNode;rE(e,t);var n=ja(e,e===ve?Pe:0);if(n===0)r!==null&&wh(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&wh(r),t===1)e.tag===0?tw(gv.bind(null,e)):dy(gv.bind(null,e)),YE(function(){!(W&6)&&Er()}),r=null;else{switch(qm(n)){case 1:r=Kp;break;case 4:r=xm;break;case 16:r=La;break;case 536870912:r=Bm;break;default:r=La}r=lS(r,nS.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nS(e,t){if(Ta=-1,_a=0,W&6)throw Error(_(327));var r=e.callbackNode;if(kn()&&e.callbackNode!==r)return null;var n=ja(e,e===ve?Pe:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=tc(e,n);else{t=n;var i=W;W|=2;var s=oS();(ve!==e||Pe!==t)&&(zt=null,Ln=ce()+500,Kr(e,t));do try{Rw();break}catch(o){iS(e,o)}while(!0);sd(),Xa.current=s,W=i,le!==null?t=0:(ve=null,Pe=0,t=de)}if(t!==0){if(t===2&&(i=Xl(e),i!==0&&(n=i,t=Tp(e,i))),t===1)throw r=Is,Kr(e,0),nr(e,n),Ke(e,ce()),r;if(t===6)nr(e,n);else{if(i=e.current.alternate,!(n&30)&&!Cw(i)&&(t=tc(e,n),t===2&&(s=Xl(e),s!==0&&(n=s,t=Tp(e,s))),t===1))throw r=Is,Kr(e,0),nr(e,n),Ke(e,ce()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(_(345));case 2:$r(e,$e,zt);break;case 3:if(nr(e,n),(n&130023424)===n&&(t=Pd+500-ce(),10<t)){if(ja(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){xe(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=sp($r.bind(null,e,$e,zt),t);break}$r(e,$e,zt);break;case 4:if(nr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-ft(n);s=1<<a,a=t[a],a>i&&(i=a),n&=~s}if(n=i,n=ce()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Sw(n/1960))-n,10<n){e.timeoutHandle=sp($r.bind(null,e,$e,zt),n);break}$r(e,$e,zt);break;case 5:$r(e,$e,zt);break;default:throw Error(_(329))}}}return Ke(e,ce()),e.callbackNode===r?nS.bind(null,e):null}function Tp(e,t){var r=ss;return e.current.memoizedState.isDehydrated&&(Kr(e,t).flags|=256),e=tc(e,t),e!==2&&(t=$e,$e=r,t!==null&&_p(t)),e}function _p(e){$e===null?$e=e:$e.push.apply($e,e)}function Cw(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!mt(s(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function nr(e,t){for(t&=~Cd,t&=~gc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ft(t),n=1<<r;e[r]=-1,t&=~n}}function gv(e){if(W&6)throw Error(_(327));kn();var t=ja(e,0);if(!(t&1))return Ke(e,ce()),null;var r=tc(e,t);if(e.tag!==0&&r===2){var n=Xl(e);n!==0&&(t=n,r=Tp(e,n))}if(r===1)throw r=Is,Kr(e,0),nr(e,t),Ke(e,ce()),r;if(r===6)throw Error(_(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,$r(e,$e,zt),Ke(e,ce()),null}function Rd(e,t){var r=W;W|=1;try{return e(t)}finally{W=r,W===0&&(Ln=ce()+500,dc&&Er())}}function Zr(e){or!==null&&or.tag===0&&!(W&6)&&kn();var t=W;W|=1;var r=at.transition,n=V;try{if(at.transition=null,V=1,e)return e()}finally{V=n,at.transition=r,W=t,!(W&6)&&Er()}}function Ed(){Ge=En.current,Q(En)}function Kr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,QE(r)),le!==null)for(r=le.return;r!==null;){var n=r;switch(nd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ua();break;case 3:Nn(),Q(Ve),Q(ze),dd();break;case 5:pd(n);break;case 4:Nn();break;case 13:Q(ee);break;case 19:Q(ee);break;case 10:ad(n.type._context);break;case 22:case 23:Ed()}r=r.return}if(ve=e,le=e=vr(e.current,null),Pe=Ge=t,de=0,Is=null,Cd=gc=Xr=0,$e=ss=null,Vr!==null){for(t=0;t<Vr.length;t++)if(r=Vr[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var a=s.next;s.next=i,n.next=a}r.pending=n}Vr=null}return e}function iS(e,t){do{var r=le;try{if(sd(),Ea.current=Ya,Qa){for(var n=te.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Qa=!1}if(Yr=0,he=pe=te=null,is=!1,Rs=0,Sd.current=null,r===null||r.return===null){de=1,Is=t,le=null;break}e:{var s=e,a=r.return,o=r,c=t;if(t=Pe,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,l=o,p=l.tag;if(!(l.mode&1)&&(p===0||p===11||p===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=nv(a);if(h!==null){h.flags&=-257,iv(h,a,o,s,t),h.mode&1&&rv(s,u,t),t=h,c=u;var m=t.updateQueue;if(m===null){var y=new Set;y.add(c),t.updateQueue=y}else m.add(c);break e}else{if(!(t&1)){rv(s,u,t),wd();break e}c=Error(_(426))}}else if(Y&&o.mode&1){var S=nv(a);if(S!==null){!(S.flags&65536)&&(S.flags|=256),iv(S,a,o,s,t),id(zn(c,o));break e}}s=c=zn(c,o),de!==4&&(de=2),ss===null?ss=[s]:ss.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var v=qy(s,c,t);Qh(s,v);break e;case 1:o=c;var f=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof f.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(dr===null||!dr.has(g)))){s.flags|=65536,t&=-t,s.lanes|=t;var C=Uy(s,o,t);Qh(s,C);break e}}s=s.return}while(s!==null)}aS(r)}catch(P){t=P,le===r&&r!==null&&(le=r=r.return);continue}break}while(!0)}function oS(){var e=Xa.current;return Xa.current=Ya,e===null?Ya:e}function wd(){(de===0||de===3||de===2)&&(de=4),ve===null||!(Xr&268435455)&&!(gc&268435455)||nr(ve,Pe)}function tc(e,t){var r=W;W|=2;var n=oS();(ve!==e||Pe!==t)&&(zt=null,Kr(e,t));do try{Pw();break}catch(i){iS(e,i)}while(!0);if(sd(),W=r,Xa.current=n,le!==null)throw Error(_(261));return ve=null,Pe=0,de}function Pw(){for(;le!==null;)sS(le)}function Rw(){for(;le!==null&&!KR();)sS(le)}function sS(e){var t=uS(e.alternate,e,Ge);e.memoizedProps=e.pendingProps,t===null?aS(e):le=t,Sd.current=null}function aS(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=fw(r,t),r!==null){r.flags&=32767,le=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{de=6,le=null;return}}else if(r=vw(r,t,Ge),r!==null){le=r;return}if(t=t.sibling,t!==null){le=t;return}le=t=e}while(t!==null);de===0&&(de=5)}function $r(e,t,r){var n=V,i=at.transition;try{at.transition=null,V=1,Ew(e,t,r,n)}finally{at.transition=i,V=n}return null}function Ew(e,t,r,n){do kn();while(or!==null);if(W&6)throw Error(_(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(_(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(nE(e,s),e===ve&&(le=ve=null,Pe=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||pa||(pa=!0,lS(La,function(){return kn(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=at.transition,at.transition=null;var a=V;V=1;var o=W;W|=4,Sd.current=null,mw(e,r),tS(r,e),$E(ip),xa=!!np,ip=np=null,e.current=r,yw(r),JR(),W=o,V=a,at.transition=s}else e.current=r;if(pa&&(pa=!1,or=e,ec=i),s=e.pendingLanes,s===0&&(dr=null),YR(r.stateNode),Ke(e,ce()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Za)throw Za=!1,e=wp,wp=null,e;return ec&1&&e.tag!==0&&kn(),s=e.pendingLanes,s&1?e===Ip?as++:(as=0,Ip=e):as=0,Er(),null}function kn(){if(or!==null){var e=qm(ec),t=at.transition,r=V;try{if(at.transition=null,V=16>e?16:e,or===null)var n=!1;else{if(e=or,or=null,ec=0,W&6)throw Error(_(331));var i=W;for(W|=4,M=e.current;M!==null;){var s=M,a=s.child;if(M.flags&16){var o=s.deletions;if(o!==null){for(var c=0;c<o.length;c++){var u=o[c];for(M=u;M!==null;){var l=M;switch(l.tag){case 0:case 11:case 15:os(8,l,s)}var p=l.child;if(p!==null)p.return=l,M=p;else for(;M!==null;){l=M;var d=l.sibling,h=l.return;if(Xy(l),l===u){M=null;break}if(d!==null){d.return=h,M=d;break}M=h}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var S=y.sibling;y.sibling=null,y=S}while(y!==null)}}M=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,M=a;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:os(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,M=v;break e}M=s.return}}var f=e.current;for(M=f;M!==null;){a=M;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,M=g;else e:for(a=f;M!==null;){if(o=M,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:fc(9,o)}}catch(P){se(o,o.return,P)}if(o===a){M=null;break e}var C=o.sibling;if(C!==null){C.return=o.return,M=C;break e}M=o.return}}if(W=i,Er(),It&&typeof It.onPostCommitFiberRoot=="function")try{It.onPostCommitFiberRoot(ac,e)}catch{}n=!0}return n}finally{V=r,at.transition=t}}return!1}function mv(e,t,r){t=zn(r,t),t=qy(e,t,1),e=pr(e,t,1),t=xe(),e!==null&&(Os(e,1,t),Ke(e,t))}function se(e,t,r){if(e.tag===3)mv(e,e,r);else for(;t!==null;){if(t.tag===3){mv(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(dr===null||!dr.has(n))){e=zn(r,e),e=Uy(t,e,1),t=pr(t,e,1),e=xe(),t!==null&&(Os(t,1,e),Ke(t,e));break}}t=t.return}}function ww(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=xe(),e.pingedLanes|=e.suspendedLanes&r,ve===e&&(Pe&r)===r&&(de===4||de===3&&(Pe&130023424)===Pe&&500>ce()-Pd?Kr(e,0):Cd|=r),Ke(e,t)}function cS(e,t){t===0&&(e.mode&1?(t=ta,ta<<=1,!(ta&130023424)&&(ta=4194304)):t=1);var r=xe();e=Wt(e,t),e!==null&&(Os(e,t,r),Ke(e,r))}function Iw(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),cS(e,r)}function Tw(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(_(314))}n!==null&&n.delete(t),cS(e,r)}var uS;uS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ve.current)We=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return We=!1,hw(e,t,r);We=!!(e.flags&131072)}else We=!1,Y&&t.flags&1048576&&hy(t,Va,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ia(e,t),e=t.pendingProps;var i=On(t,ze.current);An(t,r),i=vd(null,t,n,e,i,r);var s=fd();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(n)?(s=!0,$a(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ud(t),i.updater=vc,t.stateNode=i,i._reactInternals=t,hp(t,n,e,r),t=gp(null,t,n,!0,s,r)):(t.tag=0,Y&&s&&rd(t),je(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ia(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Aw(n),e=dt(n,e),i){case 0:t=fp(null,t,n,e,r);break e;case 1:t=av(null,t,n,e,r);break e;case 11:t=ov(null,t,n,e,r);break e;case 14:t=sv(null,t,n,dt(n.type,e),r);break e}throw Error(_(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dt(n,i),fp(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dt(n,i),av(e,t,n,i,r);case 3:e:{if(Hy(t),e===null)throw Error(_(387));n=t.pendingProps,s=t.memoizedState,i=s.element,Sy(e,t),Ja(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=zn(Error(_(423)),t),t=cv(e,t,n,r,i);break e}else if(n!==i){i=zn(Error(_(424)),t),t=cv(e,t,n,r,i);break e}else for(Qe=lr(t.stateNode.containerInfo.firstChild),Ye=t,Y=!0,vt=null,r=my(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Dn(),n===i){t=Vt(e,t,r);break e}je(e,t,n,r)}t=t.child}return t;case 5:return Cy(t),e===null&&lp(t),n=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,a=i.children,op(n,i)?a=null:s!==null&&op(n,s)&&(t.flags|=32),Vy(e,t),je(e,t,a,r),t.child;case 6:return e===null&&lp(t),null;case 13:return Ky(e,t,r);case 4:return ld(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=bn(t,null,n,r):je(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dt(n,i),ov(e,t,n,i,r);case 7:return je(e,t,t.pendingProps,r),t.child;case 8:return je(e,t,t.pendingProps.children,r),t.child;case 12:return je(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,J(Ha,n._currentValue),n._currentValue=a,s!==null)if(mt(s.value,a)){if(s.children===i.children&&!Ve.current){t=Vt(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var c=o.firstContext;c!==null;){if(c.context===n){if(s.tag===1){c=Bt(-1,r&-r),c.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var l=u.pending;l===null?c.next=c:(c.next=l.next,l.next=c),u.pending=c}}s.lanes|=r,c=s.alternate,c!==null&&(c.lanes|=r),pp(s.return,r,t),o.lanes|=r;break}c=c.next}}else if(s.tag===10)a=s.type===t.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(_(341));a.lanes|=r,o=a.alternate,o!==null&&(o.lanes|=r),pp(a,r,t),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===t){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}je(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,An(t,r),i=ct(i),n=n(i),t.flags|=1,je(e,t,n,r),t.child;case 14:return n=t.type,i=dt(n,t.pendingProps),i=dt(n.type,i),sv(e,t,n,i,r);case 15:return $y(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:dt(n,i),Ia(e,t),t.tag=1,He(n)?(e=!0,$a(t)):e=!1,An(t,r),Fy(t,n,i),hp(t,n,i,r),gp(null,t,n,!0,e,r);case 19:return Jy(e,t,r);case 22:return Wy(e,t,r)}throw Error(_(156,t.tag))};function lS(e,t){return jm(e,t)}function _w(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function st(e,t,r,n){return new _w(e,t,r,n)}function Id(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Aw(e){if(typeof e=="function")return Id(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Wp)return 11;if(e===Vp)return 14}return 2}function vr(e,t){var r=e.alternate;return r===null?(r=st(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Aa(e,t,r,n,i,s){var a=2;if(n=e,typeof e=="function")Id(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case hn:return Jr(r.children,i,s,t);case $p:a=8,i|=8;break;case jl:return e=st(12,r,t,i|2),e.elementType=jl,e.lanes=s,e;case xl:return e=st(13,r,t,i),e.elementType=xl,e.lanes=s,e;case Bl:return e=st(19,r,t,i),e.elementType=Bl,e.lanes=s,e;case Cm:return mc(r,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ym:a=10;break e;case Sm:a=9;break e;case Wp:a=11;break e;case Vp:a=14;break e;case Xt:a=16,n=null;break e}throw Error(_(130,e==null?e:typeof e,""))}return t=st(a,r,t,i),t.elementType=e,t.type=n,t.lanes=s,t}function Jr(e,t,r,n){return e=st(7,e,n,t),e.lanes=r,e}function mc(e,t,r,n){return e=st(22,e,n,t),e.elementType=Cm,e.lanes=r,e.stateNode={isHidden:!1},e}function pl(e,t,r){return e=st(6,e,null,t),e.lanes=r,e}function dl(e,t,r){return t=st(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function kw(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hu(0),this.expirationTimes=Hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hu(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Td(e,t,r,n,i,s,a,o,c){return e=new kw(e,t,r,o,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=st(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ud(s),e}function Mw(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function pS(e){if(!e)return mr;e=e._reactInternals;e:{if(rn(e)!==e||e.tag!==1)throw Error(_(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(_(171))}if(e.tag===1){var r=e.type;if(He(r))return py(e,r,t)}return t}function dS(e,t,r,n,i,s,a,o,c){return e=Td(r,n,!0,e,i,s,a,o,c),e.context=pS(null),r=e.current,n=xe(),i=hr(r),s=Bt(n,i),s.callback=t??null,pr(r,s,i),e.current.lanes=i,Os(e,i,n),Ke(e,n),e}function yc(e,t,r,n){var i=t.current,s=xe(),a=hr(i);return r=pS(r),t.context===null?t.context=r:t.pendingContext=r,t=Bt(s,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=pr(i,t,a),e!==null&&(gt(e,i,a,s),Ra(e,i,a)),a}function rc(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yv(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function _d(e,t){yv(e,t),(e=e.alternate)&&yv(e,t)}function Ow(){return null}var hS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ad(e){this._internalRoot=e}Sc.prototype.render=Ad.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(_(409));yc(e,t,null,null)};Sc.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zr(function(){yc(null,e,null,null)}),t[$t]=null}};function Sc(e){this._internalRoot=e}Sc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<rr.length&&t!==0&&t<rr[r].priority;r++);rr.splice(r,0,e),r===0&&Hm(e)}};function kd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Sv(){}function Dw(e,t,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=rc(a);s.call(u)}}var a=dS(t,n,e,0,null,!1,!1,"",Sv);return e._reactRootContainer=a,e[$t]=a.current,ms(e.nodeType===8?e.parentNode:e),Zr(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var o=n;n=function(){var u=rc(c);o.call(u)}}var c=Td(e,0,!1,null,null,!1,!1,"",Sv);return e._reactRootContainer=c,e[$t]=c.current,ms(e.nodeType===8?e.parentNode:e),Zr(function(){yc(t,c,r,n)}),c}function Pc(e,t,r,n,i){var s=r._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var o=i;i=function(){var c=rc(a);o.call(c)}}yc(t,a,e,i)}else a=Dw(r,t,e,i,n);return rc(a)}Um=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qo(t.pendingLanes);r!==0&&(Jp(t,r|1),Ke(t,ce()),!(W&6)&&(Ln=ce()+500,Er()))}break;case 13:Zr(function(){var n=Wt(e,1);if(n!==null){var i=xe();gt(n,e,1,i)}}),_d(e,1)}};Gp=function(e){if(e.tag===13){var t=Wt(e,134217728);if(t!==null){var r=xe();gt(t,e,134217728,r)}_d(e,134217728)}};$m=function(e){if(e.tag===13){var t=hr(e),r=Wt(e,t);if(r!==null){var n=xe();gt(r,e,t,n)}_d(e,t)}};Wm=function(){return V};Vm=function(e,t){var r=V;try{return V=e,t()}finally{V=r}};Gl=function(e,t,r){switch(t){case"input":if(Ul(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=pc(n);if(!i)throw Error(_(90));Rm(n),Ul(n,i)}}}break;case"textarea":wm(e,r);break;case"select":t=r.value,t!=null&&wn(e,!!r.multiple,t,!1)}};Om=Rd;Dm=Zr;var bw={usingClientEntryPoint:!1,Events:[bs,mn,pc,km,Mm,Rd]},ai={findFiberByHostInstance:Wr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Nw={bundleType:ai.bundleType,version:ai.version,rendererPackageName:ai.rendererPackageName,rendererConfig:ai.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ht.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zm(e),e===null?null:e.stateNode},findFiberByHostInstance:ai.findFiberByHostInstance||Ow,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{ac=da.inject(Nw),It=da}catch{}}Ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bw;Ze.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kd(t))throw Error(_(200));return Mw(e,t,null,r)};Ze.createRoot=function(e,t){if(!kd(e))throw Error(_(299));var r=!1,n="",i=hS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Td(e,1,!1,null,null,r,!1,n,i),e[$t]=t.current,ms(e.nodeType===8?e.parentNode:e),new Ad(t)};Ze.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(_(188)):(e=Object.keys(e).join(","),Error(_(268,e)));return e=zm(t),e=e===null?null:e.stateNode,e};Ze.flushSync=function(e){return Zr(e)};Ze.hydrate=function(e,t,r){if(!Cc(t))throw Error(_(200));return Pc(null,e,t,!0,r)};Ze.hydrateRoot=function(e,t,r){if(!kd(e))throw Error(_(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",a=hS;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=dS(t,null,e,1,r??null,i,!1,s,a),e[$t]=t.current,ms(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Sc(t)};Ze.render=function(e,t,r){if(!Cc(t))throw Error(_(200));return Pc(null,e,t,!1,r)};Ze.unmountComponentAtNode=function(e){if(!Cc(e))throw Error(_(40));return e._reactRootContainer?(Zr(function(){Pc(null,null,e,!1,function(){e._reactRootContainer=null,e[$t]=null})}),!0):!1};Ze.unstable_batchedUpdates=Rd;Ze.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Cc(r))throw Error(_(200));if(e==null||e._reactInternals===void 0)throw Error(_(38));return Pc(e,t,r,!1,n)};Ze.version="18.3.1-next-f1338f8080-20240426";function vS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vS)}catch(e){console.error(e)}}vS(),vm.exports=Ze;var zw=vm.exports,fS,Cv=zw;fS=Cv.createRoot,Cv.hydrateRoot;var Md={};Object.defineProperty(Md,"__esModule",{value:!0});Md.parse=Uw;Md.serialize=$w;const Lw=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,jw=/^[\u0021-\u003A\u003C-\u007E]*$/,xw=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Bw=/^[\u0020-\u003A\u003D-\u007E]*$/,Fw=Object.prototype.toString,qw=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function Uw(e,t){const r=new qw,n=e.length;if(n<2)return r;const i=t?.decode||Ww;let s=0;do{const a=e.indexOf("=",s);if(a===-1)break;const o=e.indexOf(";",s),c=o===-1?n:o;if(a>c){s=e.lastIndexOf(";",a-1)+1;continue}const u=Pv(e,s,a),l=Rv(e,a,u),p=e.slice(u,l);if(r[p]===void 0){let d=Pv(e,a+1,c),h=Rv(e,c,d);const m=i(e.slice(d,h));r[p]=m}s=c+1}while(s<n);return r}function Pv(e,t,r){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function Rv(e,t,r){for(;t>r;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function $w(e,t,r){const n=r?.encode||encodeURIComponent;if(!Lw.test(e))throw new TypeError(`argument name is invalid: ${e}`);const i=n(t);if(!jw.test(i))throw new TypeError(`argument val is invalid: ${t}`);let s=e+"="+i;if(!r)return s;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);s+="; Max-Age="+r.maxAge}if(r.domain){if(!xw.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);s+="; Domain="+r.domain}if(r.path){if(!Bw.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);s+="; Path="+r.path}if(r.expires){if(!Vw(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);s+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(s+="; HttpOnly"),r.secure&&(s+="; Secure"),r.partitioned&&(s+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":s+="; Priority=Low";break;case"medium":s+="; Priority=Medium";break;case"high":s+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":s+="; SameSite=Strict";break;case"lax":s+="; SameSite=Lax";break;case"none":s+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return s}function Ww(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function Vw(e){return Fw.call(e)==="[object Date]"}/**
 * react-router v7.2.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ev="popstate";function Hw(e={}){function t(n,i){let{pathname:s,search:a,hash:o}=n.location;return Ap("",{pathname:s,search:a,hash:o},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Ts(i)}return Jw(t,r,null,e)}function re(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _t(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Kw(){return Math.random().toString(36).substring(2,10)}function wv(e,t){return{usr:e.state,key:e.key,idx:t}}function Ap(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Wn(t):t,state:r,key:t&&t.key||n||Kw()}}function Ts({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function Jw(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:s=!1}=n,a=i.history,o="POP",c=null,u=l();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function l(){return(a.state||{idx:null}).idx}function p(){o="POP";let S=l(),v=S==null?null:S-u;u=S,c&&c({action:o,location:y.location,delta:v})}function d(S,v){o="PUSH";let f=Ap(y.location,S,v);u=l()+1;let g=wv(f,u),C=y.createHref(f);try{a.pushState(g,"",C)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;i.location.assign(C)}s&&c&&c({action:o,location:y.location,delta:1})}function h(S,v){o="REPLACE";let f=Ap(y.location,S,v);u=l();let g=wv(f,u),C=y.createHref(f);a.replaceState(g,"",C),s&&c&&c({action:o,location:y.location,delta:0})}function m(S){let v=i.location.origin!=="null"?i.location.origin:i.location.href,f=typeof S=="string"?S:Ts(S);return f=f.replace(/ $/,"%20"),re(v,`No window.location.(origin|href) available to create URL for href: ${f}`),new URL(f,v)}let y={get action(){return o},get location(){return e(i,a)},listen(S){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Ev,p),c=S,()=>{i.removeEventListener(Ev,p),c=null}},createHref(S){return t(i,S)},createURL:m,encodeLocation(S){let v=m(S);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(S){return a.go(S)}};return y}function gS(e,t,r="/"){return Gw(e,t,r,!1)}function Gw(e,t,r,n){let i=typeof t=="string"?Wn(t):t,s=yr(i.pathname||"/",r);if(s==null)return null;let a=mS(e);Qw(a);let o=null;for(let c=0;o==null&&c<a.length;++c){let u=aI(s);o=oI(a[c],u,n)}return o}function mS(e,t=[],r=[],n=""){let i=(s,a,o)=>{let c={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(re(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=Ft([n,c.relativePath]),l=r.concat(c);s.children&&s.children.length>0&&(re(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),mS(s.children,t,l,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:nI(u,s.index),routesMeta:l})};return e.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))i(s,a);else for(let o of yS(s.path))i(s,a,o)}),t}function yS(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return i?[s,""]:[s];let a=yS(n.join("/")),o=[];return o.push(...a.map(c=>c===""?s:[s,c].join("/"))),i&&o.push(...a),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Qw(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:iI(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Yw=/^:[\w-]+$/,Xw=3,Zw=2,eI=1,tI=10,rI=-2,Iv=e=>e==="*";function nI(e,t){let r=e.split("/"),n=r.length;return r.some(Iv)&&(n+=rI),t&&(n+=Zw),r.filter(i=>!Iv(i)).reduce((i,s)=>i+(Yw.test(s)?Xw:s===""?eI:tI),n)}function iI(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function oI(e,t,r=!1){let{routesMeta:n}=e,i={},s="/",a=[];for(let o=0;o<n.length;++o){let c=n[o],u=o===n.length-1,l=s==="/"?t:t.slice(s.length)||"/",p=nc({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},l),d=c.route;if(!p&&u&&r&&!n[n.length-1].route.index&&(p=nc({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},l)),!p)return null;Object.assign(i,p.params),a.push({params:i,pathname:Ft([s,p.pathname]),pathnameBase:pI(Ft([s,p.pathnameBase])),route:d}),p.pathnameBase!=="/"&&(s=Ft([s,p.pathnameBase]))}return a}function nc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=sI(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1);return{params:n.reduce((u,{paramName:l,isOptional:p},d)=>{if(l==="*"){let m=o[d]||"";a=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const h=o[d];return p&&!h?u[l]=void 0:u[l]=(h||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:e}}function sI(e,t=!1,r=!0){_t(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,c)=>(n.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function aI(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _t(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function yr(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function cI(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Wn(e):e;return{pathname:r?r.startsWith("/")?r:uI(r,t):t,search:dI(n),hash:hI(i)}}function uI(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function hl(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function lI(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function SS(e){let t=lI(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function CS(e,t,r,n=!1){let i;typeof e=="string"?i=Wn(e):(i={...e},re(!i.pathname||!i.pathname.includes("?"),hl("?","pathname","search",i)),re(!i.pathname||!i.pathname.includes("#"),hl("#","pathname","hash",i)),re(!i.search||!i.search.includes("#"),hl("#","search","hash",i)));let s=e===""||i.pathname==="",a=s?"/":i.pathname,o;if(a==null)o=r;else{let p=t.length-1;if(!n&&a.startsWith("..")){let d=a.split("/");for(;d[0]==="..";)d.shift(),p-=1;i.pathname=d.join("/")}o=p>=0?t[p]:"/"}let c=cI(i,o),u=a&&a!=="/"&&a.endsWith("/"),l=(s||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||l)&&(c.pathname+="/"),c}var Ft=e=>e.join("/").replace(/\/\/+/g,"/"),pI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,hI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function vI(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var PS=["POST","PUT","PATCH","DELETE"];new Set(PS);var fI=["GET",...PS];new Set(fI);var Vn=w.createContext(null);Vn.displayName="DataRouter";var Rc=w.createContext(null);Rc.displayName="DataRouterState";var RS=w.createContext({isTransitioning:!1});RS.displayName="ViewTransition";var gI=w.createContext(new Map);gI.displayName="Fetchers";var mI=w.createContext(null);mI.displayName="Await";var At=w.createContext(null);At.displayName="Navigation";var zs=w.createContext(null);zs.displayName="Location";var Kt=w.createContext({outlet:null,matches:[],isDataRoute:!1});Kt.displayName="Route";var Od=w.createContext(null);Od.displayName="RouteError";function yI(e,{relative:t}={}){re(Ls(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=w.useContext(At),{hash:i,pathname:s,search:a}=js(e,{relative:t}),o=s;return r!=="/"&&(o=s==="/"?r:Ft([r,s])),n.createHref({pathname:o,search:a,hash:i})}function Ls(){return w.useContext(zs)!=null}function nn(){return re(Ls(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(zs).location}var ES="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wS(e){w.useContext(At).static||w.useLayoutEffect(e)}function SI(){let{isDataRoute:e}=w.useContext(Kt);return e?DI():CI()}function CI(){re(Ls(),"useNavigate() may be used only in the context of a <Router> component.");let e=w.useContext(Vn),{basename:t,navigator:r}=w.useContext(At),{matches:n}=w.useContext(Kt),{pathname:i}=nn(),s=JSON.stringify(SS(n)),a=w.useRef(!1);return wS(()=>{a.current=!0}),w.useCallback((c,u={})=>{if(_t(a.current,ES),!a.current)return;if(typeof c=="number"){r.go(c);return}let l=CS(c,JSON.parse(s),i,u.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:Ft([t,l.pathname])),(u.replace?r.replace:r.push)(l,u.state,u)},[t,r,s,i,e])}w.createContext(null);function js(e,{relative:t}={}){let{matches:r}=w.useContext(Kt),{pathname:n}=nn(),i=JSON.stringify(SS(r));return w.useMemo(()=>CS(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function PI(e,t){return IS(e,t)}function IS(e,t,r,n){re(Ls(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:s}=w.useContext(At),{matches:a}=w.useContext(Kt),o=a[a.length-1],c=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",p=o&&o.route;{let f=p&&p.path||"";TS(u,!p||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let d=nn(),h;if(t){let f=typeof t=="string"?Wn(t):t;re(l==="/"||f.pathname?.startsWith(l),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${f.pathname}" was given in the \`location\` prop.`),h=f}else h=d;let m=h.pathname||"/",y=m;if(l!=="/"){let f=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(f.length).join("/")}let S=!s&&r&&r.matches&&r.matches.length>0?r.matches:gS(e,{pathname:y});_t(p||S!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),_t(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let v=TI(S&&S.map(f=>Object.assign({},f,{params:Object.assign({},c,f.params),pathname:Ft([l,i.encodeLocation?i.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?l:Ft([l,i.encodeLocation?i.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),a,r,n);return t&&v?w.createElement(zs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...h},navigationType:"POP"}},v):v}function RI(){let e=OI(),t=vI(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},s={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:s},"ErrorBoundary")," or"," ",w.createElement("code",{style:s},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),r?w.createElement("pre",{style:i},r):null,a)}var EI=w.createElement(RI,null),wI=class extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?w.createElement(Kt.Provider,{value:this.props.routeContext},w.createElement(Od.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function II({routeContext:e,match:t,children:r}){let n=w.useContext(Vn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),w.createElement(Kt.Provider,{value:e},r)}function TI(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,s=r?.errors;if(s!=null){let c=i.findIndex(u=>u.route.id&&s?.[u.route.id]!==void 0);re(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,c+1))}let a=!1,o=-1;if(r)for(let c=0;c<i.length;c++){let u=i[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(o=c),u.route.id){let{loaderData:l,errors:p}=r,d=u.route.loader&&!l.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||d){a=!0,o>=0?i=i.slice(0,o+1):i=[i[0]];break}}}return i.reduceRight((c,u,l)=>{let p,d=!1,h=null,m=null;r&&(p=s&&u.route.id?s[u.route.id]:void 0,h=u.route.errorElement||EI,a&&(o<0&&l===0?(TS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,m=null):o===l&&(d=!0,m=u.route.hydrateFallbackElement||null)));let y=t.concat(i.slice(0,l+1)),S=()=>{let v;return p?v=h:d?v=m:u.route.Component?v=w.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=c,w.createElement(II,{match:u,routeContext:{outlet:c,matches:y,isDataRoute:r!=null},children:v})};return r&&(u.route.ErrorBoundary||u.route.errorElement||l===0)?w.createElement(wI,{location:r.location,revalidation:r.revalidation,component:h,error:p,children:S(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):S()},null)}function Dd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _I(e){let t=w.useContext(Vn);return re(t,Dd(e)),t}function AI(e){let t=w.useContext(Rc);return re(t,Dd(e)),t}function kI(e){let t=w.useContext(Kt);return re(t,Dd(e)),t}function bd(e){let t=kI(e),r=t.matches[t.matches.length-1];return re(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function MI(){return bd("useRouteId")}function OI(){let e=w.useContext(Od),t=AI("useRouteError"),r=bd("useRouteError");return e!==void 0?e:t.errors?.[r]}function DI(){let{router:e}=_I("useNavigate"),t=bd("useNavigate"),r=w.useRef(!1);return wS(()=>{r.current=!0}),w.useCallback(async(i,s={})=>{_t(r.current,ES),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Tv={};function TS(e,t,r){!t&&!Tv[e]&&(Tv[e]=!0,_t(!1,r))}w.memo(bI);function bI({routes:e,future:t,state:r}){return IS(e,void 0,r,t)}function _S(e){re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function NI({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:s=!1}){re(!Ls(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),o=w.useMemo(()=>({basename:a,navigator:i,static:s,future:{}}),[a,i,s]);typeof r=="string"&&(r=Wn(r));let{pathname:c="/",search:u="",hash:l="",state:p=null,key:d="default"}=r,h=w.useMemo(()=>{let m=yr(c,a);return m==null?null:{location:{pathname:m,search:u,hash:l,state:p,key:d},navigationType:n}},[a,c,u,l,p,d,n]);return _t(h!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${l}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:w.createElement(At.Provider,{value:o},w.createElement(zs.Provider,{children:t,value:h}))}function zI({children:e,location:t}){return PI(kp(e),t)}function kp(e,t=[]){let r=[];return w.Children.forEach(e,(n,i)=>{if(!w.isValidElement(n))return;let s=[...t,i];if(n.type===w.Fragment){r.push.apply(r,kp(n.props.children,s));return}re(n.type===_S,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),re(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=kp(n.props.children,s)),r.push(a)}),r}var ka="get",Ma="application/x-www-form-urlencoded";function Ec(e){return e!=null&&typeof e.tagName=="string"}function LI(e){return Ec(e)&&e.tagName.toLowerCase()==="button"}function jI(e){return Ec(e)&&e.tagName.toLowerCase()==="form"}function xI(e){return Ec(e)&&e.tagName.toLowerCase()==="input"}function BI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function FI(e,t){return e.button===0&&(!t||t==="_self")&&!BI(e)}var ha=null;function qI(){if(ha===null)try{new FormData(document.createElement("form"),0),ha=!1}catch{ha=!0}return ha}var UI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vl(e){return e!=null&&!UI.has(e)?(_t(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ma}"`),null):e}function $I(e,t){let r,n,i,s,a;if(jI(e)){let o=e.getAttribute("action");n=o?yr(o,t):null,r=e.getAttribute("method")||ka,i=vl(e.getAttribute("enctype"))||Ma,s=new FormData(e)}else if(LI(e)||xI(e)&&(e.type==="submit"||e.type==="image")){let o=e.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||o.getAttribute("action");if(n=c?yr(c,t):null,r=e.getAttribute("formmethod")||o.getAttribute("method")||ka,i=vl(e.getAttribute("formenctype"))||vl(o.getAttribute("enctype"))||Ma,s=new FormData(o,e),!qI()){let{name:u,type:l,value:p}=e;if(l==="image"){let d=u?`${u}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else u&&s.append(u,p)}}else{if(Ec(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ka,n=null,i=Ma,a=e}return s&&i==="text/plain"&&(a=s,s=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:s,body:a}}function Nd(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function WI(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function VI(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function HI(e,t,r){let n=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let a=await WI(s,r);return a.links?a.links():[]}return[]}));return QI(n.flat(1).filter(VI).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function _v(e,t,r,n,i,s){let a=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,o=(c,u)=>r[u].pathname!==c.pathname||r[u].route.path?.endsWith("*")&&r[u].params["*"]!==c.params["*"];return s==="assets"?t.filter((c,u)=>a(c,u)||o(c,u)):s==="data"?t.filter((c,u)=>{let l=n.routes[c.route.id];if(!l||!l.hasLoader)return!1;if(a(c,u)||o(c,u))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function KI(e,t,{includeHydrateFallback:r}={}){return JI(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function JI(e){return[...new Set(e)]}function GI(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function QI(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let s=JSON.stringify(GI(i));return r.has(s)||(r.add(s),n.push({key:s,link:i})),n},[])}function YI(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function XI(){let e=w.useContext(Vn);return Nd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function ZI(){let e=w.useContext(Rc);return Nd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var zd=w.createContext(void 0);zd.displayName="FrameworkContext";function AS(){let e=w.useContext(zd);return Nd(e,"You must render this element inside a <HydratedRouter> element"),e}function eT(e,t){let r=w.useContext(zd),[n,i]=w.useState(!1),[s,a]=w.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:u,onMouseLeave:l,onTouchStart:p}=t,d=w.useRef(null);w.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let y=v=>{v.forEach(f=>{a(f.isIntersecting)})},S=new IntersectionObserver(y,{threshold:.5});return d.current&&S.observe(d.current),()=>{S.disconnect()}}},[e]),w.useEffect(()=>{if(n){let y=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(y)}}},[n]);let h=()=>{i(!0)},m=()=>{i(!1),a(!1)};return r?e!=="intent"?[s,d,{}]:[s,d,{onFocus:ci(o,h),onBlur:ci(c,m),onMouseEnter:ci(u,h),onMouseLeave:ci(l,m),onTouchStart:ci(p,h)}]:[!1,d,{}]}function ci(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function tT({page:e,...t}){let{router:r}=XI(),n=w.useMemo(()=>gS(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?w.createElement(nT,{page:e,matches:n,...t}):null}function rT(e){let{manifest:t,routeModules:r}=AS(),[n,i]=w.useState([]);return w.useEffect(()=>{let s=!1;return HI(e,t,r).then(a=>{s||i(a)}),()=>{s=!0}},[e,t,r]),n}function nT({page:e,matches:t,...r}){let n=nn(),{manifest:i,routeModules:s}=AS(),{loaderData:a,matches:o}=ZI(),c=w.useMemo(()=>_v(e,t,o,i,n,"data"),[e,t,o,i,n]),u=w.useMemo(()=>_v(e,t,o,i,n,"assets"),[e,t,o,i,n]),l=w.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let h=new Set,m=!1;if(t.forEach(S=>{let v=i.routes[S.route.id];!v||!v.hasLoader||(!c.some(f=>f.route.id===S.route.id)&&S.route.id in a&&s[S.route.id]?.shouldRevalidate||v.hasClientLoader?m=!0:h.add(S.route.id))}),h.size===0)return[];let y=YI(e);return m&&h.size>0&&y.searchParams.set("_routes",t.filter(S=>h.has(S.route.id)).map(S=>S.route.id).join(",")),[y.pathname+y.search]},[a,n,i,c,t,e,s]),p=w.useMemo(()=>KI(u,i),[u,i]),d=rT(u);return w.createElement(w.Fragment,null,l.map(h=>w.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...r})),p.map(h=>w.createElement("link",{key:h,rel:"modulepreload",href:h,...r})),d.map(({key:h,link:m})=>w.createElement("link",{key:h,...m})))}function iT(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kS&&(window.__reactRouterVersion="7.2.0")}catch{}function oT({basename:e,children:t,window:r}){let n=w.useRef();n.current==null&&(n.current=Hw({window:r,v5Compat:!0}));let i=n.current,[s,a]=w.useState({action:i.action,location:i.location}),o=w.useCallback(c=>{w.startTransition(()=>a(c))},[a]);return w.useLayoutEffect(()=>i.listen(o),[i,o]),w.createElement(NI,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var MS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OS=w.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:s,replace:a,state:o,target:c,to:u,preventScrollReset:l,viewTransition:p,...d},h){let{basename:m}=w.useContext(At),y=typeof u=="string"&&MS.test(u),S,v=!1;if(typeof u=="string"&&y&&(S=u,kS))try{let D=new URL(window.location.href),A=u.startsWith("//")?new URL(D.protocol+u):new URL(u),K=yr(A.pathname,m);A.origin===D.origin&&K!=null?u=K+A.search+A.hash:v=!0}catch{_t(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let f=yI(u,{relative:i}),[g,C,P]=eT(n,d),E=uT(u,{replace:a,state:o,target:c,preventScrollReset:l,relative:i,viewTransition:p});function I(D){t&&t(D),D.defaultPrevented||E(D)}let R=w.createElement("a",{...d,...P,href:S||f,onClick:v||s?t:I,ref:iT(h,C),target:c,"data-discover":!y&&r==="render"?"true":void 0});return g&&!y?w.createElement(w.Fragment,null,R,w.createElement(tT,{page:f})):R});OS.displayName="Link";var sT=w.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:s,to:a,viewTransition:o,children:c,...u},l){let p=js(a,{relative:u.relative}),d=nn(),h=w.useContext(Rc),{navigator:m,basename:y}=w.useContext(At),S=h!=null&&vT(p)&&o===!0,v=m.encodeLocation?m.encodeLocation(p).pathname:p.pathname,f=d.pathname,g=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;r||(f=f.toLowerCase(),g=g?g.toLowerCase():null,v=v.toLowerCase()),g&&y&&(g=yr(g,y)||g);const C=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let P=f===v||!i&&f.startsWith(v)&&f.charAt(C)==="/",E=g!=null&&(g===v||!i&&g.startsWith(v)&&g.charAt(v.length)==="/"),I={isActive:P,isPending:E,isTransitioning:S},R=P?t:void 0,D;typeof n=="function"?D=n(I):D=[n,P?"active":null,E?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let A=typeof s=="function"?s(I):s;return w.createElement(OS,{...u,"aria-current":R,className:D,ref:l,style:A,to:a,viewTransition:o},typeof c=="function"?c(I):c)});sT.displayName="NavLink";var aT=w.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:s,method:a=ka,action:o,onSubmit:c,relative:u,preventScrollReset:l,viewTransition:p,...d},h)=>{let m=dT(),y=hT(o,{relative:u}),S=a.toLowerCase()==="get"?"get":"post",v=typeof o=="string"&&MS.test(o),f=g=>{if(c&&c(g),g.defaultPrevented)return;g.preventDefault();let C=g.nativeEvent.submitter,P=C?.getAttribute("formmethod")||a;m(C||g.currentTarget,{fetcherKey:t,method:P,navigate:r,replace:i,state:s,relative:u,preventScrollReset:l,viewTransition:p})};return w.createElement("form",{ref:h,method:S,action:y,onSubmit:n?c:f,...d,"data-discover":!v&&e==="render"?"true":void 0})});aT.displayName="Form";function cT(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DS(e){let t=w.useContext(Vn);return re(t,cT(e)),t}function uT(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:s,viewTransition:a}={}){let o=SI(),c=nn(),u=js(e,{relative:s});return w.useCallback(l=>{if(FI(l,t)){l.preventDefault();let p=r!==void 0?r:Ts(c)===Ts(u);o(e,{replace:p,state:n,preventScrollReset:i,relative:s,viewTransition:a})}},[c,o,u,r,n,t,e,i,s,a])}var lT=0,pT=()=>`__${String(++lT)}__`;function dT(){let{router:e}=DS("useSubmit"),{basename:t}=w.useContext(At),r=MI();return w.useCallback(async(n,i={})=>{let{action:s,method:a,encType:o,formData:c,body:u}=$I(n,t);if(i.navigate===!1){let l=i.fetcherKey||pT();await e.fetch(l,r,i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||a,formEncType:i.encType||o,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:c,body:u,formMethod:i.method||a,formEncType:i.encType||o,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function hT(e,{relative:t}={}){let{basename:r}=w.useContext(At),n=w.useContext(Kt);re(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),s={...js(e||".",{relative:t})},a=nn();if(e==null){s.search=a.search;let o=new URLSearchParams(s.search),c=o.getAll("index");if(c.some(l=>l==="")){o.delete("index"),c.filter(p=>p).forEach(p=>o.append("index",p));let l=o.toString();s.search=l?`?${l}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(s.pathname=s.pathname==="/"?r:Ft([r,s.pathname])),Ts(s)}function vT(e,t={}){let r=w.useContext(RS);re(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=DS("useViewTransitionState"),i=js(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=yr(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=yr(r.nextLocation.pathname,n)||r.nextLocation.pathname;return nc(i.pathname,a)!=null||nc(i.pathname,s)!=null}new TextEncoder;var Se={},fl={},wc={},gl={},ie={},Hn={},lt={},bS={},Ic={},Tc={};Object.defineProperty(Tc,"__esModule",{value:!0});Tc.default=gT;let va;const fT=new Uint8Array(16);function gT(){if(!va&&(va=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!va))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return va(fT)}var wr={},on={},_c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.default=void 0;var mT=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;_c.default=mT;Object.defineProperty(on,"__esModule",{value:!0});on.default=void 0;var yT=ST(_c);function ST(e){return e&&e.__esModule?e:{default:e}}function CT(e){return typeof e=="string"&&yT.default.test(e)}var PT=CT;on.default=PT;Object.defineProperty(wr,"__esModule",{value:!0});wr.default=void 0;wr.unsafeStringify=NS;var RT=ET(on);function ET(e){return e&&e.__esModule?e:{default:e}}const me=[];for(let e=0;e<256;++e)me.push((e+256).toString(16).slice(1));function NS(e,t=0){return me[e[t+0]]+me[e[t+1]]+me[e[t+2]]+me[e[t+3]]+"-"+me[e[t+4]]+me[e[t+5]]+"-"+me[e[t+6]]+me[e[t+7]]+"-"+me[e[t+8]]+me[e[t+9]]+"-"+me[e[t+10]]+me[e[t+11]]+me[e[t+12]]+me[e[t+13]]+me[e[t+14]]+me[e[t+15]]}function wT(e,t=0){const r=NS(e,t);if(!(0,RT.default)(r))throw TypeError("Stringified UUID is invalid");return r}var IT=wT;wr.default=IT;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.default=void 0;var TT=AT(Tc),_T=wr;function AT(e){return e&&e.__esModule?e:{default:e}}let Av,ml,yl=0,Sl=0;function kT(e,t,r){let n=t&&r||0;const i=t||new Array(16);e=e||{};let s=e.node||Av,a=e.clockseq!==void 0?e.clockseq:ml;if(s==null||a==null){const d=e.random||(e.rng||TT.default)();s==null&&(s=Av=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),a==null&&(a=ml=(d[6]<<8|d[7])&16383)}let o=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Sl+1;const u=o-yl+(c-Sl)/1e4;if(u<0&&e.clockseq===void 0&&(a=a+1&16383),(u<0||o>yl)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");yl=o,Sl=c,ml=a,o+=122192928e5;const l=((o&268435455)*1e4+c)%4294967296;i[n++]=l>>>24&255,i[n++]=l>>>16&255,i[n++]=l>>>8&255,i[n++]=l&255;const p=o/4294967296*1e4&268435455;i[n++]=p>>>8&255,i[n++]=p&255,i[n++]=p>>>24&15|16,i[n++]=p>>>16&255,i[n++]=a>>>8|128,i[n++]=a&255;for(let d=0;d<6;++d)i[n+d]=s[d];return t||(0,_T.unsafeStringify)(i)}var MT=kT;Ic.default=MT;var Ac={},Sr={},xs={};Object.defineProperty(xs,"__esModule",{value:!0});xs.default=void 0;var OT=DT(on);function DT(e){return e&&e.__esModule?e:{default:e}}function bT(e){if(!(0,OT.default)(e))throw TypeError("Invalid UUID");let t;const r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var NT=bT;xs.default=NT;Object.defineProperty(Sr,"__esModule",{value:!0});Sr.URL=Sr.DNS=void 0;Sr.default=BT;var zT=wr,LT=jT(xs);function jT(e){return e&&e.__esModule?e:{default:e}}function xT(e){e=unescape(encodeURIComponent(e));const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}const zS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Sr.DNS=zS;const LS="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Sr.URL=LS;function BT(e,t,r){function n(i,s,a,o){var c;if(typeof i=="string"&&(i=xT(i)),typeof s=="string"&&(s=(0,LT.default)(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+i.length);if(u.set(s),u.set(i,s.length),u=r(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,a){o=o||0;for(let l=0;l<16;++l)a[o+l]=u[l];return a}return(0,zT.unsafeStringify)(u)}try{n.name=e}catch{}return n.DNS=zS,n.URL=LS,n}var kc={};Object.defineProperty(kc,"__esModule",{value:!0});kc.default=void 0;function FT(e){if(typeof e=="string"){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return qT(UT($T(e),e.length*8))}function qT(e){const t=[],r=e.length*32,n="0123456789abcdef";for(let i=0;i<r;i+=8){const s=e[i>>5]>>>i%32&255,a=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);t.push(a)}return t}function jS(e){return(e+64>>>9<<4)+14+1}function UT(e,t){e[t>>5]|=128<<t%32,e[jS(t)-1]=t;let r=1732584193,n=-271733879,i=-1732584194,s=271733878;for(let a=0;a<e.length;a+=16){const o=r,c=n,u=i,l=s;r=Ae(r,n,i,s,e[a],7,-680876936),s=Ae(s,r,n,i,e[a+1],12,-389564586),i=Ae(i,s,r,n,e[a+2],17,606105819),n=Ae(n,i,s,r,e[a+3],22,-1044525330),r=Ae(r,n,i,s,e[a+4],7,-176418897),s=Ae(s,r,n,i,e[a+5],12,1200080426),i=Ae(i,s,r,n,e[a+6],17,-1473231341),n=Ae(n,i,s,r,e[a+7],22,-45705983),r=Ae(r,n,i,s,e[a+8],7,1770035416),s=Ae(s,r,n,i,e[a+9],12,-1958414417),i=Ae(i,s,r,n,e[a+10],17,-42063),n=Ae(n,i,s,r,e[a+11],22,-1990404162),r=Ae(r,n,i,s,e[a+12],7,1804603682),s=Ae(s,r,n,i,e[a+13],12,-40341101),i=Ae(i,s,r,n,e[a+14],17,-1502002290),n=Ae(n,i,s,r,e[a+15],22,1236535329),r=ke(r,n,i,s,e[a+1],5,-165796510),s=ke(s,r,n,i,e[a+6],9,-1069501632),i=ke(i,s,r,n,e[a+11],14,643717713),n=ke(n,i,s,r,e[a],20,-373897302),r=ke(r,n,i,s,e[a+5],5,-701558691),s=ke(s,r,n,i,e[a+10],9,38016083),i=ke(i,s,r,n,e[a+15],14,-660478335),n=ke(n,i,s,r,e[a+4],20,-405537848),r=ke(r,n,i,s,e[a+9],5,568446438),s=ke(s,r,n,i,e[a+14],9,-1019803690),i=ke(i,s,r,n,e[a+3],14,-187363961),n=ke(n,i,s,r,e[a+8],20,1163531501),r=ke(r,n,i,s,e[a+13],5,-1444681467),s=ke(s,r,n,i,e[a+2],9,-51403784),i=ke(i,s,r,n,e[a+7],14,1735328473),n=ke(n,i,s,r,e[a+12],20,-1926607734),r=Me(r,n,i,s,e[a+5],4,-378558),s=Me(s,r,n,i,e[a+8],11,-2022574463),i=Me(i,s,r,n,e[a+11],16,1839030562),n=Me(n,i,s,r,e[a+14],23,-35309556),r=Me(r,n,i,s,e[a+1],4,-1530992060),s=Me(s,r,n,i,e[a+4],11,1272893353),i=Me(i,s,r,n,e[a+7],16,-155497632),n=Me(n,i,s,r,e[a+10],23,-1094730640),r=Me(r,n,i,s,e[a+13],4,681279174),s=Me(s,r,n,i,e[a],11,-358537222),i=Me(i,s,r,n,e[a+3],16,-722521979),n=Me(n,i,s,r,e[a+6],23,76029189),r=Me(r,n,i,s,e[a+9],4,-640364487),s=Me(s,r,n,i,e[a+12],11,-421815835),i=Me(i,s,r,n,e[a+15],16,530742520),n=Me(n,i,s,r,e[a+2],23,-995338651),r=Oe(r,n,i,s,e[a],6,-198630844),s=Oe(s,r,n,i,e[a+7],10,1126891415),i=Oe(i,s,r,n,e[a+14],15,-1416354905),n=Oe(n,i,s,r,e[a+5],21,-57434055),r=Oe(r,n,i,s,e[a+12],6,1700485571),s=Oe(s,r,n,i,e[a+3],10,-1894986606),i=Oe(i,s,r,n,e[a+10],15,-1051523),n=Oe(n,i,s,r,e[a+1],21,-2054922799),r=Oe(r,n,i,s,e[a+8],6,1873313359),s=Oe(s,r,n,i,e[a+15],10,-30611744),i=Oe(i,s,r,n,e[a+6],15,-1560198380),n=Oe(n,i,s,r,e[a+13],21,1309151649),r=Oe(r,n,i,s,e[a+4],6,-145523070),s=Oe(s,r,n,i,e[a+11],10,-1120210379),i=Oe(i,s,r,n,e[a+2],15,718787259),n=Oe(n,i,s,r,e[a+9],21,-343485551),r=sr(r,o),n=sr(n,c),i=sr(i,u),s=sr(s,l)}return[r,n,i,s]}function $T(e){if(e.length===0)return[];const t=e.length*8,r=new Uint32Array(jS(t));for(let n=0;n<t;n+=8)r[n>>5]|=(e[n/8]&255)<<n%32;return r}function sr(e,t){const r=(e&65535)+(t&65535);return(e>>16)+(t>>16)+(r>>16)<<16|r&65535}function WT(e,t){return e<<t|e>>>32-t}function Mc(e,t,r,n,i,s){return sr(WT(sr(sr(t,e),sr(n,s)),i),r)}function Ae(e,t,r,n,i,s,a){return Mc(t&r|~t&n,e,t,i,s,a)}function ke(e,t,r,n,i,s,a){return Mc(t&n|r&~n,e,t,i,s,a)}function Me(e,t,r,n,i,s,a){return Mc(t^r^n,e,t,i,s,a)}function Oe(e,t,r,n,i,s,a){return Mc(r^(t|~n),e,t,i,s,a)}var VT=FT;kc.default=VT;Object.defineProperty(Ac,"__esModule",{value:!0});Ac.default=void 0;var HT=xS(Sr),KT=xS(kc);function xS(e){return e&&e.__esModule?e:{default:e}}const JT=(0,HT.default)("v3",48,KT.default);var GT=JT;Ac.default=GT;var Oc={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.default=void 0;const QT=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var YT={randomUUID:QT};Dc.default=YT;Object.defineProperty(Oc,"__esModule",{value:!0});Oc.default=void 0;var kv=BS(Dc),XT=BS(Tc),ZT=wr;function BS(e){return e&&e.__esModule?e:{default:e}}function e_(e,t,r){if(kv.default.randomUUID&&!t&&!e)return kv.default.randomUUID();e=e||{};const n=e.random||(e.rng||XT.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let i=0;i<16;++i)t[r+i]=n[i];return t}return(0,ZT.unsafeStringify)(n)}var t_=e_;Oc.default=t_;var bc={},Nc={};Object.defineProperty(Nc,"__esModule",{value:!0});Nc.default=void 0;function r_(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function Cl(e,t){return e<<t|e>>>32-t}function n_(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=[];for(let o=0;o<a.length;++o)e.push(a.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const n=e.length/4+2,i=Math.ceil(n/16),s=new Array(i);for(let a=0;a<i;++a){const o=new Uint32Array(16);for(let c=0;c<16;++c)o[c]=e[a*64+c*4]<<24|e[a*64+c*4+1]<<16|e[a*64+c*4+2]<<8|e[a*64+c*4+3];s[a]=o}s[i-1][14]=(e.length-1)*8/Math.pow(2,32),s[i-1][14]=Math.floor(s[i-1][14]),s[i-1][15]=(e.length-1)*8&4294967295;for(let a=0;a<i;++a){const o=new Uint32Array(80);for(let h=0;h<16;++h)o[h]=s[a][h];for(let h=16;h<80;++h)o[h]=Cl(o[h-3]^o[h-8]^o[h-14]^o[h-16],1);let c=r[0],u=r[1],l=r[2],p=r[3],d=r[4];for(let h=0;h<80;++h){const m=Math.floor(h/20),y=Cl(c,5)+r_(m,u,l,p)+d+t[m]+o[h]>>>0;d=p,p=l,l=Cl(u,30)>>>0,u=c,c=y}r[0]=r[0]+c>>>0,r[1]=r[1]+u>>>0,r[2]=r[2]+l>>>0,r[3]=r[3]+p>>>0,r[4]=r[4]+d>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var i_=n_;Nc.default=i_;Object.defineProperty(bc,"__esModule",{value:!0});bc.default=void 0;var o_=FS(Sr),s_=FS(Nc);function FS(e){return e&&e.__esModule?e:{default:e}}const a_=(0,o_.default)("v5",80,s_.default);var c_=a_;bc.default=c_;var zc={};Object.defineProperty(zc,"__esModule",{value:!0});zc.default=void 0;var u_="00000000-0000-0000-0000-000000000000";zc.default=u_;var Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.default=void 0;var l_=p_(on);function p_(e){return e&&e.__esModule?e:{default:e}}function d_(e){if(!(0,l_.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var h_=d_;Lc.default=h_;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return a.default}});var t=l(Ic),r=l(Ac),n=l(Oc),i=l(bc),s=l(zc),a=l(Lc),o=l(on),c=l(wr),u=l(xs);function l(p){return p&&p.__esModule?p:{default:p}}})(bS);Object.defineProperty(lt,"__esModule",{value:!0});lt.createNoDashGuid=lt.createGuid=void 0;const v_=bS,qS=()=>(0,v_.v4)();lt.createGuid=qS;const f_=()=>qS().replace(new RegExp("-","g"),"").toUpperCase();lt.createNoDashGuid=f_;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PlatformEvent=e.EventType=void 0;const t=lt;(function(n){n[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error",n[n.None=4]="None"})(e.EventType||(e.EventType={}));class r{constructor(i,s){this.privName=i,this.privEventId=(0,t.createNoDashGuid)(),this.privEventTime=new Date().toISOString(),this.privEventType=s,this.privMetadata={}}get name(){return this.privName}get eventId(){return this.privEventId}get eventTime(){return this.privEventTime}get eventType(){return this.privEventType}get metadata(){return this.privMetadata}}e.PlatformEvent=r})(Hn);Object.defineProperty(ie,"__esModule",{value:!0});ie.AudioStreamNodeErrorEvent=ie.AudioStreamNodeDetachedEvent=ie.AudioStreamNodeAttachedEvent=ie.AudioStreamNodeAttachingEvent=ie.AudioStreamNodeEvent=ie.AudioSourceErrorEvent=ie.AudioSourceOffEvent=ie.AudioSourceReadyEvent=ie.AudioSourceInitializingEvent=ie.AudioSourceEvent=void 0;const Mp=Hn;class Kn extends Mp.PlatformEvent{constructor(t,r,n=Mp.EventType.Info){super(t,n),this.privAudioSourceId=r}get audioSourceId(){return this.privAudioSourceId}}ie.AudioSourceEvent=Kn;class g_ extends Kn{constructor(t){super("AudioSourceInitializingEvent",t)}}ie.AudioSourceInitializingEvent=g_;class m_ extends Kn{constructor(t){super("AudioSourceReadyEvent",t)}}ie.AudioSourceReadyEvent=m_;class y_ extends Kn{constructor(t){super("AudioSourceOffEvent",t)}}ie.AudioSourceOffEvent=y_;class S_ extends Kn{constructor(t,r){super("AudioSourceErrorEvent",t,Mp.EventType.Error),this.privError=r}get error(){return this.privError}}ie.AudioSourceErrorEvent=S_;class Bs extends Kn{constructor(t,r,n){super(t,r),this.privAudioNodeId=n}get audioNodeId(){return this.privAudioNodeId}}ie.AudioStreamNodeEvent=Bs;class C_ extends Bs{constructor(t,r){super("AudioStreamNodeAttachingEvent",t,r)}}ie.AudioStreamNodeAttachingEvent=C_;class P_ extends Bs{constructor(t,r){super("AudioStreamNodeAttachedEvent",t,r)}}ie.AudioStreamNodeAttachedEvent=P_;class R_ extends Bs{constructor(t,r){super("AudioStreamNodeDetachedEvent",t,r)}}ie.AudioStreamNodeDetachedEvent=R_;class E_ extends Bs{constructor(t,r,n){super("AudioStreamNodeErrorEvent",t,r),this.privError=n}get error(){return this.privError}}ie.AudioStreamNodeErrorEvent=E_;var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.ConnectionRedirectEvent=oe.ConnectionMessageSentEvent=oe.ConnectionMessageReceivedEvent=oe.ConnectionEstablishErrorEvent=oe.ConnectionErrorEvent=oe.ConnectionClosedEvent=oe.ConnectionEstablishedEvent=oe.ConnectionStartEvent=oe.ConnectionEvent=oe.ServiceEvent=void 0;const Cr=Hn;class w_ extends Cr.PlatformEvent{constructor(t,r,n=Cr.EventType.Info){super(t,n),this.privJsonResult=r}get jsonString(){return this.privJsonResult}}oe.ServiceEvent=w_;class Jt extends Cr.PlatformEvent{constructor(t,r,n=Cr.EventType.Info){super(t,n),this.privConnectionId=r}get connectionId(){return this.privConnectionId}}oe.ConnectionEvent=Jt;class I_ extends Jt{constructor(t,r,n){super("ConnectionStartEvent",t),this.privUri=r,this.privHeaders=n}get uri(){return this.privUri}get headers(){return this.privHeaders}}oe.ConnectionStartEvent=I_;class T_ extends Jt{constructor(t){super("ConnectionEstablishedEvent",t)}}oe.ConnectionEstablishedEvent=T_;class __ extends Jt{constructor(t,r,n){super("ConnectionClosedEvent",t,Cr.EventType.Debug),this.privReason=n,this.privStatusCode=r}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}oe.ConnectionClosedEvent=__;class A_ extends Jt{constructor(t,r,n){super("ConnectionErrorEvent",t,Cr.EventType.Debug),this.privMessage=r,this.privType=n}get message(){return this.privMessage}get type(){return this.privType}}oe.ConnectionErrorEvent=A_;class k_ extends Jt{constructor(t,r,n){super("ConnectionEstablishErrorEvent",t,Cr.EventType.Error),this.privStatusCode=r,this.privReason=n}get reason(){return this.privReason}get statusCode(){return this.privStatusCode}}oe.ConnectionEstablishErrorEvent=k_;class M_ extends Jt{constructor(t,r,n){super("ConnectionMessageReceivedEvent",t),this.privNetworkReceivedTime=r,this.privMessage=n}get networkReceivedTime(){return this.privNetworkReceivedTime}get message(){return this.privMessage}}oe.ConnectionMessageReceivedEvent=M_;class O_ extends Jt{constructor(t,r,n){super("ConnectionMessageSentEvent",t),this.privNetworkSentTime=r,this.privMessage=n}get networkSentTime(){return this.privNetworkSentTime}get message(){return this.privMessage}}oe.ConnectionMessageSentEvent=O_;class D_ extends Jt{constructor(t,r,n,i){super("ConnectionRedirectEvent",t,Cr.EventType.Info),this.privRedirectUrl=r,this.privOriginalUrl=n,this.privContext=i}get redirectUrl(){return this.privRedirectUrl}get originalUrl(){return this.privOriginalUrl}get context(){return this.privContext}}oe.ConnectionRedirectEvent=D_;var Ld={},Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.ObjectDisposedError=Re.InvalidOperationError=Re.ArgumentNullError=void 0;class b_ extends Error{constructor(t){super(t),this.name="ArgumentNull",this.message=t}}Re.ArgumentNullError=b_;class N_ extends Error{constructor(t){super(t),this.name="InvalidOperation",this.message=t}}Re.InvalidOperationError=N_;class z_ extends Error{constructor(t,r){super(r),this.name=t+"ObjectDisposed",this.message=r}}Re.ObjectDisposedError=z_;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionMessage=e.MessageType=void 0;const t=Re,r=lt;var n;(function(s){s[s.Text=0]="Text",s[s.Binary=1]="Binary"})(n=e.MessageType||(e.MessageType={}));class i{constructor(a,o,c,u){if(this.privBody=null,a===n.Text&&o&&typeof o!="string")throw new t.InvalidOperationError("Payload must be a string");if(a===n.Binary&&o&&!(o instanceof ArrayBuffer))throw new t.InvalidOperationError("Payload must be ArrayBuffer");switch(this.privMessageType=a,this.privBody=o,this.privHeaders=c||{},this.privId=u||(0,r.createNoDashGuid)(),this.messageType){case n.Binary:this.privSize=this.binaryBody!==null?this.binaryBody.byteLength:0;break;case n.Text:this.privSize=this.textBody.length}}get messageType(){return this.privMessageType}get headers(){return this.privHeaders}get body(){return this.privBody}get textBody(){if(this.privMessageType===n.Binary)throw new t.InvalidOperationError("Not supported for binary message");return this.privBody}get binaryBody(){if(this.privMessageType===n.Text)throw new t.InvalidOperationError("Not supported for text message");return this.privBody}get id(){return this.privId}}e.ConnectionMessage=i})(Ld);var jc={};Object.defineProperty(jc,"__esModule",{value:!0});jc.ConnectionOpenResponse=void 0;class L_{constructor(t,r){this.privStatusCode=t,this.privReason=r}get statusCode(){return this.privStatusCode}get reason(){return this.privReason}}jc.ConnectionOpenResponse=L_;var xc={};Object.defineProperty(xc,"__esModule",{value:!0});xc.DeferralMap=void 0;class j_{constructor(){this.privMap={}}add(t,r){this.privMap[t]=r}getId(t){return this.privMap[t]}complete(t,r){try{this.privMap[t].resolve(r)}catch(n){this.privMap[t].reject(n)}finally{this.privMap[t]=void 0}}}xc.DeferralMap=j_;var en={};Object.defineProperty(en,"__esModule",{value:!0});en.SendingAgentContextMessageEvent=en.DialogEvent=void 0;const Mv=Hn;class US extends Mv.PlatformEvent{constructor(t,r=Mv.EventType.Info){super(t,r)}}en.DialogEvent=US;class x_ extends US{constructor(t){super("SendingAgentContextMessageEvent"),this.privAgentConfig=t}get agentConfig(){return this.privAgentConfig}}en.SendingAgentContextMessageEvent=x_;var Bc={},Fs={};Object.defineProperty(Fs,"__esModule",{value:!0});Fs.EventSource=void 0;const B_=Re,F_=lt;class q_{constructor(t){this.privEventListeners={},this.privIsDisposed=!1,this.privConsoleListener=void 0,this.privMetadata=t}onEvent(t){if(this.isDisposed())throw new B_.ObjectDisposedError("EventSource");if(this.metadata)for(const r in this.metadata)r&&t.metadata&&(t.metadata[r]||(t.metadata[r]=this.metadata[r]));for(const r in this.privEventListeners)r&&this.privEventListeners[r]&&this.privEventListeners[r](t)}attach(t){const r=(0,F_.createNoDashGuid)();return this.privEventListeners[r]=t,{detach:()=>(delete this.privEventListeners[r],Promise.resolve())}}attachListener(t){return this.attach(r=>t.onEvent(r))}attachConsoleListener(t){return this.privConsoleListener&&this.privConsoleListener.detach(),this.privConsoleListener=this.attach(r=>t.onEvent(r)),this.privConsoleListener}isDisposed(){return this.privIsDisposed}dispose(){this.privEventListeners=null,this.privIsDisposed=!0}get metadata(){return this.privMetadata}}Fs.EventSource=q_;Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Events=void 0;const U_=Re,$_=Fs;class _s{static setEventSource(t){if(!t)throw new U_.ArgumentNullError("eventSource");_s.privInstance=t}static get instance(){return _s.privInstance}}Bc.Events=_s;_s.privInstance=new $_.EventSource;var $S={};Object.defineProperty($S,"__esModule",{value:!0});var WS={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionState=void 0,function(t){t[t.None=0]="None",t[t.Connected=1]="Connected",t[t.Connecting=2]="Connecting",t[t.Disconnected=3]="Disconnected"}(e.ConnectionState||(e.ConnectionState={}))})(WS);var VS={};Object.defineProperty(VS,"__esModule",{value:!0});var HS={};Object.defineProperty(HS,"__esModule",{value:!0});var KS={};Object.defineProperty(KS,"__esModule",{value:!0});var JS={};Object.defineProperty(JS,"__esModule",{value:!0});var GS={};Object.defineProperty(GS,"__esModule",{value:!0});var QS={};Object.defineProperty(QS,"__esModule",{value:!0});var YS={};Object.defineProperty(YS,"__esModule",{value:!0});var XS={};Object.defineProperty(XS,"__esModule",{value:!0});var qs={};Object.defineProperty(qs,"__esModule",{value:!0});qs.List=void 0;const W_=Re;class er{constructor(t){if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.privList=[],t)for(const r of t)this.privList.push(r)}get(t){return this.throwIfDisposed(),this.privList[t]}first(){return this.get(0)}last(){return this.get(this.length()-1)}add(t){this.throwIfDisposed(),this.insertAt(this.privList.length,t)}insertAt(t,r){this.throwIfDisposed(),t===0?this.privList.unshift(r):t===this.privList.length?this.privList.push(r):this.privList.splice(t,0,r),this.triggerSubscriptions(this.privAddSubscriptions)}removeFirst(){return this.throwIfDisposed(),this.removeAt(0)}removeLast(){return this.throwIfDisposed(),this.removeAt(this.length()-1)}removeAt(t){return this.throwIfDisposed(),this.remove(t,1)[0]}remove(t,r){this.throwIfDisposed();const n=this.privList.splice(t,r);return this.triggerSubscriptions(this.privRemoveSubscriptions),n}clear(){this.throwIfDisposed(),this.remove(0,this.length())}length(){return this.throwIfDisposed(),this.privList.length}onAdded(t){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privAddSubscriptions[r]=t,{detach:()=>(delete this.privAddSubscriptions[r],Promise.resolve())}}onRemoved(t){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privRemoveSubscriptions[r]=t,{detach:()=>(delete this.privRemoveSubscriptions[r],Promise.resolve())}}onDisposed(t){this.throwIfDisposed();const r=this.privSubscriptionIdCounter++;return this.privDisposedSubscriptions[r]=t,{detach:()=>(delete this.privDisposedSubscriptions[r],Promise.resolve())}}join(t){return this.throwIfDisposed(),this.privList.join(t)}toArray(){const t=Array();return this.privList.forEach(r=>{t.push(r)}),t}any(t){return this.throwIfDisposed(),t?this.where(t).length()>0:this.length()>0}all(t){return this.throwIfDisposed(),this.where(t).length()===this.length()}forEach(t){this.throwIfDisposed();for(let r=0;r<this.length();r++)t(this.privList[r],r)}select(t){this.throwIfDisposed();const r=[];for(let n=0;n<this.privList.length;n++)r.push(t(this.privList[n],n));return new er(r)}where(t){this.throwIfDisposed();const r=new er;for(let n=0;n<this.privList.length;n++)t(this.privList[n],n)&&r.add(this.privList[n]);return r}orderBy(t){this.throwIfDisposed();const n=this.toArray().sort(t);return new er(n)}orderByDesc(t){return this.throwIfDisposed(),this.orderBy((r,n)=>t(n,r))}clone(){return this.throwIfDisposed(),new er(this.toArray())}concat(t){return this.throwIfDisposed(),new er(this.privList.concat(t.toArray()))}concatArray(t){return this.throwIfDisposed(),new er(this.privList.concat(t))}isDisposed(){return this.privList==null}dispose(t){this.isDisposed()||(this.privDisposeReason=t,this.privList=null,this.privAddSubscriptions=null,this.privRemoveSubscriptions=null,this.triggerSubscriptions(this.privDisposedSubscriptions))}throwIfDisposed(){if(this.isDisposed())throw new W_.ObjectDisposedError("List",this.privDisposeReason)}triggerSubscriptions(t){if(t)for(const r in t)r&&t[r]()}}qs.List=er;var jd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.marshalPromiseToCallbacks=e.Sink=e.Deferred=e.PromiseResultEventSource=e.PromiseResult=e.PromiseState=void 0;var t;(function(o){o[o.None=0]="None",o[o.Resolved=1]="Resolved",o[o.Rejected=2]="Rejected"})(t=e.PromiseState||(e.PromiseState={}));class r{constructor(c){this.throwIfError=()=>{if(this.isError)throw this.error},c.on(u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!1,this.privResult=u)},u=>{this.privIsCompleted||(this.privIsCompleted=!0,this.privIsError=!0,this.privError=u)})}get isCompleted(){return this.privIsCompleted}get isError(){return this.privIsError}get error(){return this.privError}get result(){return this.privResult}}e.PromiseResult=r;class n{constructor(){this.setResult=c=>{this.privOnSetResult(c)},this.setError=c=>{this.privOnSetError(c)},this.on=(c,u)=>{this.privOnSetResult=c,this.privOnSetError=u}}}e.PromiseResultEventSource=n;class i{constructor(){this.resolve=c=>(this.privResolve(c),this),this.reject=c=>(this.privReject(c),this),this.privPromise=new Promise((c,u)=>{this.privResolve=c,this.privReject=u})}get promise(){return this.privPromise}}e.Deferred=i;class s{constructor(){this.privState=t.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.privPromiseResultEvents=new n,this.privPromiseResult=new r(this.privPromiseResultEvents)}get state(){return this.privState}get result(){return this.privPromiseResult}resolve(c){if(this.privState!==t.None)throw new Error("'Cannot resolve a completed promise'");this.privState=t.Resolved,this.privPromiseResultEvents.setResult(c);for(let u=0;u<this.privSuccessHandlers.length;u++)this.executeSuccessCallback(c,this.privSuccessHandlers[u],this.privErrorHandlers[u]);this.detachHandlers()}reject(c){if(this.privState!==t.None)throw new Error("'Cannot reject a completed promise'");this.privState=t.Rejected,this.privPromiseResultEvents.setError(c);for(const u of this.privErrorHandlers)this.executeErrorCallback(c,u);this.detachHandlers()}on(c,u){c==null&&(c=()=>{}),this.privState===t.None?(this.privSuccessHandlers.push(c),this.privErrorHandlers.push(u)):(this.privState===t.Resolved?this.executeSuccessCallback(this.privPromiseResult.result,c,u):this.privState===t.Rejected&&this.executeErrorCallback(this.privPromiseResult.error,u),this.detachHandlers())}executeSuccessCallback(c,u,l){try{u(c)}catch(p){this.executeErrorCallback(`'Unhandled callback error: ${p}'`,l)}}executeErrorCallback(c,u){if(u)try{u(c)}catch(l){throw new Error(`'Unhandled callback error: ${l}. InnerError: ${c}'`)}else throw new Error(`'Unhandled error: ${c}'`)}detachHandlers(){this.privErrorHandlers=[],this.privSuccessHandlers=[]}}e.Sink=s;function a(o,c,u){o.then(l=>{try{c&&c(l)}catch(p){if(u)try{if(p instanceof Error){const d=p;u(d.name+": "+d.message)}else u(p)}catch{}}},l=>{if(u)try{if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}catch{}})}e.marshalPromiseToCallbacks=a})(jd);var Us={};Object.defineProperty(Us,"__esModule",{value:!0});Us.Queue=void 0;const Pl=Re,Rl=qs,Ov=jd;var cs;(function(e){e[e.Dequeue=0]="Dequeue",e[e.Peek=1]="Peek"})(cs||(cs={}));class V_{constructor(t){this.privPromiseStore=new Rl.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.privList=t||new Rl.List,this.privDetachables=[],this.privSubscribers=new Rl.List,this.privDetachables.push(this.privList.onAdded(()=>this.drain()))}enqueue(t){this.throwIfDispose(),this.enqueueFromPromise(new Promise(r=>r(t)))}enqueueFromPromise(t){this.throwIfDispose(),t.then(r=>{this.privList.add(r)},()=>{})}dequeue(){this.throwIfDispose();const t=new Ov.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:cs.Dequeue}),this.drain()),t.promise}peek(){this.throwIfDispose();const t=new Ov.Deferred;return this.privSubscribers&&(this.privSubscribers.add({deferral:t,type:cs.Peek}),this.drain()),t.promise}length(){return this.throwIfDispose(),this.privList.length()}isDisposed(){return this.privSubscribers==null}async drainAndDispose(t,r){if(!this.isDisposed()&&!this.privIsDisposing){this.privDisposeReason=r,this.privIsDisposing=!0;const n=this.privSubscribers;if(n){for(;n.length()>0;)n.removeFirst().deferral.resolve(void 0);this.privSubscribers===n&&(this.privSubscribers=n)}for(const i of this.privDetachables)await i.detach();if(this.privPromiseStore.length()>0&&t){const i=[];return this.privPromiseStore.toArray().forEach(s=>{i.push(s)}),Promise.all(i).finally(()=>{this.privSubscribers=null,this.privList.forEach(s=>{t(s)}),this.privList=null}).then()}else this.privSubscribers=null,this.privList=null}}async dispose(t){await this.drainAndDispose(null,t)}drain(){if(!this.privIsDrainInProgress&&!this.privIsDisposing){this.privIsDrainInProgress=!0;const t=this.privSubscribers,r=this.privList;if(t&&r){for(;r.length()>0&&t.length()>0&&!this.privIsDisposing;){const n=t.removeFirst();if(n.type===cs.Peek)n.deferral.resolve(r.first());else{const i=r.removeFirst();n.deferral.resolve(i)}}this.privSubscribers===t&&(this.privSubscribers=t),this.privList===r&&(this.privList=r)}this.privIsDrainInProgress=!1}}throwIfDispose(){if(this.isDisposed())throw this.privDisposeReason?new Pl.InvalidOperationError(this.privDisposeReason):new Pl.ObjectDisposedError("Queue");if(this.privIsDisposing)throw new Pl.InvalidOperationError("Queue disposing")}}Us.Queue=V_;var Fc={};Object.defineProperty(Fc,"__esModule",{value:!0});Fc.RawWebsocketMessage=void 0;const fa=Ld,ui=Re,H_=lt;class K_{constructor(t,r,n){if(this.privPayload=null,!r)throw new ui.ArgumentNullError("payload");if(t===fa.MessageType.Binary&&Object.getPrototypeOf(r).constructor.name!=="ArrayBuffer")throw new ui.InvalidOperationError("Payload must be ArrayBuffer");if(t===fa.MessageType.Text&&typeof r!="string")throw new ui.InvalidOperationError("Payload must be a string");this.privMessageType=t,this.privPayload=r,this.privId=n||(0,H_.createNoDashGuid)()}get messageType(){return this.privMessageType}get payload(){return this.privPayload}get textContent(){if(this.privMessageType===fa.MessageType.Binary)throw new ui.InvalidOperationError("Not supported for binary message");return this.privPayload}get binaryContent(){if(this.privMessageType===fa.MessageType.Text)throw new ui.InvalidOperationError("Not supported for text message");return this.privPayload}get id(){return this.privId}}Fc.RawWebsocketMessage=K_;var qc={};Object.defineProperty(qc,"__esModule",{value:!0});qc.RiffPcmEncoder=void 0;class J_{constructor(t,r){this.privActualSampleRate=t,this.privDesiredSampleRate=r}encode(t){const r=this.downSampleAudioFrame(t,this.privActualSampleRate,this.privDesiredSampleRate);if(!r)return null;const n=r.length*2,i=new ArrayBuffer(n),s=new DataView(i);return this.floatTo16BitPCM(s,0,r),i}setString(t,r,n){for(let i=0;i<n.length;i++)t.setUint8(r+i,n.charCodeAt(i))}floatTo16BitPCM(t,r,n){for(let i=0;i<n.length;i++,r+=2){const s=Math.max(-1,Math.min(1,n[i]));t.setInt16(r,s<0?s*32768:s*32767,!0)}}downSampleAudioFrame(t,r,n){if(!t)return null;if(n===r||n>r)return t;const i=r/n,s=Math.round(t.length/i),a=new Float32Array(s);let o=0,c=0;for(;c<s;){const u=Math.round((c+1)*i);let l=0,p=0;for(;o<u&&o<t.length;)l+=t[o++],p++;a[c++]=l/p}return a}}qc.RiffPcmEncoder=J_;var Uc={};Object.defineProperty(Uc,"__esModule",{value:!0});Uc.Stream=void 0;const Dv=Re,G_=lt,bv=Us;class Q_{constructor(t){this.privIsWriteEnded=!1,this.privIsReadEnded=!1,this.privId=t||(0,G_.createNoDashGuid)(),this.privReaderQueue=new bv.Queue}get isClosed(){return this.privIsWriteEnded}get isReadEnded(){return this.privIsReadEnded}get id(){return this.privId}close(){this.privIsWriteEnded||(this.writeStreamChunk({buffer:null,isEnd:!0,timeReceived:Date.now()}),this.privIsWriteEnded=!0)}writeStreamChunk(t){if(this.throwIfClosed(),!this.privReaderQueue.isDisposed())try{this.privReaderQueue.enqueue(t)}catch{}}read(){if(this.privIsReadEnded)throw new Dv.InvalidOperationError("Stream read has already finished");return this.privReaderQueue.dequeue().then(async t=>((t===void 0||t.isEnd)&&await this.privReaderQueue.dispose("End of stream reached"),t))}readEnded(){this.privIsReadEnded||(this.privIsReadEnded=!0,this.privReaderQueue=new bv.Queue)}throwIfClosed(){if(this.privIsWriteEnded)throw new Dv.InvalidOperationError("Stream closed")}}Uc.Stream=Q_;var $c={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,function(t){t[t.Success=0]="Success",t[t.Error=1]="Error"}(e.TranslationStatus||(e.TranslationStatus={}))})($c);var li={},Nv;function Y_(){if(Nv)return li;Nv=1,Object.defineProperty(li,"__esModule",{value:!0}),li.ChunkedArrayBufferStream=void 0;const e=b();let t=class extends e.Stream{constructor(n,i){super(i),this.privTargetChunkSize=Math.round(n),this.privNextBufferReadyBytes=0}writeStreamChunk(n){if(n.isEnd||this.privNextBufferReadyBytes===0&&n.buffer.byteLength===this.privTargetChunkSize){super.writeStreamChunk(n);return}let i=0;for(;i<n.buffer.byteLength;){this.privNextBufferToWrite===void 0&&(this.privNextBufferToWrite=new ArrayBuffer(this.privTargetChunkSize),this.privNextBufferStartTime=n.timeReceived);const s=Math.min(n.buffer.byteLength-i,this.privTargetChunkSize-this.privNextBufferReadyBytes),a=new Uint8Array(this.privNextBufferToWrite),o=new Uint8Array(n.buffer.slice(i,s+i));a.set(o,this.privNextBufferReadyBytes),this.privNextBufferReadyBytes+=s,i+=s,this.privNextBufferReadyBytes===this.privTargetChunkSize&&(super.writeStreamChunk({buffer:this.privNextBufferToWrite,isEnd:!1,timeReceived:this.privNextBufferStartTime}),this.privNextBufferReadyBytes=0,this.privNextBufferToWrite=void 0)}}close(){this.privNextBufferReadyBytes!==0&&!this.isClosed&&super.writeStreamChunk({buffer:this.privNextBufferToWrite.slice(0,this.privNextBufferReadyBytes),isEnd:!1,timeReceived:this.privNextBufferStartTime}),super.close()}};return li.ChunkedArrayBufferStream=t,li}var ZS={};Object.defineProperty(ZS,"__esModule",{value:!0});var Wc={};Object.defineProperty(Wc,"__esModule",{value:!0});Wc.Timeout=void 0;class De{static load(){const t=new Map([[0,()=>{}]]),r=new Map,i="data:text/javascript;base64,"+btoa(`!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return d}));const r=new Map,o=new Map,i=e=>{const t=r.get(e);if(void 0===t)throw new Error('There is no interval scheduled with the given id "'.concat(e,'".'));clearTimeout(t),r.delete(e)},u=e=>{const t=o.get(e);if(void 0===t)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(t),o.delete(e)},f=(e,t)=>{let n,r;if("performance"in self){const o=performance.now();n=o,r=e-Math.max(0,o-t)}else n=Date.now(),r=e;return{expected:n+r,remainingDelay:r}},c=(e,t,n,r)=>{const o="performance"in self?performance.now():Date.now();o>n?postMessage({id:null,method:"call",params:{timerId:t}}):e.set(t,setTimeout(c,n-o,e,t,n))},a=(e,t,n)=>{const{expected:o,remainingDelay:i}=f(e,n);r.set(t,setTimeout(c,i,r,t,o))},d=(e,t,n)=>{const{expected:r,remainingDelay:i}=f(e,n);o.set(t,setTimeout(c,i,o,t,r))}},function(e,t,n){"use strict";n.r(t);var r=n(2);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(3);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(4);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o);var f=n(5);for(var o in f)"default"!==o&&function(e){n.d(t,e,(function(){return f[e]}))}(o);var c=n(6);for(var o in c)"default"!==o&&function(e){n.d(t,e,(function(){return c[e]}))}(o);var a=n(7);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);var d=n(8);for(var o in d)"default"!==o&&function(e){n.d(t,e,(function(){return d[e]}))}(o);var s=n(9);for(var o in s)"default"!==o&&function(e){n.d(t,e,(function(){return s[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(11);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var i=n(12);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);var u=n(13);for(var o in u)"default"!==o&&function(e){n.d(t,e,(function(){return u[e]}))}(o)},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);var u=n(10);for(var i in u)"default"!==i&&function(e){n.d(t,e,(function(){return u[e]}))}(i);addEventListener("message",({data:e})=>{try{if("clear"===e.method){const{id:t,params:{timerId:n}}=e;Object(r.b)(n),postMessage({error:null,id:t})}else{if("set"!==e.method)throw new Error('The given method "'.concat(e.method,'" is not supported'));{const{params:{delay:t,now:n,timerId:o}}=e;Object(r.d)(t,o,n)}}}catch(t){postMessage({error:{message:t.message},id:e.id,result:null})}})}]);`),s=new Worker(i);return s.addEventListener("message",({data:c})=>{if(De.isCallNotification(c)){const{params:{timerId:u}}=c,l=t.get(u);if(typeof l=="number"){const p=r.get(l);if(p===void 0||p!==u)throw new Error("The timer is in an undefined state.")}else if(typeof l<"u")l(),t.delete(u);else throw new Error("The timer is in an undefined state.")}else if(De.isClearResponse(c)){const{id:u}=c,l=r.get(u);if(l===void 0)throw new Error("The timer is in an undefined state.");r.delete(u),t.delete(l)}else{const{error:{message:u}}=c;throw new Error(u)}}),{clearTimeout:c=>{const u=Math.random();r.set(u,c),t.set(c,u),s.postMessage({id:u,method:"clear",params:{timerId:c}})},setTimeout:(c,u)=>{const l=Math.random();return t.set(l,c),s.postMessage({id:null,method:"set",params:{delay:u,now:performance.now(),timerId:l}}),l}}}static loadWorkerTimers(){return()=>(De.workerTimers!==null||(De.workerTimers=De.load()),De.workerTimers)}static isCallNotification(t){return t.method!==void 0&&t.method==="call"}static isClearResponse(t){return t.error===null&&typeof t.id=="number"}}Wc.Timeout=De;De.workerTimers=null;De.clearTimeout=e=>De.timers().clearTimeout(e);De.setTimeout=(e,t)=>De.timers().setTimeout(e,t);De.timers=De.loadWorkerTimers();var $={};Object.defineProperty($,"__esModule",{value:!0});$.OCSPCacheUpdateErrorEvent=$.OCSPResponseRetrievedEvent=$.OCSPCacheFetchErrorEvent=$.OCSPVerificationFailedEvent=$.OCSPCacheHitEvent=$.OCSPCacheEntryNeedsRefreshEvent=$.OCSPCacheEntryExpiredEvent=$.OCSPWSUpgradeStartedEvent=$.OCSPStapleReceivedEvent=$.OCSPCacheUpdateCompleteEvent=$.OCSPDiskCacheStoreEvent=$.OCSPMemoryCacheStoreEvent=$.OCSPCacheUpdateNeededEvent=$.OCSPDiskCacheHitEvent=$.OCSPCacheMissEvent=$.OCSPMemoryCacheHitEvent=$.OCSPEvent=void 0;const we=Hn;class Ie extends we.PlatformEvent{constructor(t,r,n){super(t,r),this.privSignature=n}}$.OCSPEvent=Ie;class X_ extends Ie{constructor(t){super("OCSPMemoryCacheHitEvent",we.EventType.Debug,t)}}$.OCSPMemoryCacheHitEvent=X_;class Z_ extends Ie{constructor(t){super("OCSPCacheMissEvent",we.EventType.Debug,t)}}$.OCSPCacheMissEvent=Z_;class eA extends Ie{constructor(t){super("OCSPDiskCacheHitEvent",we.EventType.Debug,t)}}$.OCSPDiskCacheHitEvent=eA;class tA extends Ie{constructor(t){super("OCSPCacheUpdateNeededEvent",we.EventType.Debug,t)}}$.OCSPCacheUpdateNeededEvent=tA;class rA extends Ie{constructor(t){super("OCSPMemoryCacheStoreEvent",we.EventType.Debug,t)}}$.OCSPMemoryCacheStoreEvent=rA;class nA extends Ie{constructor(t){super("OCSPDiskCacheStoreEvent",we.EventType.Debug,t)}}$.OCSPDiskCacheStoreEvent=nA;class iA extends Ie{constructor(t){super("OCSPCacheUpdateCompleteEvent",we.EventType.Debug,t)}}$.OCSPCacheUpdateCompleteEvent=iA;class oA extends Ie{constructor(){super("OCSPStapleReceivedEvent",we.EventType.Debug,"")}}$.OCSPStapleReceivedEvent=oA;class sA extends Ie{constructor(t){super("OCSPWSUpgradeStartedEvent",we.EventType.Debug,t)}}$.OCSPWSUpgradeStartedEvent=sA;class aA extends Ie{constructor(t,r){super("OCSPCacheEntryExpiredEvent",we.EventType.Debug,t),this.privExpireTime=r}}$.OCSPCacheEntryExpiredEvent=aA;class cA extends Ie{constructor(t,r,n){super("OCSPCacheEntryNeedsRefreshEvent",we.EventType.Debug,t),this.privExpireTime=n,this.privStartTime=r}}$.OCSPCacheEntryNeedsRefreshEvent=cA;class uA extends Ie{constructor(t,r,n){super("OCSPCacheHitEvent",we.EventType.Debug,t),this.privExpireTime=n,this.privExpireTimeString=new Date(n).toLocaleDateString(),this.privStartTime=r,this.privStartTimeString=new Date(r).toLocaleTimeString()}}$.OCSPCacheHitEvent=uA;class lA extends Ie{constructor(t,r){super("OCSPVerificationFailedEvent",we.EventType.Debug,t),this.privError=r}}$.OCSPVerificationFailedEvent=lA;class pA extends Ie{constructor(t,r){super("OCSPCacheFetchErrorEvent",we.EventType.Debug,t),this.privError=r}}$.OCSPCacheFetchErrorEvent=pA;class dA extends Ie{constructor(t){super("OCSPResponseRetrievedEvent",we.EventType.Debug,t)}}$.OCSPResponseRetrievedEvent=dA;class hA extends Ie{constructor(t,r){super("OCSPCacheUpdateErrorEvent",we.EventType.Debug,t),this.privError=r}}$.OCSPCacheUpdateErrorEvent=hA;var pi={},zv;function vA(){if(zv)return pi;zv=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.BackgroundEvent=void 0;const e=b();class t extends e.PlatformEvent{constructor(n){super("BackgroundEvent",e.EventType.Error),this.privError=n}get error(){return this.privError}}return pi.BackgroundEvent=t,pi}var Lv;function b(){return Lv||(Lv=1,function(e){var t=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.TranslationStatus=void 0,r(ie,e),r(oe,e),r(Ld,e),r(jc,e),r(xc,e),r(en,e),r(Re,e),r(Bc,e),r(Fs,e),r(lt,e),r($S,e),r(WS,e),r(VS,e),r(HS,e),r(KS,e),r(JS,e),r(GS,e),r(QS,e),r(YS,e),r(XS,e),r(qs,e),r(Hn,e),r(jd,e),r(Us,e),r(Fc,e),r(qc,e),r(Uc,e);var n=$c;Object.defineProperty(e,"TranslationStatus",{enumerable:!0,get:function(){return n.TranslationStatus}}),r(Y_(),e),r(ZS,e),r(Wc,e),r($,e),r(vA(),e)}(gl)),gl}var fe={};Object.defineProperty(fe,"__esModule",{value:!0});fe.HeaderNames=void 0;class yt{}fe.HeaderNames=yt;yt.AuthKey="Ocp-Apim-Subscription-Key";yt.Authorization="Authorization";yt.SpIDAuthKey="Apim-Subscription-Id";yt.ConnectionId="X-ConnectionId";yt.ContentType="Content-Type";yt.CustomCommandsAppId="X-CommandsAppId";yt.Path="Path";yt.RequestId="X-RequestId";yt.RequestStreamId="X-StreamId";yt.RequestTimestamp="X-Timestamp";var Jn={};Object.defineProperty(Jn,"__esModule",{value:!0});Jn.AuthInfo=void 0;class fA{constructor(t,r){this.privHeaderName=t,this.privToken=r}get headerName(){return this.privHeaderName}get token(){return this.privToken}}Jn.AuthInfo=fA;Object.defineProperty(wc,"__esModule",{value:!0});wc.CognitiveSubscriptionKeyAuthentication=void 0;const gA=b(),mA=fe,yA=Jn;class SA{constructor(t){if(!t)throw new gA.ArgumentNullError("subscriptionKey");this.privAuthInfo=new yA.AuthInfo(mA.HeaderNames.AuthKey,t)}fetch(t){return Promise.resolve(this.privAuthInfo)}fetchOnExpiry(t){return Promise.resolve(this.privAuthInfo)}}wc.CognitiveSubscriptionKeyAuthentication=SA;var Vc={};Object.defineProperty(Vc,"__esModule",{value:!0});Vc.CognitiveTokenAuthentication=void 0;const jv=b(),xv=Jn,Bv=fe;class As{constructor(t,r){if(!t)throw new jv.ArgumentNullError("fetchCallback");if(!r)throw new jv.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=t,this.privFetchOnExpiryCallback=r}fetch(t){return this.privFetchCallback(t).then(r=>new xv.AuthInfo(Bv.HeaderNames.Authorization,r===void 0?void 0:As.privTokenPrefix+r))}fetchOnExpiry(t){return this.privFetchOnExpiryCallback(t).then(r=>new xv.AuthInfo(Bv.HeaderNames.Authorization,r===void 0?void 0:As.privTokenPrefix+r))}}Vc.CognitiveTokenAuthentication=As;As.privTokenPrefix="Bearer ";var eC={};Object.defineProperty(eC,"__esModule",{value:!0});var tC={};Object.defineProperty(tC,"__esModule",{value:!0});var di={},El={},Hc={};const CA={},PA=Object.freeze(Object.defineProperty({__proto__:null,default:CA},Symbol.toStringTag,{value:"Module"})),sn=uR(PA);var xd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LogLevel=void 0;const t=b();Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return t.EventType}})})(xd);var z={};Object.defineProperty(z,"__esModule",{value:!0});z.Contracts=void 0;class tr{static throwIfNullOrUndefined(t,r){if(t==null)throw new Error("throwIfNullOrUndefined:"+r)}static throwIfNull(t,r){if(t===null)throw new Error("throwIfNull:"+r)}static throwIfNullOrWhitespace(t,r){if(tr.throwIfNullOrUndefined(t,r),(""+t).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+r)}static throwIfNullOrTooLong(t,r,n){if(tr.throwIfNullOrUndefined(t,r),(""+t).length>n)throw new Error("throwIfNullOrTooLong:"+r+" (more than "+n.toString()+" characters)")}static throwIfNullOrTooShort(t,r,n){if(tr.throwIfNullOrUndefined(t,r),(""+t).length<n)throw new Error("throwIfNullOrTooShort:"+r+" (less than "+n.toString()+" characters)")}static throwIfDisposed(t){if(t)throw new Error("the object is already disposed")}static throwIfArrayEmptyOrWhitespace(t,r){if(tr.throwIfNullOrUndefined(t,r),t.length===0)throw new Error("throwIfArrayEmptyOrWhitespace:"+r);for(const n of t)tr.throwIfNullOrWhitespace(n,r)}static throwIfFileDoesNotExist(t,r){tr.throwIfNullOrWhitespace(t,r)}static throwIfNotUndefined(t,r){if(t!==void 0)throw new Error("throwIfNotUndefined:"+r)}}z.Contracts=tr;var RA=q&&q.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),EA=q&&q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wA=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&RA(t,e,r);return EA(t,e),t};Object.defineProperty(Hc,"__esModule",{value:!0});Hc.ConsoleLoggingListener=void 0;const Fv=wA(sn),hi=xd,IA=z;class TA{constructor(t=hi.LogLevel.None){this.privLogPath=void 0,this.privEnableConsoleOutput=!0,this.privLogLevelFilter=t}set logPath(t){IA.Contracts.throwIfNullOrUndefined(Fv.openSync,`
File System access not available`),this.privLogPath=t}set enableConsoleOutput(t){this.privEnableConsoleOutput=t}onEvent(t){if(t.eventType>=this.privLogLevelFilter){const r=this.toString(t);if(this.logCallback&&this.logCallback(r),this.privLogPath&&Fv.writeFileSync(this.privLogPath,r+`
`,{flag:"a+"}),this.privEnableConsoleOutput)switch(t.eventType){case hi.LogLevel.Debug:console.debug(r);break;case hi.LogLevel.Info:console.info(r);break;case hi.LogLevel.Warning:console.warn(r);break;case hi.LogLevel.Error:console.error(r);break;default:console.log(r);break}}}toString(t){const r=[`${t.eventTime}`,`${t.name}`],n=t;for(const i in n)if(i&&t.hasOwnProperty(i)&&i!=="eventTime"&&i!=="eventType"&&i!=="eventId"&&i!=="name"&&i!=="constructor"){const s=n[i];let a="<NULL>";s!=null&&(typeof s=="number"||typeof s=="string"?a=s.toString():a=JSON.stringify(s)),r.push(`${i}: ${a}`)}return r.join(" | ")}}Hc.ConsoleLoggingListener=TA;var rC={};Object.defineProperty(rC,"__esModule",{value:!0});var wl={},Ir={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AudioStreamFormatImpl=e.AudioStreamFormat=e.AudioFormatTag=void 0;var t;(function(i){i[i.PCM=1]="PCM",i[i.MuLaw=2]="MuLaw",i[i.Siren=3]="Siren",i[i.MP3=4]="MP3",i[i.SILKSkype=5]="SILKSkype",i[i.OGG_OPUS=6]="OGG_OPUS",i[i.WEBM_OPUS=7]="WEBM_OPUS",i[i.ALaw=8]="ALaw",i[i.FLAC=9]="FLAC",i[i.OPUS=10]="OPUS",i[i.AMR_WB=11]="AMR_WB",i[i.G722=12]="G722"})(t=e.AudioFormatTag||(e.AudioFormatTag={}));class r{static getDefaultInputFormat(){return n.getDefaultInputFormat()}static getWaveFormat(s,a,o,c){return new n(s,a,o,c)}static getWaveFormatPCM(s,a,o){return new n(s,a,o)}}e.AudioStreamFormat=r;class n extends r{constructor(s=16e3,a=16,o=1,c=t.PCM){super();let u=!0;switch(c){case t.PCM:this.formatTag=1;break;case t.ALaw:this.formatTag=6;break;case t.MuLaw:this.formatTag=7;break;default:u=!1}if(this.bitsPerSample=a,this.samplesPerSec=s,this.channels=o,this.avgBytesPerSec=this.samplesPerSec*this.channels*(this.bitsPerSample/8),this.blockAlign=this.channels*Math.max(this.bitsPerSample,8),u){this.privHeader=new ArrayBuffer(44);const l=new DataView(this.privHeader);this.setString(l,0,"RIFF"),l.setUint32(4,0,!0),this.setString(l,8,"WAVEfmt "),l.setUint32(16,16,!0),l.setUint16(20,this.formatTag,!0),l.setUint16(22,this.channels,!0),l.setUint32(24,this.samplesPerSec,!0),l.setUint32(28,this.avgBytesPerSec,!0),l.setUint16(32,this.channels*(this.bitsPerSample/8),!0),l.setUint16(34,this.bitsPerSample,!0),this.setString(l,36,"data"),l.setUint32(40,0,!0)}}static getDefaultInputFormat(){return new n}static getAudioContext(s){const a=window.AudioContext||window.webkitAudioContext||!1;if(a)return s!==void 0&&navigator.mediaDevices.getSupportedConstraints().sampleRate?new a({sampleRate:s}):new a;throw new Error("Browser does not support Web Audio API (AudioContext is not available).")}close(){}get header(){return this.privHeader}setString(s,a,o){for(let c=0;c<o.length;c++)s.setUint8(a+c,o.charCodeAt(c))}}e.AudioStreamFormatImpl=n})(Ir);var qv;function _A(){return qv||(qv=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicAudioSource=e.AudioWorkletSourceURLPropertyName=void 0;const t=O(),r=b(),n=Ir;e.AudioWorkletSourceURLPropertyName="MICROPHONE-WorkletSourceUrl";class i{constructor(a,o,c,u){this.privRecorder=a,this.deviceId=o,this.privStreams={},this.privOutputChunkSize=i.AUDIOFORMAT.avgBytesPerSec/10,this.privId=c||(0,r.createNoDashGuid)(),this.privEvents=new r.EventSource,this.privMediaStream=u||null,this.privIsClosing=!1}get format(){return Promise.resolve(i.AUDIOFORMAT)}turnOn(){if(this.privInitializeDeferral)return this.privInitializeDeferral.promise;this.privInitializeDeferral=new r.Deferred;try{this.createAudioContext()}catch(c){if(c instanceof Error){const u=c;this.privInitializeDeferral.reject(u.name+": "+u.message)}else this.privInitializeDeferral.reject(c);return this.privInitializeDeferral.promise}const a=window.navigator;let o=a.getUserMedia||a.webkitGetUserMedia||a.mozGetUserMedia||a.msGetUserMedia;if(a.mediaDevices&&(o=(c,u,l)=>{a.mediaDevices.getUserMedia(c).then(u).catch(l)}),o){const c=()=>{this.onEvent(new r.AudioSourceInitializingEvent(this.privId)),this.privMediaStream&&this.privMediaStream.active?(this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()):o({audio:this.deviceId?{deviceId:this.deviceId}:!0,video:!1},u=>{this.privMediaStream=u,this.onEvent(new r.AudioSourceReadyEvent(this.privId)),this.privInitializeDeferral.resolve()},u=>{const l=`Error occurred during microphone initialization: ${u}`;this.privInitializeDeferral.reject(l),this.onEvent(new r.AudioSourceErrorEvent(this.privId,l))})};this.privContext.state==="suspended"?this.privContext.resume().then(c).catch(u=>{this.privInitializeDeferral.reject(`Failed to initialize audio context: ${u}`)}):c()}else{const c="Browser does not support getUserMedia.";this.privInitializeDeferral.reject(c),this.onEvent(new r.AudioSourceErrorEvent(c,""))}return this.privInitializeDeferral.promise}id(){return this.privId}attach(a){return this.onEvent(new r.AudioStreamNodeAttachingEvent(this.privId,a)),this.listen(a).then(o=>(this.onEvent(new r.AudioStreamNodeAttachedEvent(this.privId,a)),{detach:async()=>(o.readEnded(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)),this.turnOff()),id:()=>a,read:()=>o.read()}))}detach(a){a&&this.privStreams[a]&&(this.privStreams[a].close(),delete this.privStreams[a],this.onEvent(new r.AudioStreamNodeDetachedEvent(this.privId,a)))}async turnOff(){for(const a in this.privStreams)if(a){const o=this.privStreams[a];o&&o.close()}this.onEvent(new r.AudioSourceOffEvent(this.privId)),this.privInitializeDeferral&&(await this.privInitializeDeferral,this.privInitializeDeferral=null),await this.destroyAudioContext()}get events(){return this.privEvents}get deviceInfo(){return this.getMicrophoneLabel().then(a=>({bitspersample:i.AUDIOFORMAT.bitsPerSample,channelcount:i.AUDIOFORMAT.channels,connectivity:t.connectivity.Unknown,manufacturer:"Speech SDK",model:a,samplerate:i.AUDIOFORMAT.samplesPerSec,type:t.type.Microphones}))}setProperty(a,o){if(a===e.AudioWorkletSourceURLPropertyName)this.privRecorder.setWorkletUrl(o);else throw new Error("Property '"+a+"' is not supported on Microphone.")}getMicrophoneLabel(){const a="microphone";if(this.privMicrophoneLabel!==void 0)return Promise.resolve(this.privMicrophoneLabel);if(this.privMediaStream===void 0||!this.privMediaStream.active)return Promise.resolve(a);this.privMicrophoneLabel=a;const o=this.privMediaStream.getTracks()[0].getSettings().deviceId;if(o===void 0)return Promise.resolve(this.privMicrophoneLabel);const c=new r.Deferred;return navigator.mediaDevices.enumerateDevices().then(u=>{for(const l of u)if(l.deviceId===o){this.privMicrophoneLabel=l.label;break}c.resolve(this.privMicrophoneLabel)},()=>c.resolve(this.privMicrophoneLabel)),c.promise}async listen(a){await this.turnOn();const o=new r.ChunkedArrayBufferStream(this.privOutputChunkSize,a);this.privStreams[a]=o;try{this.privRecorder.record(this.privContext,this.privMediaStream,o)}catch(u){throw this.onEvent(new r.AudioStreamNodeErrorEvent(this.privId,a,u)),u}return o}onEvent(a){this.privEvents.onEvent(a),r.Events.instance.onEvent(a)}createAudioContext(){this.privContext||(this.privContext=n.AudioStreamFormatImpl.getAudioContext(i.AUDIOFORMAT.samplesPerSec))}async destroyAudioContext(){if(!this.privContext)return;this.privRecorder.releaseMediaResources(this.privContext);let a=!1;"close"in this.privContext&&(a=!0),a?this.privIsClosing||(this.privIsClosing=!0,await this.privContext.close(),this.privContext=null,this.privIsClosing=!1):this.privContext!==null&&this.privContext.state==="running"&&await this.privContext.suspend()}}e.MicAudioSource=i,i.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat()}(wl)),wl}var vi={},Uv;function AA(){if(Uv)return vi;Uv=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.FileAudioSource=void 0;const e=O(),t=b(),r=Ir;let n=class{constructor(s,a,o){this.privStreams={},this.privHeaderEnd=44,this.privId=o||(0,t.createNoDashGuid)(),this.privEvents=new t.EventSource,this.privSource=s,typeof window<"u"&&typeof Blob<"u"&&this.privSource instanceof Blob?this.privFilename=s.name:this.privFilename=a||"unknown.wav",this.privAudioFormatPromise=this.readHeader()}get format(){return this.privAudioFormatPromise}turnOn(){if(this.privFilename.lastIndexOf(".wav")!==this.privFilename.length-4){const s=this.privFilename+" is not supported. Only WAVE files are allowed at the moment.";return this.onEvent(new t.AudioSourceErrorEvent(s,"")),Promise.reject(s)}this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}id(){return this.privId}async attach(s){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,s));const a=await this.upload(s);return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,s)),Promise.resolve({detach:async()=>{a.readEnded(),delete this.privStreams[s],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,s)),await this.turnOff()},id:()=>s,read:()=>a.read()})}detach(s){s&&this.privStreams[s]&&(this.privStreams[s].close(),delete this.privStreams[s],this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,s)))}turnOff(){for(const s in this.privStreams)if(s){const a=this.privStreams[s];a&&!a.isClosed&&a.close()}return this.onEvent(new t.AudioSourceOffEvent(this.privId)),Promise.resolve()}get events(){return this.privEvents}get deviceInfo(){return this.privAudioFormatPromise.then(s=>Promise.resolve({bitspersample:s.bitsPerSample,channelcount:s.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"File",samplerate:s.samplesPerSec,type:e.type.File}))}readHeader(){const a=this.privSource.slice(0,4296),o=new t.Deferred,c=u=>{const l=new DataView(u),p=v=>String.fromCharCode(l.getUint8(v),l.getUint8(v+1),l.getUint8(v+2),l.getUint8(v+3));if(p(0)!=="RIFF"){o.reject("Invalid WAV header in file, RIFF was not found");return}if(p(8)!=="WAVE"||p(12)!=="fmt "){o.reject("Invalid WAV header in file, WAVEfmt was not found");return}const d=l.getInt32(16,!0),h=l.getUint16(22,!0),m=l.getUint32(24,!0),y=l.getUint16(34,!0);let S=36+Math.max(d-16,0);for(;p(S)!=="data";S+=2)if(S>4288){o.reject("Invalid WAV header in file, data block was not found");return}this.privHeaderEnd=S+8,o.resolve(r.AudioStreamFormat.getWaveFormatPCM(m,y,h))};if(typeof window<"u"&&typeof Blob<"u"&&a instanceof Blob){const u=new FileReader;u.onload=l=>{const p=l.target.result;c(p)},u.readAsArrayBuffer(a)}else{const u=a;c(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength))}return o.promise}async upload(s){const a=o=>{const c=`Error occurred while processing '${this.privFilename}'. ${o}`;throw this.onEvent(new t.AudioStreamNodeErrorEvent(this.privId,s,c)),new Error(c)};try{await this.turnOn();const o=await this.privAudioFormatPromise,c=new t.ChunkedArrayBufferStream(o.avgBytesPerSec/10,s);this.privStreams[s]=c;const u=this.privSource.slice(this.privHeaderEnd),l=p=>{c.isClosed||(c.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()}),c.close())};if(typeof window<"u"&&typeof Blob<"u"&&u instanceof Blob){const p=new FileReader;p.onerror=d=>a(d.toString()),p.onload=d=>{const h=d.target.result;l(h)},p.readAsArrayBuffer(u)}else{const p=u;l(p.buffer.slice(p.byteOffset,p.byteOffset+p.byteLength))}return c}catch(o){a(o)}}onEvent(s){this.privEvents.onEvent(s),t.Events.instance.onEvent(s)}};return vi.FileAudioSource=n,vi}var Kc={};Object.defineProperty(Kc,"__esModule",{value:!0});Kc.PcmRecorder=void 0;const kA=b();class MA{constructor(t){this.privStopInputOnRelease=t}record(t,r,n){const s=new kA.RiffPcmEncoder(t.sampleRate,16e3),a=t.createMediaStreamSource(r),o=()=>{const u=(()=>{let l=0;try{return t.createScriptProcessor(l,1,1)}catch{l=2048;let d=t.sampleRate;for(;l<16384&&d>=32e3;)l<<=1,d>>=1;return t.createScriptProcessor(l,1,1)}})();u.onaudioprocess=l=>{const p=l.inputBuffer.getChannelData(0);if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(t.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}},c=!!this.privSpeechProcessorScript&&this.privSpeechProcessorScript.toLowerCase()==="ignore";if(t.audioWorklet&&!c){if(!this.privSpeechProcessorScript){const u=`class SP extends AudioWorkletProcessor {
                    constructor(options) {
                      super(options);
                    }
                    process(inputs, outputs) {
                      const input = inputs[0];
                      const output = [];
                      for (let channel = 0; channel < input.length; channel += 1) {
                        output[channel] = input[channel];
                      }
                      this.port.postMessage(output[0]);
                      return true;
                    }
                  }
                  registerProcessor('speech-processor', SP);`,l=new Blob([u],{type:"application/javascript; charset=utf-8"});this.privSpeechProcessorScript=URL.createObjectURL(l)}t.audioWorklet.addModule(this.privSpeechProcessorScript).then(()=>{const u=new AudioWorkletNode(t,"speech-processor");u.port.onmessage=l=>{const p=l.data;if(n&&!n.isClosed){const d=s.encode(p);d&&n.writeStreamChunk({buffer:d,isEnd:!1,timeReceived:Date.now()})}},a.connect(u),u.connect(t.destination),this.privMediaResources={scriptProcessorNode:u,source:a,stream:r}}).catch(()=>{o()})}else try{o()}catch(u){throw new Error(`Unable to start audio worklet node for PCMRecorder: ${u}`)}}releaseMediaResources(t){this.privMediaResources&&(this.privMediaResources.scriptProcessorNode&&(this.privMediaResources.scriptProcessorNode.disconnect(t.destination),this.privMediaResources.scriptProcessorNode=null),this.privMediaResources.source&&(this.privMediaResources.source.disconnect(),this.privStopInputOnRelease&&this.privMediaResources.stream.getTracks().forEach(r=>r.stop()),this.privMediaResources.source=null))}setWorkletUrl(t){this.privSpeechProcessorScript=t}}Kc.PcmRecorder=MA;var Jc={},$s={},OA=q&&q.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),DA=q&&q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),nC=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&OA(t,e,r);return DA(t,e),t},Bd=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($s,"__esModule",{value:!0});$s.WebsocketMessageAdapter=void 0;const bA=nC(sn),NA=nC(sn),zA=Bd(sn),LA=Bd(sn),jA=Bd(sn),xA=fe,L=b();class ks{constructor(t,r,n,i,s,a){if(!t)throw new L.ArgumentNullError("uri");if(!n)throw new L.ArgumentNullError("messageFormatter");this.proxyInfo=i,this.privConnectionEvents=new L.EventSource,this.privConnectionId=r,this.privMessageFormatter=n,this.privConnectionState=L.ConnectionState.None,this.privUri=t,this.privHeaders=s,this.privEnableCompression=a,this.privHeaders[xA.HeaderNames.ConnectionId]=this.privConnectionId,this.privHeaders.connectionId=this.privConnectionId,this.privLastErrorReceived=""}get state(){return this.privConnectionState}open(){if(this.privConnectionState===L.ConnectionState.Disconnected)return Promise.reject(`Cannot open a connection that is in ${this.privConnectionState} state`);if(this.privConnectionEstablishDeferral)return this.privConnectionEstablishDeferral.promise;this.privConnectionEstablishDeferral=new L.Deferred,this.privCertificateValidatedDeferral=new L.Deferred,this.privConnectionState=L.ConnectionState.Connecting;try{if(typeof WebSocket<"u"&&!ks.forceNpmWebSocket)this.privCertificateValidatedDeferral.resolve(),this.privWebsocketClient=new WebSocket(this.privUri);else{let r=new URL(this.privUri).protocol;r?.toLocaleLowerCase()==="wss:"?r="https:":r?.toLocaleLowerCase()==="ws:"&&(r="http:");const n={headers:this.privHeaders,perMessageDeflate:this.privEnableCompression,followRedirects:r.toLocaleLowerCase()==="https:"};this.privCertificateValidatedDeferral.resolve(),n.agent=this.getAgent(),n.agent.protocol=r,this.privWebsocketClient=new jA.default(this.privUri,n),this.privWebsocketClient.on("redirect",i=>{const s=new L.ConnectionRedirectEvent(this.privConnectionId,i,this.privUri,`Getting redirect URL from endpoint ${this.privUri} with redirect URL '${i}'`);L.Events.instance.onEvent(s)})}this.privWebsocketClient.binaryType="arraybuffer",this.privReceivingMessageQueue=new L.Queue,this.privDisconnectDeferral=new L.Deferred,this.privSendMessageQueue=new L.Queue,this.processSendQueue().catch(t=>{L.Events.instance.onEvent(new L.BackgroundEvent(t))})}catch(t){return this.privConnectionEstablishDeferral.resolve(new L.ConnectionOpenResponse(500,t)),this.privConnectionEstablishDeferral.promise}return this.onEvent(new L.ConnectionStartEvent(this.privConnectionId,this.privUri)),this.privWebsocketClient.onopen=()=>{this.privCertificateValidatedDeferral.promise.then(()=>{this.privConnectionState=L.ConnectionState.Connected,this.onEvent(new L.ConnectionEstablishedEvent(this.privConnectionId)),this.privConnectionEstablishDeferral.resolve(new L.ConnectionOpenResponse(200,""))},t=>{this.privConnectionEstablishDeferral.reject(t)})},this.privWebsocketClient.onerror=t=>{this.onEvent(new L.ConnectionErrorEvent(this.privConnectionId,t.message,t.type)),this.privLastErrorReceived=t.message},this.privWebsocketClient.onclose=t=>{this.privConnectionState===L.ConnectionState.Connecting?(this.privConnectionState=L.ConnectionState.Disconnected,this.privConnectionEstablishDeferral.resolve(new L.ConnectionOpenResponse(t.code,t.reason+" "+this.privLastErrorReceived))):(this.privConnectionState=L.ConnectionState.Disconnected,this.privWebsocketClient=null,this.onEvent(new L.ConnectionClosedEvent(this.privConnectionId,t.code,t.reason))),this.onClose(t.code,t.reason).catch(r=>{L.Events.instance.onEvent(new L.BackgroundEvent(r))})},this.privWebsocketClient.onmessage=t=>{const r=new Date().toISOString();if(this.privConnectionState===L.ConnectionState.Connected){const n=new L.Deferred;if(this.privReceivingMessageQueue.enqueueFromPromise(n.promise),t.data instanceof ArrayBuffer){const i=new L.RawWebsocketMessage(L.MessageType.Binary,t.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new L.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid binary message format. Error: ${s}`)})}else{const i=new L.RawWebsocketMessage(L.MessageType.Text,t.data);this.privMessageFormatter.toConnectionMessage(i).then(s=>{this.onEvent(new L.ConnectionMessageReceivedEvent(this.privConnectionId,r,s)),n.resolve(s)},s=>{n.reject(`Invalid text message format. Error: ${s}`)})}}},this.privConnectionEstablishDeferral.promise}send(t){if(this.privConnectionState!==L.ConnectionState.Connected)return Promise.reject(`Cannot send on connection that is in ${L.ConnectionState[this.privConnectionState]} state`);const r=new L.Deferred,n=new L.Deferred;return this.privSendMessageQueue.enqueueFromPromise(n.promise),this.privMessageFormatter.fromConnectionMessage(t).then(i=>{n.resolve({Message:t,RawWebsocketMessage:i,sendStatusDeferral:r})},i=>{n.reject(`Error formatting the message. ${i}`)}),r.promise}read(){return this.privConnectionState!==L.ConnectionState.Connected?Promise.reject(`Cannot read on connection that is in ${this.privConnectionState} state`):this.privReceivingMessageQueue.dequeue()}close(t){if(this.privWebsocketClient)this.privConnectionState!==L.ConnectionState.Disconnected&&this.privWebsocketClient.close(1e3,t||"Normal closure by client");else return Promise.resolve();return this.privDisconnectDeferral.promise}get events(){return this.privConnectionEvents}sendRawMessage(t){try{if(!t)return Promise.resolve();if(this.onEvent(new L.ConnectionMessageSentEvent(this.privConnectionId,new Date().toISOString(),t.Message)),this.isWebsocketOpen)this.privWebsocketClient.send(t.RawWebsocketMessage.payload);else return Promise.reject("websocket send error: Websocket not ready "+this.privConnectionId+" "+t.Message.id+" "+new Error().stack);return Promise.resolve()}catch(r){return Promise.reject(`websocket send error: ${r}`)}}async onClose(t,r){const n=`Connection closed. ${t}: ${r}`;this.privConnectionState=L.ConnectionState.Disconnected,this.privDisconnectDeferral.resolve(),await this.privReceivingMessageQueue.drainAndDispose(()=>{},n),await this.privSendMessageQueue.drainAndDispose(i=>{i.sendStatusDeferral.reject(n)},n)}async processSendQueue(){for(;;){const r=await this.privSendMessageQueue.dequeue();if(!r)return;try{await this.sendRawMessage(r),r.sendStatusDeferral.resolve()}catch(n){r.sendStatusDeferral.reject(n)}}}onEvent(t){this.privConnectionEvents.onEvent(t),L.Events.instance.onEvent(t)}getAgent(){const t=new zA.default.Agent(this.createConnection);return this.proxyInfo!==void 0&&this.proxyInfo.HostName!==void 0&&this.proxyInfo.Port>0&&(t.proxyInfo=this.proxyInfo),t}static GetProxyAgent(t){const r={host:t.HostName,port:t.Port};return t.UserName?r.headers={"Proxy-Authentication":"Basic "+new Buffer(`${t.UserName}:${t.Password===void 0?"":t.Password}`).toString("base64")}:r.headers={},r.headers.requestOCSP="true",new LA.default(r)}createConnection(t,r){let n;if(r={...r,requestOCSP:!0,servername:r.host},this.proxyInfo){const s=ks.GetProxyAgent(this.proxyInfo);n=new Promise((a,o)=>{s.callback(t,r,(c,u)=>{c?o(c):a(u)})})}else r.secureEndpoint?n=Promise.resolve(NA.connect(r)):n=Promise.resolve(bA.connect(r));return n}get isWebsocketOpen(){return this.privWebsocketClient&&this.privWebsocketClient.readyState===this.privWebsocketClient.OPEN}}$s.WebsocketMessageAdapter=ks;ks.forceNpmWebSocket=!1;Object.defineProperty(Jc,"__esModule",{value:!0});Jc.WebsocketConnection=void 0;const Il=b(),BA=$s;class FA{constructor(t,r,n,i,s,a=!1,o){if(this.privIsDisposed=!1,!t)throw new Il.ArgumentNullError("uri");if(!i)throw new Il.ArgumentNullError("messageFormatter");this.privMessageFormatter=i;let c="",u=0;if(r){for(const l in r)if(l){c+=u===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(l);c+=p;let d=r[l];d&&(d=encodeURIComponent(d),c+=`=${d}`),u++}}if(n){for(const l in n)if(l){c+=u===0&&t.indexOf("?")===-1?"?":"&";const p=encodeURIComponent(n[l]);c+=`${l}=${p}`,u++}}this.privUri=t+c,this.privId=o||(0,Il.createNoDashGuid)(),this.privConnectionMessageAdapter=new BA.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter,s,n,a)}async dispose(){this.privIsDisposed=!0,this.privConnectionMessageAdapter&&await this.privConnectionMessageAdapter.close()}isDisposed(){return this.privIsDisposed}get id(){return this.privId}get uri(){return this.privUri}state(){return this.privConnectionMessageAdapter.state}open(){return this.privConnectionMessageAdapter.open()}send(t){return this.privConnectionMessageAdapter.send(t)}read(){return this.privConnectionMessageAdapter.read()}get events(){return this.privConnectionMessageAdapter.events}}Jc.WebsocketConnection=FA;var Gc={};Object.defineProperty(Gc,"__esModule",{value:!0});Gc.ReplayableAudioNode=void 0;class qA{constructor(t,r){this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.privLastChunkAcquiredTime=0,this.privAudioNode=t,this.privBytesPerSecond=r}id(){return this.privAudioNode.id()}read(){if(this.privReplay&&this.privBuffers.length!==0){const t=this.privReplayOffset-this.privBufferStartOffset;let r=Math.round(t*this.privBytesPerSecond*1e-7);r%2!==0&&r++;let n=0;for(;n<this.privBuffers.length&&r>=this.privBuffers[n].chunk.buffer.byteLength;)r-=this.privBuffers[n++].chunk.buffer.byteLength;if(n<this.privBuffers.length){const i=this.privBuffers[n].chunk.buffer.slice(r);return this.privReplayOffset+=i.byteLength/this.privBytesPerSecond*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),Promise.resolve({buffer:i,isEnd:!1,timeReceived:this.privBuffers[n].chunk.timeReceived})}}return this.privAudioNode.read().then(t=>(t&&t.buffer&&this.privBuffers&&(this.privBuffers.push(new UA(t,this.privBufferSerial++,this.privBufferedBytes)),this.privBufferedBytes+=t.buffer.byteLength),t))}detach(){return this.privBuffers=void 0,this.privAudioNode.detach()}replay(){this.privBuffers&&this.privBuffers.length!==0&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)}shrinkBuffers(t){if(this.privBuffers===void 0||this.privBuffers.length===0)return;this.privLastShrinkOffset=t;const r=t-this.privBufferStartOffset;let n=Math.round(r*this.privBytesPerSecond*1e-7),i=0;for(;i<this.privBuffers.length&&n>=this.privBuffers[i].chunk.buffer.byteLength;)n-=this.privBuffers[i++].chunk.buffer.byteLength;this.privBufferStartOffset=Math.round(t-n/this.privBytesPerSecond*1e7),this.privBuffers=this.privBuffers.slice(i)}findTimeAtOffset(t){if(t<this.privBufferStartOffset||this.privBuffers===void 0)return 0;for(const r of this.privBuffers){const n=r.byteOffset/this.privBytesPerSecond*1e7,i=n+r.chunk.buffer.byteLength/this.privBytesPerSecond*1e7;if(t>=n&&t<=i)return r.chunk.timeReceived}return 0}}Gc.ReplayableAudioNode=qA;class UA{constructor(t,r,n){this.chunk=t,this.serial=r,this.byteOffset=n}}var fi={},Tl={},Ot={},Ws={},$A=q&&q.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),WA=q&&q.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),VA=q&&q.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&$A(t,e,r);return WA(t,e),t};Object.defineProperty(Ws,"__esModule",{value:!0});Ws.AudioFileWriter=void 0;const gi=VA(sn),_l=z;class HA{constructor(t){_l.Contracts.throwIfNullOrUndefined(gi.openSync,`
File System access not available, please use Push or PullAudioOutputStream`),this.privFd=gi.openSync(t,"w")}set format(t){_l.Contracts.throwIfNotUndefined(this.privAudioFormat,"format is already set"),this.privAudioFormat=t;let r=0;this.privAudioFormat.hasHeader&&(r=this.privAudioFormat.header.byteLength),this.privFd!==void 0&&(this.privWriteStream=gi.createWriteStream("",{fd:this.privFd,start:r,autoClose:!1}))}write(t){_l.Contracts.throwIfNullOrUndefined(this.privAudioFormat,"must set format before writing."),this.privWriteStream!==void 0&&this.privWriteStream.write(new Uint8Array(t.slice(0)))}close(){this.privFd!==void 0&&(this.privWriteStream.on("finish",()=>{this.privAudioFormat.hasHeader&&(this.privAudioFormat.updateHeader(this.privWriteStream.bytesWritten),gi.writeSync(this.privFd,new Int8Array(this.privAudioFormat.header),0,this.privAudioFormat.header.byteLength,0)),gi.closeSync(this.privFd),this.privFd=void 0}),this.privWriteStream.end())}id(){return this.privId}}Ws.AudioFileWriter=HA;var Je={},$v;function iC(){if($v)return Je;$v=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.PullAudioInputStreamImpl=Je.PullAudioInputStream=Je.PushAudioInputStreamImpl=Je.PushAudioInputStream=Je.AudioInputStream=void 0;const e=O(),t=b(),r=lt,n=T(),i=Ir;let s=class{constructor(){}static createPushStream(p){return a.create(p)}static createPullStream(p,d){return c.create(p,d)}};Je.AudioInputStream=s;class a extends s{static create(p){return new o(p)}}Je.PushAudioInputStream=a;class o extends a{constructor(p){super(),p===void 0?this.privFormat=i.AudioStreamFormatImpl.getDefaultInputFormat():this.privFormat=p,this.privEvents=new t.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privStream=new t.ChunkedArrayBufferStream(this.privFormat.avgBytesPerSec/10)}get format(){return Promise.resolve(this.privFormat)}write(p){this.privStream.writeStreamChunk({buffer:p,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn();const d=this.privStream;return this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:async()=>(this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>d.read()}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PushStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}toBuffer(p){const d=Buffer.alloc(p.byteLength),h=new Uint8Array(p);for(let m=0;m<d.length;++m)d[m]=h[m];return d}}Je.PushAudioInputStreamImpl=o;class c extends s{constructor(){super()}static create(p,d){return new u(p,d)}}Je.PullAudioInputStream=c;class u extends c{constructor(p,d){super(),d===void 0?this.privFormat=n.AudioStreamFormat.getDefaultInputFormat():this.privFormat=d,this.privEvents=new t.EventSource,this.privId=(0,r.createNoDashGuid)(),this.privCallback=p,this.privIsClosed=!1,this.privBufferSize=this.privFormat.avgBytesPerSec/10}get format(){return Promise.resolve(this.privFormat)}close(){this.privIsClosed=!0,this.privCallback.close()}id(){return this.privId}turnOn(){this.onEvent(new t.AudioSourceInitializingEvent(this.privId)),this.onEvent(new t.AudioSourceReadyEvent(this.privId))}async attach(p){return this.onEvent(new t.AudioStreamNodeAttachingEvent(this.privId,p)),await this.turnOn(),this.onEvent(new t.AudioStreamNodeAttachedEvent(this.privId,p)),{detach:()=>(this.privCallback.close(),this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p)),this.turnOff()),id:()=>p,read:()=>{let d=0,h;for(;d<this.privBufferSize;){const m=new ArrayBuffer(this.privBufferSize-d),y=this.privCallback.read(m);if(h===void 0?h=m:new Int8Array(h).set(new Int8Array(m),d),y===0)break;d+=y}return Promise.resolve({buffer:h.slice(0,d),isEnd:this.privIsClosed||d===0,timeReceived:Date.now()})}}}detach(p){this.onEvent(new t.AudioStreamNodeDetachedEvent(this.privId,p))}turnOff(){}get events(){return this.privEvents}get deviceInfo(){return Promise.resolve({bitspersample:this.privFormat.bitsPerSample,channelcount:this.privFormat.channels,connectivity:e.connectivity.Unknown,manufacturer:"Speech SDK",model:"PullStream",samplerate:this.privFormat.samplesPerSec,type:e.type.Stream})}onEvent(p){this.privEvents.onEvent(p),t.Events.instance.onEvent(p)}}return Je.PullAudioInputStreamImpl=u,Je}var Ce={},Tr={},Fd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisOutputFormat=void 0,function(t){t[t.Raw8Khz8BitMonoMULaw=0]="Raw8Khz8BitMonoMULaw",t[t.Riff16Khz16KbpsMonoSiren=1]="Riff16Khz16KbpsMonoSiren",t[t.Audio16Khz16KbpsMonoSiren=2]="Audio16Khz16KbpsMonoSiren",t[t.Audio16Khz32KBitRateMonoMp3=3]="Audio16Khz32KBitRateMonoMp3",t[t.Audio16Khz128KBitRateMonoMp3=4]="Audio16Khz128KBitRateMonoMp3",t[t.Audio16Khz64KBitRateMonoMp3=5]="Audio16Khz64KBitRateMonoMp3",t[t.Audio24Khz48KBitRateMonoMp3=6]="Audio24Khz48KBitRateMonoMp3",t[t.Audio24Khz96KBitRateMonoMp3=7]="Audio24Khz96KBitRateMonoMp3",t[t.Audio24Khz160KBitRateMonoMp3=8]="Audio24Khz160KBitRateMonoMp3",t[t.Raw16Khz16BitMonoTrueSilk=9]="Raw16Khz16BitMonoTrueSilk",t[t.Riff16Khz16BitMonoPcm=10]="Riff16Khz16BitMonoPcm",t[t.Riff8Khz16BitMonoPcm=11]="Riff8Khz16BitMonoPcm",t[t.Riff24Khz16BitMonoPcm=12]="Riff24Khz16BitMonoPcm",t[t.Riff8Khz8BitMonoMULaw=13]="Riff8Khz8BitMonoMULaw",t[t.Raw16Khz16BitMonoPcm=14]="Raw16Khz16BitMonoPcm",t[t.Raw24Khz16BitMonoPcm=15]="Raw24Khz16BitMonoPcm",t[t.Raw8Khz16BitMonoPcm=16]="Raw8Khz16BitMonoPcm",t[t.Ogg16Khz16BitMonoOpus=17]="Ogg16Khz16BitMonoOpus",t[t.Ogg24Khz16BitMonoOpus=18]="Ogg24Khz16BitMonoOpus",t[t.Raw48Khz16BitMonoPcm=19]="Raw48Khz16BitMonoPcm",t[t.Riff48Khz16BitMonoPcm=20]="Riff48Khz16BitMonoPcm",t[t.Audio48Khz96KBitRateMonoMp3=21]="Audio48Khz96KBitRateMonoMp3",t[t.Audio48Khz192KBitRateMonoMp3=22]="Audio48Khz192KBitRateMonoMp3",t[t.Ogg48Khz16BitMonoOpus=23]="Ogg48Khz16BitMonoOpus",t[t.Webm16Khz16BitMonoOpus=24]="Webm16Khz16BitMonoOpus",t[t.Webm24Khz16BitMonoOpus=25]="Webm24Khz16BitMonoOpus",t[t.Raw24Khz16BitMonoTrueSilk=26]="Raw24Khz16BitMonoTrueSilk",t[t.Raw8Khz8BitMonoALaw=27]="Raw8Khz8BitMonoALaw",t[t.Riff8Khz8BitMonoALaw=28]="Riff8Khz8BitMonoALaw",t[t.Webm24Khz16Bit24KbpsMonoOpus=29]="Webm24Khz16Bit24KbpsMonoOpus",t[t.Audio16Khz16Bit32KbpsMonoOpus=30]="Audio16Khz16Bit32KbpsMonoOpus",t[t.Audio24Khz16Bit48KbpsMonoOpus=31]="Audio24Khz16Bit48KbpsMonoOpus",t[t.Audio24Khz16Bit24KbpsMonoOpus=32]="Audio24Khz16Bit24KbpsMonoOpus",t[t.Raw22050Hz16BitMonoPcm=33]="Raw22050Hz16BitMonoPcm",t[t.Riff22050Hz16BitMonoPcm=34]="Riff22050Hz16BitMonoPcm",t[t.Raw44100Hz16BitMonoPcm=35]="Raw44100Hz16BitMonoPcm",t[t.Riff44100Hz16BitMonoPcm=36]="Riff44100Hz16BitMonoPcm",t[t.AmrWb16000Hz=37]="AmrWb16000Hz",t[t.G72216Khz64Kbps=38]="G72216Khz64Kbps"}(e.SpeechSynthesisOutputFormat||(e.SpeechSynthesisOutputFormat={}))})(Fd);Object.defineProperty(Tr,"__esModule",{value:!0});Tr.AudioOutputFormatImpl=void 0;const F=Fd,x=Ir;class N extends x.AudioStreamFormatImpl{constructor(t,r,n,i,s,a,o,c,u){super(n,a,r,t),this.formatTag=t,this.avgBytesPerSec=i,this.blockAlign=s,this.priAudioFormatString=o,this.priRequestAudioFormatString=c,this.priHasHeader=u}static fromSpeechSynthesisOutputFormat(t){return t===void 0?N.getDefaultOutputFormat():N.fromSpeechSynthesisOutputFormatString(N.SpeechSynthesisOutputFormatToString[t])}static fromSpeechSynthesisOutputFormatString(t){switch(t){case"raw-8khz-8bit-mono-mulaw":return new N(x.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,t,!1);case"riff-16khz-16kbps-mono-siren":return new N(x.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,"audio-16khz-16kbps-mono-siren",!0);case"audio-16khz-16kbps-mono-siren":return new N(x.AudioFormatTag.Siren,1,16e3,2e3,40,0,t,t,!1);case"audio-16khz-32kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,16e3,4096,2,16,t,t,!1);case"audio-16khz-128kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,16e3,16384,2,16,t,t,!1);case"audio-16khz-64kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,16e3,8192,2,16,t,t,!1);case"audio-24khz-48kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,24e3,6144,2,16,t,t,!1);case"audio-24khz-96kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,24e3,12288,2,16,t,t,!1);case"audio-24khz-160kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,24e3,20480,2,16,t,t,!1);case"raw-16khz-16bit-mono-truesilk":return new N(x.AudioFormatTag.SILKSkype,1,16e3,32e3,2,16,t,t,!1);case"riff-8khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!0);case"riff-24khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!0);case"riff-8khz-8bit-mono-mulaw":return new N(x.AudioFormatTag.MuLaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-mulaw",!0);case"raw-16khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,16e3,32e3,2,16,t,"raw-16khz-16bit-mono-pcm",!1);case"raw-24khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,24e3,48e3,2,16,t,"raw-24khz-16bit-mono-pcm",!1);case"raw-8khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,8e3,16e3,2,16,t,"raw-8khz-16bit-mono-pcm",!1);case"ogg-16khz-16bit-mono-opus":return new N(x.AudioFormatTag.OGG_OPUS,1,16e3,8192,2,16,t,t,!1);case"ogg-24khz-16bit-mono-opus":return new N(x.AudioFormatTag.OGG_OPUS,1,24e3,8192,2,16,t,t,!1);case"raw-48khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!1);case"riff-48khz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,48e3,96e3,2,16,t,"raw-48khz-16bit-mono-pcm",!0);case"audio-48khz-96kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,48e3,12288,2,16,t,t,!1);case"audio-48khz-192kbitrate-mono-mp3":return new N(x.AudioFormatTag.MP3,1,48e3,24576,2,16,t,t,!1);case"ogg-48khz-16bit-mono-opus":return new N(x.AudioFormatTag.OGG_OPUS,1,48e3,12e3,2,16,t,t,!1);case"webm-16khz-16bit-mono-opus":return new N(x.AudioFormatTag.WEBM_OPUS,1,16e3,4e3,2,16,t,t,!1);case"webm-24khz-16bit-mono-opus":return new N(x.AudioFormatTag.WEBM_OPUS,1,24e3,6e3,2,16,t,t,!1);case"webm-24khz-16bit-24kbps-mono-opus":return new N(x.AudioFormatTag.WEBM_OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-16khz-16bit-32kbps-mono-opus":return new N(x.AudioFormatTag.OPUS,1,16e3,4e3,2,16,t,t,!1);case"audio-24khz-16bit-48kbps-mono-opus":return new N(x.AudioFormatTag.OPUS,1,24e3,6e3,2,16,t,t,!1);case"audio-24khz-16bit-24kbps-mono-opus":return new N(x.AudioFormatTag.OPUS,1,24e3,3e3,2,16,t,t,!1);case"audio-24khz-16bit-mono-flac":return new N(x.AudioFormatTag.FLAC,1,24e3,24e3,2,16,t,t,!1);case"audio-48khz-16bit-mono-flac":return new N(x.AudioFormatTag.FLAC,1,48e3,3e4,2,16,t,t,!1);case"raw-24khz-16bit-mono-truesilk":return new N(x.AudioFormatTag.SILKSkype,1,24e3,48e3,2,16,t,t,!1);case"raw-8khz-8bit-mono-alaw":return new N(x.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,t,!1);case"riff-8khz-8bit-mono-alaw":return new N(x.AudioFormatTag.ALaw,1,8e3,8e3,1,8,t,"raw-8khz-8bit-mono-alaw",!0);case"raw-22050hz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,22050,44100,2,16,t,t,!1);case"riff-22050hz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,22050,44100,2,16,t,"raw-22050hz-16bit-mono-pcm",!0);case"raw-44100hz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,44100,88200,2,16,t,t,!1);case"riff-44100hz-16bit-mono-pcm":return new N(x.AudioFormatTag.PCM,1,44100,88200,2,16,t,"raw-44100hz-16bit-mono-pcm",!0);case"amr-wb-16000h":return new N(x.AudioFormatTag.AMR_WB,1,16e3,3052,2,16,t,t,!1);case"g722-16khz-64kbps":return new N(x.AudioFormatTag.G722,1,16e3,8e3,2,16,t,t,!1);case"riff-16khz-16bit-mono-pcm":default:return new N(x.AudioFormatTag.PCM,1,16e3,32e3,2,16,"riff-16khz-16bit-mono-pcm","raw-16khz-16bit-mono-pcm",!0)}}static getDefaultOutputFormat(){return N.fromSpeechSynthesisOutputFormatString(typeof window<"u"?"audio-24khz-48kbitrate-mono-mp3":"riff-16khz-16bit-mono-pcm")}get hasHeader(){return this.priHasHeader}get header(){if(this.hasHeader)return this.privHeader}updateHeader(t){if(this.priHasHeader){const r=new DataView(this.privHeader);r.setUint32(4,t+this.privHeader.byteLength-8,!0),r.setUint32(40,t,!0)}}get requestAudioFormatString(){return this.priRequestAudioFormatString}addHeader(t){if(!this.hasHeader)return t;this.updateHeader(t.byteLength);const r=new Uint8Array(t.byteLength+this.header.byteLength);return r.set(new Uint8Array(this.header),0),r.set(new Uint8Array(t),this.header.byteLength),r.buffer}}Tr.AudioOutputFormatImpl=N;N.SpeechSynthesisOutputFormatToString={[F.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoMULaw]:"raw-8khz-8bit-mono-mulaw",[F.SpeechSynthesisOutputFormat.Riff16Khz16KbpsMonoSiren]:"riff-16khz-16kbps-mono-siren",[F.SpeechSynthesisOutputFormat.Audio16Khz16KbpsMonoSiren]:"audio-16khz-16kbps-mono-siren",[F.SpeechSynthesisOutputFormat.Audio16Khz32KBitRateMonoMp3]:"audio-16khz-32kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio16Khz128KBitRateMonoMp3]:"audio-16khz-128kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio16Khz64KBitRateMonoMp3]:"audio-16khz-64kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz48KBitRateMonoMp3]:"audio-24khz-48kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz96KBitRateMonoMp3]:"audio-24khz-96kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio24Khz160KBitRateMonoMp3]:"audio-24khz-160kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoTrueSilk]:"raw-16khz-16bit-mono-truesilk",[F.SpeechSynthesisOutputFormat.Riff16Khz16BitMonoPcm]:"riff-16khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff8Khz16BitMonoPcm]:"riff-8khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm]:"riff-24khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoMULaw]:"riff-8khz-8bit-mono-mulaw",[F.SpeechSynthesisOutputFormat.Raw16Khz16BitMonoPcm]:"raw-16khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoPcm]:"raw-24khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw8Khz16BitMonoPcm]:"raw-8khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Ogg16Khz16BitMonoOpus]:"ogg-16khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Ogg24Khz16BitMonoOpus]:"ogg-24khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Raw48Khz16BitMonoPcm]:"raw-48khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff48Khz16BitMonoPcm]:"riff-48khz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Audio48Khz96KBitRateMonoMp3]:"audio-48khz-96kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Audio48Khz192KBitRateMonoMp3]:"audio-48khz-192kbitrate-mono-mp3",[F.SpeechSynthesisOutputFormat.Ogg48Khz16BitMonoOpus]:"ogg-48khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm16Khz16BitMonoOpus]:"webm-16khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm24Khz16BitMonoOpus]:"webm-24khz-16bit-mono-opus",[F.SpeechSynthesisOutputFormat.Webm24Khz16Bit24KbpsMonoOpus]:"webm-24khz-16bit-24kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Raw24Khz16BitMonoTrueSilk]:"raw-24khz-16bit-mono-truesilk",[F.SpeechSynthesisOutputFormat.Raw8Khz8BitMonoALaw]:"raw-8khz-8bit-mono-alaw",[F.SpeechSynthesisOutputFormat.Riff8Khz8BitMonoALaw]:"riff-8khz-8bit-mono-alaw",[F.SpeechSynthesisOutputFormat.Audio16Khz16Bit32KbpsMonoOpus]:"audio-16khz-16bit-32kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Audio24Khz16Bit48KbpsMonoOpus]:"audio-24khz-16bit-48kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Audio24Khz16Bit24KbpsMonoOpus]:"audio-24khz-16bit-24kbps-mono-opus",[F.SpeechSynthesisOutputFormat.Raw22050Hz16BitMonoPcm]:"raw-22050hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff22050Hz16BitMonoPcm]:"riff-22050hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Raw44100Hz16BitMonoPcm]:"raw-44100hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.Riff44100Hz16BitMonoPcm]:"riff-44100hz-16bit-mono-pcm",[F.SpeechSynthesisOutputFormat.AmrWb16000Hz]:"amr-wb-16000hz",[F.SpeechSynthesisOutputFormat.G72216Khz64Kbps]:"g722-16khz-64kbps"};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.PushAudioOutputStreamImpl=Ce.PushAudioOutputStream=Ce.PullAudioOutputStreamImpl=Ce.PullAudioOutputStream=Ce.AudioOutputStream=void 0;const Op=b(),KA=z,JA=Tr;class qd{constructor(){}static createPullStream(){return Ud.create()}}Ce.AudioOutputStream=qd;class Ud extends qd{static create(){return new oC}}Ce.PullAudioOutputStream=Ud;class oC extends Ud{constructor(){super(),this.privId=(0,Op.createNoDashGuid)(),this.privStream=new Op.Stream}set format(t){t==null&&(this.privFormat=JA.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privFormat=t}get format(){return this.privFormat}get isClosed(){return this.privStream.isClosed}id(){return this.privId}async read(t){const r=new Int8Array(t);let n=0;if(this.privLastChunkView!==void 0){if(this.privLastChunkView.length>t.byteLength)return r.set(this.privLastChunkView.slice(0,t.byteLength)),this.privLastChunkView=this.privLastChunkView.slice(t.byteLength),Promise.resolve(t.byteLength);r.set(this.privLastChunkView),n=this.privLastChunkView.length,this.privLastChunkView=void 0}for(;n<t.byteLength&&!this.privStream.isReadEnded;){const i=await this.privStream.read();if(i!==void 0&&!i.isEnd){let s;i.buffer.byteLength>t.byteLength-n?(s=i.buffer.slice(0,t.byteLength-n),this.privLastChunkView=new Int8Array(i.buffer.slice(t.byteLength-n))):s=i.buffer,r.set(new Int8Array(s),n),n+=s.byteLength}else this.privStream.readEnded()}return n}write(t){KA.Contracts.throwIfNullOrUndefined(this.privStream,"must set format before writing"),this.privStream.writeStreamChunk({buffer:t,isEnd:!1,timeReceived:Date.now()})}close(){this.privStream.close()}}Ce.PullAudioOutputStreamImpl=oC;class sC extends qd{constructor(){super()}static create(t){return new aC(t)}}Ce.PushAudioOutputStream=sC;class aC extends sC{constructor(t){super(),this.privId=(0,Op.createNoDashGuid)(),this.privCallback=t}set format(t){}write(t){this.privCallback.write&&this.privCallback.write(t)}close(){this.privCallback.close&&this.privCallback.close()}id(){return this.privId}}Ce.PushAudioOutputStreamImpl=aC;var Wv;function uC(){if(Wv)return Ot;Wv=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.AudioOutputConfigImpl=Ot.AudioConfigImpl=Ot.AudioConfig=void 0;const e=ge(),t=z,r=T(),n=Ws,i=iC(),s=Ce;let a=class cC{static fromDefaultMicrophoneInput(){const l=new e.PcmRecorder(!0);return new o(new e.MicAudioSource(l))}static fromMicrophoneInput(l){const p=new e.PcmRecorder(!0);return new o(new e.MicAudioSource(p,l))}static fromWavFileInput(l,p="unnamedBuffer.wav"){return new o(new e.FileAudioSource(l,p))}static fromStreamInput(l){if(l instanceof r.PullAudioInputStreamCallback)return new o(new i.PullAudioInputStreamImpl(l));if(l instanceof r.AudioInputStream)return new o(l);if(typeof MediaStream<"u"&&l instanceof MediaStream){const p=new e.PcmRecorder(!1);return new o(new e.MicAudioSource(p,null,null,l))}throw new Error("Not Supported Type")}static fromDefaultSpeakerOutput(){return new c(new r.SpeakerAudioDestination)}static fromSpeakerOutput(l){if(l===void 0)return cC.fromDefaultSpeakerOutput();if(l instanceof r.SpeakerAudioDestination)return new c(l);throw new Error("Not Supported Type")}static fromAudioFileOutput(l){return new c(new n.AudioFileWriter(l))}static fromStreamOutput(l){if(l instanceof r.PushAudioOutputStreamCallback)return new c(new s.PushAudioOutputStreamImpl(l));if(l instanceof r.PushAudioOutputStream)return new c(l);if(l instanceof r.PullAudioOutputStream)return new c(l);throw new Error("Not Supported Type")}};Ot.AudioConfig=a;class o extends a{constructor(l){super(),this.privSource=l}get format(){return this.privSource.format}close(l,p){this.privSource.turnOff().then(()=>{l&&l()},d=>{p&&p(d)})}id(){return this.privSource.id()}turnOn(){return this.privSource.turnOn()}attach(l){return this.privSource.attach(l)}detach(l){return this.privSource.detach(l)}turnOff(){return this.privSource.turnOff()}get events(){return this.privSource.events}setProperty(l,p){if(t.Contracts.throwIfNull(p,"value"),this.privSource.setProperty!==void 0)this.privSource.setProperty(l,p);else throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(l,p){if(this.privSource.getProperty!==void 0)return this.privSource.getProperty(l,p);throw new Error("This AudioConfig instance does not support getting properties.")}get deviceInfo(){return this.privSource.deviceInfo}}Ot.AudioConfigImpl=o;class c extends a{constructor(l){super(),this.privDestination=l}set format(l){this.privDestination.format=l}write(l){this.privDestination.write(l)}close(){this.privDestination.close()}id(){return this.privDestination.id()}setProperty(){throw new Error("This AudioConfig instance does not support setting properties.")}getProperty(){throw new Error("This AudioConfig instance does not support getting properties.")}}return Ot.AudioOutputConfigImpl=c,Ot}var lC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationReason=void 0,function(t){t[t.Error=0]="Error",t[t.EndOfStream=1]="EndOfStream"}(e.CancellationReason||(e.CancellationReason={}))})(lC);var Qc={};Object.defineProperty(Qc,"__esModule",{value:!0});Qc.PullAudioInputStreamCallback=void 0;class GA{}Qc.PullAudioInputStreamCallback=GA;var Yc={};Object.defineProperty(Yc,"__esModule",{value:!0});Yc.PushAudioOutputStreamCallback=void 0;class QA{}Yc.PushAudioOutputStreamCallback=QA;var Xc={};Object.defineProperty(Xc,"__esModule",{value:!0});Xc.KeywordRecognitionModel=void 0;const Vv=z;class YA{constructor(){this.privDisposed=!1}static fromFile(t){throw Vv.Contracts.throwIfFileDoesNotExist(t,"fileName"),new Error("Not yet implemented.")}static fromStream(t){throw Vv.Contracts.throwIfNull(t,"file"),new Error("Not yet implemented.")}close(){this.privDisposed||(this.privDisposed=!0)}}Xc.KeywordRecognitionModel=YA;var Zc={};Object.defineProperty(Zc,"__esModule",{value:!0});Zc.SessionEventArgs=void 0;class XA{constructor(t){this.privSessionId=t}get sessionId(){return this.privSessionId}}Zc.SessionEventArgs=XA;var mi={},Hv;function ZA(){if(Hv)return mi;Hv=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.RecognitionEventArgs=void 0;const e=T();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privOffset=n}get offset(){return this.privOffset}};return mi.RecognitionEventArgs=t,mi}var pC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputFormat=void 0,function(t){t[t.Simple=0]="Simple",t[t.Detailed=1]="Detailed"}(e.OutputFormat||(e.OutputFormat={}))})(pC);var yi={},Kv;function e0(){if(Kv)return yi;Kv=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.IntentRecognitionEventArgs=void 0;const e=T();let t=class extends e.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return yi.IntentRecognitionEventArgs=t,yi}var eu={};Object.defineProperty(eu,"__esModule",{value:!0});eu.RecognitionResult=void 0;class t0{constructor(t,r,n,i,s,a,o,c,u,l){this.privResultId=t,this.privReason=r,this.privText=n,this.privDuration=i,this.privOffset=s,this.privLanguage=a,this.privLanguageDetectionConfidence=o,this.privErrorDetails=c,this.privJson=u,this.privProperties=l}get resultId(){return this.privResultId}get reason(){return this.privReason}get text(){return this.privText}get duration(){return this.privDuration}get offset(){return this.privOffset}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}get errorDetails(){return this.privErrorDetails}get json(){return this.privJson}get properties(){return this.privProperties}}eu.RecognitionResult=t0;var Si={},Jv;function r0(){if(Jv)return Si;Jv=1,Object.defineProperty(Si,"__esModule",{value:!0}),Si.SpeechRecognitionResult=void 0;const e=T();let t=class extends e.RecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(n,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return Si.SpeechRecognitionResult=t,Si}var Ci={},Gv;function n0(){if(Gv)return Ci;Gv=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.IntentRecognitionResult=void 0;const e=T();let t=class extends e.SpeechRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privIntentId=n}get intentId(){return this.privIntentId}};return Ci.IntentRecognitionResult=t,Ci}var jn={};Object.defineProperty(jn,"__esModule",{value:!0});jn.LanguageUnderstandingModelImpl=jn.LanguageUnderstandingModel=void 0;const ln=z;class dC{constructor(){}static fromEndpoint(t){ln.Contracts.throwIfNull(t,"uri"),ln.Contracts.throwIfNullOrWhitespace(t.hostname,"uri");const r=new Oa,n=t.host.indexOf(".");if(n===-1)throw new Error("Could not determine region from endpoint");r.region=t.host.substr(0,n);const i=t.pathname.lastIndexOf("/")+1;if(i===-1)throw new Error("Could not determine appId from endpoint");if(r.appId=t.pathname.substr(i),r.subscriptionKey=t.searchParams.get("subscription-key"),r.subscriptionKey===void 0)throw new Error("Could not determine subscription key from endpoint");return r}static fromAppId(t){ln.Contracts.throwIfNullOrWhitespace(t,"appId");const r=new Oa;return r.appId=t,r}static fromSubscription(t,r,n){ln.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey"),ln.Contracts.throwIfNullOrWhitespace(r,"appId"),ln.Contracts.throwIfNullOrWhitespace(n,"region");const i=new Oa;return i.appId=r,i.region=n,i.subscriptionKey=t,i}}jn.LanguageUnderstandingModel=dC;class Oa extends dC{}jn.LanguageUnderstandingModelImpl=Oa;var Dt={},Qv;function i0(){if(Qv)return Dt;Qv=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.MeetingTranscriptionEventArgs=Dt.ConversationTranscriptionEventArgs=Dt.SpeechRecognitionEventArgs=void 0;const e=T();let t=class extends e.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}};Dt.SpeechRecognitionEventArgs=t;class r extends e.RecognitionEventArgs{constructor(s,a,o){super(a,o),this.privResult=s}get result(){return this.privResult}}Dt.ConversationTranscriptionEventArgs=r;class n extends t{}return Dt.MeetingTranscriptionEventArgs=n,Dt}var Pi={},Ri={},Yv;function Vs(){if(Yv)return Ri;Yv=1,Object.defineProperty(Ri,"__esModule",{value:!0}),Ri.CancellationEventArgsBase=void 0;const e=T();let t=class extends e.RecognitionEventArgs{constructor(n,i,s,a,o){super(a,o),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Ri.CancellationEventArgsBase=t,Ri}var Xv;function o0(){if(Xv)return Pi;Xv=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.SpeechRecognitionCanceledEventArgs=void 0;const e=Vs();let t=class extends e.CancellationEventArgsBase{};return Pi.SpeechRecognitionCanceledEventArgs=t,Pi}var Ei={},Zv;function s0(){if(Zv)return Ei;Zv=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.TranslationRecognitionEventArgs=void 0;const e=T();let t=class extends e.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Ei.TranslationRecognitionEventArgs=t,Ei}var wi={},ef;function a0(){if(ef)return wi;ef=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.TranslationSynthesisEventArgs=void 0;const e=T();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privResult=n}get result(){return this.privResult}};return wi.TranslationSynthesisEventArgs=t,wi}var Ii={},tf;function vC(){if(tf)return Ii;tf=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.TranslationRecognitionResult=void 0;const e=T();let t=class hC extends e.SpeechRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,s,a,o,c,u,l,void 0,p,d,h),this.privTranslations=n}static fromSpeechRecognitionResult(n){return new hC(void 0,n.resultId,n.reason,n.text,n.duration,n.offset,n.language,n.languageDetectionConfidence,n.errorDetails,n.json,n.properties)}get translations(){return this.privTranslations}};return Ii.TranslationRecognitionResult=t,Ii}var tu={};Object.defineProperty(tu,"__esModule",{value:!0});tu.TranslationSynthesisResult=void 0;class c0{constructor(t,r){this.privReason=t,this.privAudio=r}get audio(){return this.privAudio}get reason(){return this.privReason}}tu.TranslationSynthesisResult=c0;var fC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultReason=void 0,function(t){t[t.NoMatch=0]="NoMatch",t[t.Canceled=1]="Canceled",t[t.RecognizingSpeech=2]="RecognizingSpeech",t[t.RecognizedSpeech=3]="RecognizedSpeech",t[t.RecognizedKeyword=4]="RecognizedKeyword",t[t.RecognizingIntent=5]="RecognizingIntent",t[t.RecognizedIntent=6]="RecognizedIntent",t[t.TranslatingSpeech=7]="TranslatingSpeech",t[t.TranslatedSpeech=8]="TranslatedSpeech",t[t.SynthesizingAudio=9]="SynthesizingAudio",t[t.SynthesizingAudioCompleted=10]="SynthesizingAudioCompleted",t[t.SynthesizingAudioStarted=11]="SynthesizingAudioStarted",t[t.EnrollingVoiceProfile=12]="EnrollingVoiceProfile",t[t.EnrolledVoiceProfile=13]="EnrolledVoiceProfile",t[t.RecognizedSpeakers=14]="RecognizedSpeakers",t[t.RecognizedSpeaker=15]="RecognizedSpeaker",t[t.ResetVoiceProfile=16]="ResetVoiceProfile",t[t.DeletedVoiceProfile=17]="DeletedVoiceProfile",t[t.VoicesListRetrieved=18]="VoicesListRetrieved",t[t.TranslatingParticipantSpeech=19]="TranslatingParticipantSpeech",t[t.TranslatedParticipantSpeech=20]="TranslatedParticipantSpeech",t[t.TranslatedInstantMessage=21]="TranslatedInstantMessage",t[t.TranslatedParticipantInstantMessage=22]="TranslatedParticipantInstantMessage"}(e.ResultReason||(e.ResultReason={}))})(fC);var _r={},rf;function u0(){if(rf)return _r;rf=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.SpeechConfigImpl=_r.SpeechConfig=void 0;const e=O(),t=z,r=T();let n=class{constructor(){}static fromSubscription(a,o){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,o),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c}static fromEndpoint(a,o){t.Contracts.throwIfNull(a,"endpoint");const c=typeof o=="string"&&o.trim().length>0,u=typeof o=="object"&&o!==null&&typeof o.getToken=="function";if(o!==void 0&&!c&&!u)throw new Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");const l=typeof o=="object"?new i(o):new i;return l.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),typeof o=="string"&&o.trim().length>0&&l.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),l}static fromHost(a,o){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),c.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromAuthorizationToken(a,o){t.Contracts.throwIfNull(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c.setProperty(r.PropertyId.SpeechServiceConnection_IntentRegion,o),c.authorizationToken=a,c}close(){}};_r.SpeechConfig=n;class i extends n{constructor(a){super(),this.privProperties=new r.PropertyCollection,this.speechRecognitionLanguage="en-US",this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=a}get properties(){return this.privProperties}get endPoint(){return new URL(this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint))}get subscriptionKey(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Key)}get region(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get authorizationToken(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}get speechRecognitionLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}set speechRecognitionLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get autoDetectSourceLanguages(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)}set autoDetectSourceLanguages(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a)}get outputFormat(){return r.OutputFormat[this.privProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}get tokenCredential(){return this.privTokenCredential}setProperty(a,o){t.Contracts.throwIfNull(o,"value"),this.privProperties.setProperty(a,o)}getProperty(a,o){return this.privProperties.getProperty(a,o)}setProxy(a,o,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}setServiceProperty(a,o){const c=JSON.parse(this.privProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true"),this.privProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Detailed])}enableDictation(){this.privProperties.setProperty(e.ForceDictationPropertyName,"true")}clone(){const a=new i(this.tokenCredential);return a.privProperties=this.privProperties.clone(),a}get speechSynthesisLanguage(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return _r.SpeechConfigImpl=i,_r}var Ar={},nf;function l0(){if(nf)return Ar;nf=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.SpeechTranslationConfigImpl=Ar.SpeechTranslationConfig=void 0;const e=O(),t=z,r=T();let n=class extends r.SpeechConfig{constructor(){super()}static fromSubscription(a,o){t.Contracts.throwIfNullOrWhitespace(a,"subscriptionKey"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(a,o){t.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),t.Contracts.throwIfNullOrWhitespace(o,"region");const c=new i;return c.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.properties.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromHost(a,o){t.Contracts.throwIfNull(a,"hostName");const c=new i;return c.setProperty(r.PropertyId.SpeechServiceConnection_Host,a.protocol+"//"+a.hostname+(a.port===""?"":":"+a.port)),o!==void 0&&c.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),c}static fromEndpoint(a,o){t.Contracts.throwIfNull(a,"endpoint");const c=typeof o=="string"&&o.trim().length>0,u=typeof o=="object"&&o!==null&&typeof o.getToken=="function";if(o!==void 0&&!c&&!u)throw new Error("Invalid 'auth' parameter: must be a non-empty key string or a valid TokenCredential object.");const l=typeof o=="object"?new i(o):new i;return l.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,a.href),typeof o=="string"&&o.trim().length>0&&l.setProperty(r.PropertyId.SpeechServiceConnection_Key,o),l}};Ar.SpeechTranslationConfig=n;class i extends n{constructor(a){super(),this.privSpeechProperties=new r.PropertyCollection,this.outputFormat=r.OutputFormat.Simple,this.privTokenCredential=a}set authorizationToken(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a)}set speechRecognitionLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,a)}get speechRecognitionLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage])}get subscriptionKey(){return this.privSpeechProperties.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_Key])}get outputFormat(){return r.OutputFormat[this.privSpeechProperties.getProperty(e.OutputFormatPropertyName,void 0)]}set outputFormat(a){this.privSpeechProperties.setProperty(e.OutputFormatPropertyName,r.OutputFormat[a])}get endpointId(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId)}set endpointId(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EndpointId,a)}addTargetLanguage(a){t.Contracts.throwIfNullOrWhitespace(a,"value");const o=this.targetLanguages;o.includes(a)||(o.push(a),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,o.join(",")))}get targetLanguages(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]}get voiceName(){return this.getProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_TranslationVoice])}set voiceName(a){t.Contracts.throwIfNullOrWhitespace(a,"value"),this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,a)}get region(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_Region)}get tokenCredential(){return this.privTokenCredential}setProxy(a,o,c,u){this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyHostName],a),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPort],o),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyUserName],c),this.setProperty(r.PropertyId[r.PropertyId.SpeechServiceConnection_ProxyPassword],u)}getProperty(a,o){return this.privSpeechProperties.getProperty(a,o)}setProperty(a,o){this.privSpeechProperties.setProperty(a,o)}get properties(){return this.privSpeechProperties}close(){}setServiceProperty(a,o){const c=JSON.parse(this.privSpeechProperties.getProperty(e.ServicePropertiesPropertyName,"{}"));c[a]=o,this.privSpeechProperties.setProperty(e.ServicePropertiesPropertyName,JSON.stringify(c))}setProfanity(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_ProfanityOption,r.ProfanityOption[a])}enableAudioLogging(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_EnableAudioLogging,"true")}requestWordLevelTimestamps(){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"true")}enableDictation(){this.privSpeechProperties.setProperty(e.ForceDictationPropertyName,"true")}get speechSynthesisLanguage(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage)}set speechSynthesisLanguage(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthLanguage,a)}get speechSynthesisVoiceName(){return this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthVoice)}set speechSynthesisVoiceName(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthVoice,a)}get speechSynthesisOutputFormat(){return r.SpeechSynthesisOutputFormat[this.privSpeechProperties.getProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)]}set speechSynthesisOutputFormat(a){this.privSpeechProperties.setProperty(r.PropertyId.SpeechServiceConnection_SynthOutputFormat,r.SpeechSynthesisOutputFormat[a])}}return Ar.SpeechTranslationConfigImpl=i,Ar}var Ti={},of;function mC(){if(of)return Ti;of=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.PropertyCollection=void 0;const e=T();let t=class gC{constructor(){this.privKeys=[],this.privValues=[]}getProperty(n,i){let s;typeof n=="string"?s=n:s=e.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s)return this.privValues[a];if(i!==void 0)return String(i)}setProperty(n,i){let s;typeof n=="string"?s=n:s=e.PropertyId[n];for(let a=0;a<this.privKeys.length;a++)if(this.privKeys[a]===s){this.privValues[a]=i;return}this.privKeys.push(s),this.privValues.push(i)}clone(){const n=new gC;for(let i=0;i<this.privKeys.length;i++)n.privKeys.push(this.privKeys[i]),n.privValues.push(this.privValues[i]);return n}mergeTo(n){this.privKeys.forEach(i=>{if(n.getProperty(i,void 0)===void 0){const s=this.getProperty(i);n.setProperty(i,s)}})}get keys(){return this.privKeys}};return Ti.PropertyCollection=t,Ti}var ru={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyId=void 0,function(t){t[t.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",t[t.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",t[t.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",t[t.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",t[t.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",t[t.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",t[t.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",t[t.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",t[t.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",t[t.SpeechServiceConnection_TranslationCategoryId=9]="SpeechServiceConnection_TranslationCategoryId",t[t.SpeechServiceConnection_IntentRegion=10]="SpeechServiceConnection_IntentRegion",t[t.SpeechServiceConnection_ProxyHostName=11]="SpeechServiceConnection_ProxyHostName",t[t.SpeechServiceConnection_ProxyPort=12]="SpeechServiceConnection_ProxyPort",t[t.SpeechServiceConnection_ProxyUserName=13]="SpeechServiceConnection_ProxyUserName",t[t.SpeechServiceConnection_ProxyPassword=14]="SpeechServiceConnection_ProxyPassword",t[t.SpeechServiceConnection_RecoMode=15]="SpeechServiceConnection_RecoMode",t[t.SpeechServiceConnection_RecoLanguage=16]="SpeechServiceConnection_RecoLanguage",t[t.Speech_SessionId=17]="Speech_SessionId",t[t.SpeechServiceConnection_SynthLanguage=18]="SpeechServiceConnection_SynthLanguage",t[t.SpeechServiceConnection_SynthVoice=19]="SpeechServiceConnection_SynthVoice",t[t.SpeechServiceConnection_SynthOutputFormat=20]="SpeechServiceConnection_SynthOutputFormat",t[t.SpeechServiceConnection_AutoDetectSourceLanguages=21]="SpeechServiceConnection_AutoDetectSourceLanguages",t[t.SpeechServiceResponse_RequestDetailedResultTrueFalse=22]="SpeechServiceResponse_RequestDetailedResultTrueFalse",t[t.SpeechServiceResponse_RequestProfanityFilterTrueFalse=23]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",t[t.SpeechServiceResponse_JsonResult=24]="SpeechServiceResponse_JsonResult",t[t.SpeechServiceResponse_JsonErrorDetails=25]="SpeechServiceResponse_JsonErrorDetails",t[t.CancellationDetails_Reason=26]="CancellationDetails_Reason",t[t.CancellationDetails_ReasonText=27]="CancellationDetails_ReasonText",t[t.CancellationDetails_ReasonDetailedText=28]="CancellationDetails_ReasonDetailedText",t[t.LanguageUnderstandingServiceResponse_JsonResult=29]="LanguageUnderstandingServiceResponse_JsonResult",t[t.SpeechServiceConnection_Url=30]="SpeechServiceConnection_Url",t[t.SpeechServiceConnection_InitialSilenceTimeoutMs=31]="SpeechServiceConnection_InitialSilenceTimeoutMs",t[t.SpeechServiceConnection_EndSilenceTimeoutMs=32]="SpeechServiceConnection_EndSilenceTimeoutMs",t[t.Speech_SegmentationSilenceTimeoutMs=33]="Speech_SegmentationSilenceTimeoutMs",t[t.Speech_SegmentationMaximumTimeMs=34]="Speech_SegmentationMaximumTimeMs",t[t.Speech_SegmentationStrategy=35]="Speech_SegmentationStrategy",t[t.SpeechServiceConnection_EnableAudioLogging=36]="SpeechServiceConnection_EnableAudioLogging",t[t.SpeechServiceConnection_LanguageIdMode=37]="SpeechServiceConnection_LanguageIdMode",t[t.SpeechServiceConnection_RecognitionEndpointVersion=38]="SpeechServiceConnection_RecognitionEndpointVersion",t[t.SpeechServiceConnection_SpeakerIdMode=39]="SpeechServiceConnection_SpeakerIdMode",t[t.SpeechServiceResponse_ProfanityOption=40]="SpeechServiceResponse_ProfanityOption",t[t.SpeechServiceResponse_PostProcessingOption=41]="SpeechServiceResponse_PostProcessingOption",t[t.SpeechServiceResponse_RequestWordLevelTimestamps=42]="SpeechServiceResponse_RequestWordLevelTimestamps",t[t.SpeechServiceResponse_StablePartialResultThreshold=43]="SpeechServiceResponse_StablePartialResultThreshold",t[t.SpeechServiceResponse_OutputFormatOption=44]="SpeechServiceResponse_OutputFormatOption",t[t.SpeechServiceResponse_TranslationRequestStablePartialResult=45]="SpeechServiceResponse_TranslationRequestStablePartialResult",t[t.SpeechServiceResponse_RequestWordBoundary=46]="SpeechServiceResponse_RequestWordBoundary",t[t.SpeechServiceResponse_RequestPunctuationBoundary=47]="SpeechServiceResponse_RequestPunctuationBoundary",t[t.SpeechServiceResponse_RequestSentenceBoundary=48]="SpeechServiceResponse_RequestSentenceBoundary",t[t.SpeechServiceResponse_DiarizeIntermediateResults=49]="SpeechServiceResponse_DiarizeIntermediateResults",t[t.Conversation_ApplicationId=50]="Conversation_ApplicationId",t[t.Conversation_DialogType=51]="Conversation_DialogType",t[t.Conversation_Initial_Silence_Timeout=52]="Conversation_Initial_Silence_Timeout",t[t.Conversation_From_Id=53]="Conversation_From_Id",t[t.Conversation_Conversation_Id=54]="Conversation_Conversation_Id",t[t.Conversation_Custom_Voice_Deployment_Ids=55]="Conversation_Custom_Voice_Deployment_Ids",t[t.Conversation_Speech_Activity_Template=56]="Conversation_Speech_Activity_Template",t[t.Conversation_Request_Bot_Status_Messages=57]="Conversation_Request_Bot_Status_Messages",t[t.Conversation_Agent_Connection_Id=58]="Conversation_Agent_Connection_Id",t[t.SpeechServiceConnection_Host=59]="SpeechServiceConnection_Host",t[t.ConversationTranslator_Host=60]="ConversationTranslator_Host",t[t.ConversationTranslator_Name=61]="ConversationTranslator_Name",t[t.ConversationTranslator_CorrelationId=62]="ConversationTranslator_CorrelationId",t[t.ConversationTranslator_Token=63]="ConversationTranslator_Token",t[t.PronunciationAssessment_ReferenceText=64]="PronunciationAssessment_ReferenceText",t[t.PronunciationAssessment_GradingSystem=65]="PronunciationAssessment_GradingSystem",t[t.PronunciationAssessment_Granularity=66]="PronunciationAssessment_Granularity",t[t.PronunciationAssessment_EnableMiscue=67]="PronunciationAssessment_EnableMiscue",t[t.PronunciationAssessment_Json=68]="PronunciationAssessment_Json",t[t.PronunciationAssessment_Params=69]="PronunciationAssessment_Params",t[t.SpeakerRecognition_Api_Version=70]="SpeakerRecognition_Api_Version",t[t.WebWorkerLoadType=71]="WebWorkerLoadType",t[t.TalkingAvatarService_WebRTC_SDP=72]="TalkingAvatarService_WebRTC_SDP"}(e.PropertyId||(e.PropertyId={}))})(ru);var _i={},sf;function p0(){if(sf)return _i;sf=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.Recognizer=void 0;const e=O(),t=b(),r=z,n=T();let i=class yC{constructor(a,o,c,u){this.audioConfig=a!==void 0?a:n.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1,this.privProperties=o.clone(),this.privConnectionFactory=c,this.tokenCredential=u,this.implCommonRecognizerSetup()}close(a,o){r.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),a,o)}get internalData(){return this.privReco}async dispose(a){this.privDisposed||(this.privDisposed=!0,a&&this.privReco&&(await this.privReco.audioSource.turnOff(),await this.privReco.dispose()))}static get telemetryEnabled(){return e.ServiceRecognizerBase.telemetryDataEnabled}static enableTelemetry(a){e.ServiceRecognizerBase.telemetryDataEnabled=a}implCommonRecognizerSetup(){let a=typeof window<"u"?"Browser":"Node",o="unknown",c="unknown";typeof navigator<"u"&&(a=a+"/"+navigator.platform,o=navigator.userAgent,c=navigator.appVersion);const u=this.createRecognizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(a,o,c))));this.privReco=this.createServiceRecognizer(yC.getAuth(this.privProperties,this.tokenCredential),this.privConnectionFactory,this.audioConfig,u)}async recognizeOnceAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed);const o=new t.Deferred;await this.implRecognizerStop(),await this.privReco.recognize(a,o.resolve,o.reject);const c=await o.promise;return await this.implRecognizerStop(),c}async startContinuousRecognitionAsyncImpl(a){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop(),await this.privReco.recognize(a,void 0,void 0)}async stopContinuousRecognitionAsyncImpl(){r.Contracts.throwIfDisposed(this.privDisposed),await this.implRecognizerStop()}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}static getAuth(a,o){const c=a.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0);return c&&c!==""?new e.CognitiveSubscriptionKeyAuthentication(c):o?new e.CognitiveTokenAuthentication(async()=>{try{return(await o.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(u){throw u}},async()=>{try{return(await o.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(u){throw u}}):new e.CognitiveTokenAuthentication(()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)},()=>{const u=a.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(u)})}};return _i.Recognizer=i,_i}var Ai={},tt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionMode=void 0,function(t){t.Interactive="Interactive",t.Dictation="Dictation",t.Conversation="Conversation",t.None="None"}(e.RecognitionMode||(e.RecognitionMode={}))})(tt);var af;function d0(){if(af)return Ai;af=1,Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.SpeechRecognizer=void 0;const e=O(),t=tt,r=b(),n=z,i=T();let s=class SC extends i.Recognizer{constructor(o,c){const u=o;n.Contracts.throwIfNull(u,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,u.properties,new e.SpeechConnectionFactory,o.tokenCredential),this.privDisposedRecognizer=!1}static FromConfig(o,c,u){const l=o;return c.properties.mergeTo(l.properties),new SC(o,u)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}recognizeOnceAsync(o,c){(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),o,c)}startContinuousRecognitionAsync(o,c){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(this.properties.getProperty(e.ForceDictationPropertyName,void 0)===void 0?t.RecognitionMode.Conversation:t.RecognitionMode.Dictation),o,c)}stopContinuousRecognitionAsync(o,c){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,c)}startKeywordRecognitionAsync(o,c,u){n.Contracts.throwIfNull(o,"model"),u&&u("Not yet implemented.")}stopKeywordRecognitionAsync(o){o&&o()}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,u,l){const p=u;return new e.SpeechServiceRecognizer(o,c,p,l,this)}};return Ai.SpeechRecognizer=s,Ai}var ki={},cf;function h0(){if(cf)return ki;cf=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.IntentRecognizer=void 0;const e=O(),t=tt,r=b(),n=z,i=T();let s=class extends i.Recognizer{constructor(o,c){n.Contracts.throwIfNullOrUndefined(o,"speechConfig");const u=o;n.Contracts.throwIfNullOrUndefined(u,"speechConfig"),super(c,u.properties,new e.IntentConnectionFactory),this.privAddedIntents=[],this.privAddedLmIntents={},this.privDisposedIntentRecognizer=!1,this.privProperties=u.properties,n.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage])}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}recognizeOnceAsync(o,c){if(n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const u=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=u.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(u.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),o,c)}startContinuousRecognitionAsync(o,c){if(Object.keys(this.privAddedLmIntents).length!==0||this.privUmbrellaIntent!==void 0){const u=this.buildSpeechContext();this.privReco.speechContext.getContext().intent=u.Intent,this.privReco.dynamicGrammar.addReferenceGrammar(u.ReferenceGrammars),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent)}(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),o,c)}stopContinuousRecognitionAsync(o,c){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,c)}startKeywordRecognitionAsync(o,c,u){n.Contracts.throwIfNull(o,"model"),u&&u("Not yet implemented.")}stopKeywordRecognitionAsync(o,c){if(o)try{o()}catch(u){c&&c(u)}}addIntent(o,c){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(c,"intentId"),n.Contracts.throwIfNullOrWhitespace(o,"simplePhrase"),this.privAddedIntents.push([c,o])}addIntentWithLanguageModel(o,c,u){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),n.Contracts.throwIfNullOrWhitespace(o,"intentId"),n.Contracts.throwIfNull(c,"model");const l=c;n.Contracts.throwIfNullOrWhitespace(l.appId,"model.appId"),this.privAddedLmIntents[o]=new e.AddedLmIntent(l,u)}addAllIntents(o,c){n.Contracts.throwIfNull(o,"model");const u=o;n.Contracts.throwIfNullOrWhitespace(u.appId,"model.appId"),this.privUmbrellaIntent=new e.AddedLmIntent(u,c)}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),o,c)}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,u,l){const p=u;return new e.IntentServiceRecognizer(o,c,p,l,this)}async dispose(o){this.privDisposedIntentRecognizer||o&&(this.privDisposedIntentRecognizer=!0,await super.dispose(o))}buildSpeechContext(){let o,c,u;const l=[];this.privUmbrellaIntent!==void 0&&(o=this.privUmbrellaIntent.modelImpl.appId,c=this.privUmbrellaIntent.modelImpl.region,u=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(const p of Object.keys(this.privAddedLmIntents)){const d=this.privAddedLmIntents[p];if(o===void 0)o=d.modelImpl.appId;else if(o!==d.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(c===void 0)c=d.modelImpl.region;else if(c!==d.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(u===void 0)u=d.modelImpl.subscriptionKey;else if(u!==d.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");const h="luis/"+o+"-PRODUCTION#"+p;l.push(h)}return{Intent:{id:o,key:u===void 0?this.privProperties.getProperty(i.PropertyId[i.PropertyId.SpeechServiceConnection_Key]):u,provider:"LUIS"},ReferenceGrammars:this.privUmbrellaIntent===void 0?l:["luis/"+o+"-PRODUCTION"]}}};return ki.IntentRecognizer=s,ki}var CC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceProfileType=void 0,function(t){t[t.TextIndependentIdentification=0]="TextIndependentIdentification",t[t.TextDependentVerification=1]="TextDependentVerification",t[t.TextIndependentVerification=2]="TextIndependentVerification"}(e.VoiceProfileType||(e.VoiceProfileType={}))})(CC);var Mi={},Oi={},kr={},uf;function PC(){if(uf)return kr;uf=1,Object.defineProperty(kr,"__esModule",{value:!0}),kr.ConnectionMessageImpl=kr.ConnectionMessage=void 0;const e=fe,t=b(),r=mC(),n=ru;let i=class{};kr.ConnectionMessage=i;class s{constructor(o){this.privConnectionMessage=o,this.privProperties=new r.PropertyCollection,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]&&this.privProperties.setProperty(n.PropertyId.Speech_SessionId,this.privConnectionMessage.headers[e.HeaderNames.ConnectionId]),Object.keys(this.privConnectionMessage.headers).forEach(c=>{this.privProperties.setProperty(c,this.privConnectionMessage.headers[c])})}get path(){return this.privConnectionMessage.headers[Object.keys(this.privConnectionMessage.headers).find(o=>o.toLowerCase()==="path".toLowerCase())]}get isTextMessage(){return this.privConnectionMessage.messageType===t.MessageType.Text}get isBinaryMessage(){return this.privConnectionMessage.messageType===t.MessageType.Binary}get TextMessage(){return this.privConnectionMessage.textBody}get binaryMessage(){return this.privConnectionMessage.binaryBody}get properties(){return this.privProperties}toString(){return""}}return kr.ConnectionMessageImpl=s,kr}var lf;function RC(){if(lf)return Oi;lf=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.Connection=void 0;const e=O(),t=b(),r=PC(),n=z,i=T();let s=class Dp{static fromRecognizer(o){const c=o.internalData,u=new Dp;return u.privInternalData=c,u.setupEvents(),u}static fromSynthesizer(o){const c=o.internalData,u=new Dp;return u.privInternalData=c,u.setupEvents(),u}openConnection(o,c){(0,t.marshalPromiseToCallbacks)(this.privInternalData.connect(),o,c)}closeConnection(o,c){if(this.privInternalData instanceof e.SynthesisAdapterBase)throw new Error("Disconnecting a synthesizer's connection is currently not supported");(0,t.marshalPromiseToCallbacks)(this.privInternalData.disconnect(),o,c)}setMessageProperty(o,c,u){if(n.Contracts.throwIfNullOrWhitespace(c,"propertyName"),this.privInternalData instanceof e.ServiceRecognizerBase){if(o.toLowerCase()!=="speech.context")throw new Error("Only speech.context message property sets are currently supported for recognizer");{const l=this.privInternalData.speechContext.getContext();l[c]=u}}else if(this.privInternalData instanceof e.SynthesisAdapterBase){if(o.toLowerCase()!=="synthesis.context")throw new Error("Only synthesis.context message property sets are currently supported for synthesizer");this.privInternalData.synthesisContext.setSection(c,u)}}sendMessageAsync(o,c,u,l){(0,t.marshalPromiseToCallbacks)(this.privInternalData.sendNetworkMessage(o,c),u,l)}close(){}setupEvents(){this.privEventListener=this.privInternalData.connectionEvents.attach(o=>{o.name==="ConnectionEstablishedEvent"?this.connected&&this.connected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionClosedEvent"?this.disconnected&&this.disconnected(new i.ConnectionEventArgs(o.connectionId)):o.name==="ConnectionMessageSentEvent"?this.messageSent&&this.messageSent(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(o.message))):o.name==="ConnectionMessageReceivedEvent"&&this.messageReceived&&this.messageReceived(new i.ConnectionMessageEventArgs(new r.ConnectionMessageImpl(o.message)))}),this.privServiceEventListener=this.privInternalData.serviceEvents.attach(o=>{this.receivedServiceMessage&&this.receivedServiceMessage(new i.ServiceEventArgs(o.jsonString,o.name))})}};return Oi.Connection=s,Oi}var pf;function v0(){if(pf)return Mi;pf=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.TranslationRecognizer=void 0;const e=O(),t=tt,r=b(),n=RC(),i=z,s=T();let a=class EC extends s.Recognizer{constructor(c,u,l){const p=c;i.Contracts.throwIfNull(p,"speechConfig"),super(u,p.properties,l||new e.TranslationConnectionFactory,c.tokenCredential),this.privDisposedTranslationRecognizer=!1,this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationVoice]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages),s.PropertyId[s.PropertyId.SpeechServiceConnection_TranslationToLanguages]),i.Contracts.throwIfNullOrWhitespace(this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage),s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage])}static FromConfig(c,u,l){const p=c;return u.properties.mergeTo(p.properties),u.properties.getProperty(s.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)===e.AutoDetectSourceLanguagesOpenRangeOptionName&&p.properties.setProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),new EC(c,l)}get speechRecognitionLanguage(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_RecoLanguage)}get targetLanguages(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")}get voiceName(){return i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(s.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(c){this.properties.setProperty(s.PropertyId.SpeechServiceAuthorization_Token,c)}recognizeOnceAsync(c,u){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.recognizeOnceAsyncImpl(t.RecognitionMode.Interactive),c,u)}startContinuousRecognitionAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),c,u)}stopContinuousRecognitionAsync(c,u){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),c,u)}removeTargetLanguage(c){if(i.Contracts.throwIfNullOrUndefined(c,"language to be removed"),this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0){const u=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),l=u.indexOf(c);l>-1&&(u.splice(l,1),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,u.join(",")),this.updateLanguages(u))}}addTargetLanguage(c){i.Contracts.throwIfNullOrUndefined(c,"language to be added");let u=[];this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0?(u=this.properties.getProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","),u.includes(c)||(u.push(c),this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,u.join(",")))):(this.properties.setProperty(s.PropertyId.SpeechServiceConnection_TranslationToLanguages,c),u=[c]),this.updateLanguages(u)}close(c,u){i.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),c,u)}onConnection(){}async dispose(c){this.privDisposedTranslationRecognizer||(this.privDisposedTranslationRecognizer=!0,c&&(await this.implRecognizerStop(),await super.dispose(c)))}createRecognizerConfig(c){return new e.RecognizerConfig(c,this.privProperties)}createServiceRecognizer(c,u,l,p){const d=l;return new e.TranslationServiceRecognizer(c,u,d,p,this)}updateLanguages(c){const u=n.Connection.fromRecognizer(this);u&&(u.setMessageProperty("speech.context","translationcontext",{to:c}),u.sendMessageAsync("event",JSON.stringify({id:"translation",name:"updateLanguage",to:c})))}};return Mi.TranslationRecognizer=a,Mi}var Di={},df;function f0(){if(df)return Di;df=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.Translations=void 0;const e=T();let t=class{constructor(){this.privMap=new e.PropertyCollection}get languages(){return this.privMap.keys}get(n,i){return this.privMap.getProperty(n,i)}set(n,i){this.privMap.setProperty(n,i)}};return Di.Translations=t,Di}var wC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NoMatchReason=void 0,function(t){t[t.NotRecognized=0]="NotRecognized",t[t.InitialSilenceTimeout=1]="InitialSilenceTimeout",t[t.InitialBabbleTimeout=2]="InitialBabbleTimeout"}(e.NoMatchReason||(e.NoMatchReason={}))})(wC);var bi={},hf;function g0(){if(hf)return bi;hf=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.NoMatchDetails=void 0;const e=O(),t=T();let r=class IC{constructor(i){this.privReason=i}static fromResult(i){const s=e.SimpleSpeechPhrase.fromJSON(i.json,0);let a=t.NoMatchReason.NotRecognized;switch(s.RecognitionStatus){case e.RecognitionStatus.BabbleTimeout:a=t.NoMatchReason.InitialBabbleTimeout;break;case e.RecognitionStatus.InitialSilenceTimeout:a=t.NoMatchReason.InitialSilenceTimeout;break;default:a=t.NoMatchReason.NotRecognized;break}return new IC(a)}get reason(){return this.privReason}};return bi.NoMatchDetails=r,bi}var nu={};Object.defineProperty(nu,"__esModule",{value:!0});nu.TranslationRecognitionCanceledEventArgs=void 0;class m0{constructor(t,r,n,i,s){this.privCancelReason=r,this.privErrorDetails=n,this.privResult=s,this.privSessionId=t,this.privErrorCode=i}get result(){return this.privResult}get sessionId(){return this.privSessionId}get reason(){return this.privCancelReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}}nu.TranslationRecognitionCanceledEventArgs=m0;var Ni={},vf;function y0(){if(vf)return Ni;vf=1,Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.IntentRecognitionCanceledEventArgs=void 0;const e=T();let t=class extends e.IntentRecognitionEventArgs{constructor(n,i,s,a,o,c){super(a,o,c),this.privReason=n,this.privErrorDetails=i,this.privErrorCode=s}get reason(){return this.privReason}get errorCode(){return this.privErrorCode}get errorDetails(){return this.privErrorDetails}};return Ni.IntentRecognitionCanceledEventArgs=t,Ni}var Hs={};Object.defineProperty(Hs,"__esModule",{value:!0});Hs.CancellationDetailsBase=void 0;class S0{constructor(t,r,n){this.privReason=t,this.privErrorDetails=r,this.privErrorCode=n}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get ErrorCode(){return this.privErrorCode}}Hs.CancellationDetailsBase=S0;var zi={},ff;function C0(){if(ff)return zi;ff=1,Object.defineProperty(zi,"__esModule",{value:!0}),zi.CancellationDetails=void 0;const e=O(),t=Hs,r=T();let n=class TC extends t.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){let a=r.CancellationReason.Error,o=r.CancellationErrorCode.NoError;if(s instanceof r.RecognitionResult&&s.json){const c=e.SimpleSpeechPhrase.fromJSON(s.json,0);a=e.EnumTranslation.implTranslateCancelResult(c.RecognitionStatus)}return s.properties&&(o=r.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new TC(a,s.errorDetails||e.EnumTranslation.implTranslateErrorDetails(o),o)}};return zi.CancellationDetails=n,zi}var _C={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationErrorCode=void 0,function(t){t[t.NoError=0]="NoError",t[t.AuthenticationFailure=1]="AuthenticationFailure",t[t.BadRequestParameters=2]="BadRequestParameters",t[t.TooManyRequests=3]="TooManyRequests",t[t.ConnectionFailure=4]="ConnectionFailure",t[t.ServiceTimeout=5]="ServiceTimeout",t[t.ServiceError=6]="ServiceError",t[t.RuntimeError=7]="RuntimeError",t[t.Forbidden=8]="Forbidden"}(e.CancellationErrorCode||(e.CancellationErrorCode={}))})(_C);var Li={},gf;function P0(){if(gf)return Li;gf=1,Object.defineProperty(Li,"__esModule",{value:!0}),Li.ConnectionEventArgs=void 0;const e=T();let t=class extends e.SessionEventArgs{};return Li.ConnectionEventArgs=t,Li}var ji={},mf;function R0(){if(mf)return ji;mf=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.ServiceEventArgs=void 0;const e=T();let t=class extends e.SessionEventArgs{constructor(n,i,s){super(s),this.privJsonResult=n,this.privEventName=i}get jsonString(){return this.privJsonResult}get eventName(){return this.privEventName}};return ji.ServiceEventArgs=t,ji}var iu={};Object.defineProperty(iu,"__esModule",{value:!0});iu.PhraseListGrammar=void 0;class $d{constructor(t){this.privGrammerBuilder=t.dynamicGrammar}static fromRecognizer(t){const r=t.internalData;return new $d(r)}addPhrase(t){this.privGrammerBuilder.addPhrase(t)}addPhrases(t){this.privGrammerBuilder.addPhrase(t)}clear(){this.privGrammerBuilder.clearPhrases()}}iu.PhraseListGrammar=$d;var Mr={},yf;function Wd(){if(yf)return Mr;yf=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.DialogServiceConfigImpl=Mr.DialogServiceConfig=void 0;const e=z,t=T();let r=class{constructor(){}set applicationId(s){}static get DialogTypes(){return{BotFramework:"bot_framework",CustomCommands:"custom_commands"}}};Mr.DialogServiceConfig=r;class n extends r{constructor(){super(),this.privSpeechConfig=new t.SpeechConfigImpl}get properties(){return this.privSpeechConfig.properties}get speechRecognitionLanguage(){return this.privSpeechConfig.speechRecognitionLanguage}set speechRecognitionLanguage(s){e.Contracts.throwIfNullOrWhitespace(s,"value"),this.privSpeechConfig.speechRecognitionLanguage=s}get outputFormat(){return this.privSpeechConfig.outputFormat}set outputFormat(s){this.privSpeechConfig.outputFormat=s}setProperty(s,a){this.privSpeechConfig.setProperty(s,a)}getProperty(s,a){return this.privSpeechConfig.getProperty(s)}setProxy(s,a,o,c){this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyHostName,s),this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPort,`${a}`),o&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyUserName,o),c&&this.setProperty(t.PropertyId.SpeechServiceConnection_ProxyPassword,c)}setServiceProperty(s,a,o){this.privSpeechConfig.setServiceProperty(s,a)}close(){}}return Mr.DialogServiceConfigImpl=n,Mr}var xi={},Sf;function E0(){if(Sf)return xi;Sf=1,Object.defineProperty(xi,"__esModule",{value:!0}),xi.BotFrameworkConfig=void 0;const e=z,t=Wd(),r=T();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"subscription"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c}static fromAuthorizationToken(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(a,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,a),o&&c.setProperty(r.PropertyId.Conversation_ApplicationId,o),c}static fromHost(s,a,o){e.Contracts.throwIfNullOrUndefined(s,"host");const c=s instanceof URL?s:new URL(`wss://${s}.convai.speech.azure.us`);e.Contracts.throwIfNullOrUndefined(c,"resolvedHost");const u=new t.DialogServiceConfigImpl;return u.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),u.setProperty(r.PropertyId.SpeechServiceConnection_Host,c.toString()),a!==void 0&&u.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),u}static fromEndpoint(s,a){e.Contracts.throwIfNull(s,"endpoint");const o=new t.DialogServiceConfigImpl;return o.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.BotFramework),o.setProperty(r.PropertyId.SpeechServiceConnection_Endpoint,s.toString()),a!==void 0&&o.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),o}};return xi.BotFrameworkConfig=n,xi}var Bi={},Cf;function w0(){if(Cf)return Bi;Cf=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.CustomCommandsConfig=void 0;const e=z,t=Wd(),r=T();let n=class extends t.DialogServiceConfigImpl{constructor(){super()}static fromSubscription(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"subscription"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceConnection_Key,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}static fromAuthorizationToken(s,a,o){e.Contracts.throwIfNullOrWhitespace(s,"applicationId"),e.Contracts.throwIfNullOrWhitespace(a,"authorizationToken"),e.Contracts.throwIfNullOrWhitespace(o,"region");const c=new t.DialogServiceConfigImpl;return c.setProperty(r.PropertyId.Conversation_DialogType,t.DialogServiceConfig.DialogTypes.CustomCommands),c.setProperty(r.PropertyId.Conversation_ApplicationId,s),c.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,a),c.setProperty(r.PropertyId.SpeechServiceConnection_Region,o),c}set applicationId(s){e.Contracts.throwIfNullOrWhitespace(s,"value"),this.setProperty(r.PropertyId.Conversation_ApplicationId,s)}get applicationId(){return this.getProperty(r.PropertyId.Conversation_ApplicationId)}};return Bi.CustomCommandsConfig=n,Bi}var Fi={},qi={},Ui={},St={};Object.defineProperty(St,"__esModule",{value:!0});St.QueryParameterNames=void 0;class X{}St.QueryParameterNames=X;X.BotId="botid";X.CustomSpeechDeploymentId="cid";X.CustomVoiceDeploymentId="deploymentId";X.EnableAudioLogging="storeAudio";X.EnableLanguageId="lidEnabled";X.EnableWordLevelTimestamps="wordLevelTimestamps";X.EndSilenceTimeoutMs="endSilenceTimeoutMs";X.SegmentationSilenceTimeoutMs="segmentationSilenceTimeoutMs";X.SegmentationMaximumTimeMs="segmentationMaximumTimeMs";X.SegmentationStrategy="segmentationStrategy";X.Format="format";X.InitialSilenceTimeoutMs="initialSilenceTimeoutMs";X.Language="language";X.Profanity="profanity";X.RequestBotStatusMessages="enableBotMessageStatus";X.StableIntermediateThreshold="stableIntermediateThreshold";X.StableTranslation="stableTranslation";X.TestHooks="testhooks";X.Postprocessing="postprocessing";X.CtsMeetingId="meetingId";X.CtsDeviceId="deviceId";X.CtsIsParticipant="isParticipant";X.EnableAvatar="enableTalkingAvatar";var Pf;function Ct(){if(Pf)return Ui;Pf=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.ConnectionFactoryBase=void 0;const e=O(),t=b(),r=T(),n=St;let i=class{static getHostSuffix(a){if(a){if(a.toLowerCase().startsWith("china"))return".azure.cn";if(a.toLowerCase().startsWith("usgov"))return".azure.us"}return".microsoft.com"}setCommonUrlParams(a,o,c){new Map([[r.PropertyId.Speech_SegmentationSilenceTimeoutMs,n.QueryParameterNames.SegmentationSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_EnableAudioLogging,n.QueryParameterNames.EnableAudioLogging],[r.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,n.QueryParameterNames.EndSilenceTimeoutMs],[r.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,n.QueryParameterNames.InitialSilenceTimeoutMs],[r.PropertyId.SpeechServiceResponse_PostProcessingOption,n.QueryParameterNames.Postprocessing],[r.PropertyId.SpeechServiceResponse_ProfanityOption,n.QueryParameterNames.Profanity],[r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,n.QueryParameterNames.EnableWordLevelTimestamps],[r.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,n.QueryParameterNames.StableIntermediateThreshold]]).forEach((p,d)=>{this.setUrlParameter(d,p,a,o,c)});const l=JSON.parse(a.parameters.getProperty(e.ServicePropertiesPropertyName,"{}"));Object.keys(l).forEach(p=>{o[p]=l[p]})}setUrlParameter(a,o,c,u,l){const p=c.parameters.getProperty(a,void 0);p&&(!l||l.search(o)===-1)&&(u[o]=p.toLocaleLowerCase())}static async getRedirectUrlFromEndpoint(a){let o;if(typeof window<"u"&&typeof window.fetch<"u"){const c=new URL(a);c.protocol="https:",c.port="443",c.searchParams.append("GenerateRedirectResponse","true");const l=c.toString();t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",l,void 0,"ConnectionFactoryBase: redirectUrl request"));const p=await fetch(l);if(p.status!==200)return a;o=await p.text()}else o=a;t.Events.instance.onEvent(new t.ConnectionRedirectEvent("",o,a,"ConnectionFactoryBase: redirectUrlString"));try{return new URL(o.trim()).toString()}catch{return a}}};return Ui.ConnectionFactoryBase=i,Ui}var Rf;function I0(){if(Rf)return qi;Rf=1,Object.defineProperty(qi,"__esModule",{value:!0}),qi.DialogConnectionFactory=void 0;const e=ge(),t=O(),r=T(),n=Ct(),i=O(),s=fe,a=St;class o extends n.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(r.PropertyId.Conversation_ApplicationId,""),h=u.parameters.getProperty(r.PropertyId.Conversation_DialogType),m=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),y=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),S=u.parameters.getProperty(r.PropertyId.Conversation_Request_Bot_Status_Messages,"true"),v={};v[s.HeaderNames.ConnectionId]=p,v[a.QueryParameterNames.Format]=u.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase(),v[a.QueryParameterNames.Language]=y,v[a.QueryParameterNames.RequestBotStatusMessages]=S,d&&(v[a.QueryParameterNames.BotId]=d,h===r.DialogServiceConfig.DialogTypes.CustomCommands&&(v[s.HeaderNames.CustomCommandsAppId]=d));const f=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"commands/":"",g=h===r.DialogServiceConfig.DialogTypes.CustomCommands?"v1":h===r.DialogServiceConfig.DialogTypes.BotFramework?"v3":"v0",C={};l.token!=null&&l.token!==""&&(C[l.headerName]=l.token);let P=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,"");if(!P){const I=n.ConnectionFactoryBase.getHostSuffix(m),R=u.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,`wss://${m}.${o.BaseUrl}${I}`);P=`${R.endsWith("/")?R:R+"/"}${f}${o.ApiKey}/${g}`}this.setCommonUrlParams(u,v,P);const E=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(P,v,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),E,p))}}return qi.DialogConnectionFactory=o,o.ApiKey="api",o.BaseUrl="convai.speech",qi}var Ef;function T0(){if(Ef)return Fi;Ef=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.DialogServiceConnector=void 0;const e=I0(),t=O(),r=tt,n=b(),i=z,s=T(),a=ru;let o=class extends s.Recognizer{constructor(u,l){const p=u;i.Contracts.throwIfNull(u,"dialogConfig"),super(l,p.properties,new e.DialogConnectionFactory),this.isTurnComplete=!0,this.privIsDisposed=!1,this.privProperties=p.properties.clone();const d=this.buildAgentConfig();this.privReco.agentConfig.set(d)}connect(u,l){(0,n.marshalPromiseToCallbacks)(this.privReco.connect(),u,l)}disconnect(u,l){(0,n.marshalPromiseToCallbacks)(this.privReco.disconnect(),u,l)}get authorizationToken(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(u){i.Contracts.throwIfNullOrWhitespace(u,"token"),this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,u)}get properties(){return this.privProperties}get speechActivityTemplate(){return this.properties.getProperty(a.PropertyId.Conversation_Speech_Activity_Template)}set speechActivityTemplate(u){this.properties.setProperty(a.PropertyId.Conversation_Speech_Activity_Template,u)}listenOnceAsync(u,l){if(this.isTurnComplete){i.Contracts.throwIfDisposed(this.privIsDisposed);const d=(async()=>{await this.privReco.connect(),await this.implRecognizerStop(),this.isTurnComplete=!1;const h=new n.Deferred;await this.privReco.recognize(r.RecognitionMode.Conversation,h.resolve,h.reject);const m=await h.promise;return await this.implRecognizerStop(),m})();d.catch(()=>{this.dispose(!0).catch(()=>{})}),(0,n.marshalPromiseToCallbacks)(d.finally(()=>{this.isTurnComplete=!0}),u,l)}}sendActivityAsync(u,l,p){(0,n.marshalPromiseToCallbacks)(this.privReco.sendMessage(u),l,p)}close(u,l){i.Contracts.throwIfDisposed(this.privIsDisposed),(0,n.marshalPromiseToCallbacks)(this.dispose(!0),u,l)}async dispose(u){this.privIsDisposed||u&&(this.privIsDisposed=!0,await this.implRecognizerStop(),await super.dispose(u))}createRecognizerConfig(u){return new t.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new t.DialogServiceAdapter(u,l,h,d,this)}buildAgentConfig(){return{botInfo:{commType:this.properties.getProperty("Conversation_Communication_Type","Default"),commandsCulture:void 0,connectionId:this.properties.getProperty(a.PropertyId.Conversation_Agent_Connection_Id),conversationId:this.properties.getProperty(a.PropertyId.Conversation_Conversation_Id,void 0),fromId:this.properties.getProperty(a.PropertyId.Conversation_From_Id,void 0),ttsAudioFormat:this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)},version:.2}}};return Fi.DialogServiceConnector=o,Fi}var ou={};Object.defineProperty(ou,"__esModule",{value:!0});ou.ActivityReceivedEventArgs=void 0;class _0{constructor(t,r){this.privActivity=t,this.privAudioStream=r}get activity(){return this.privActivity}get audioStream(){return this.privAudioStream}}ou.ActivityReceivedEventArgs=_0;var su={},au={};Object.defineProperty(au,"__esModule",{value:!0});au.TurnStatusResponsePayload=void 0;class Vd{constructor(t){this.privMessageStatusResponse=JSON.parse(t)}static fromJSON(t){return new Vd(t)}get interactionId(){return this.privMessageStatusResponse.interactionId}get conversationId(){return this.privMessageStatusResponse.conversationId}get statusCode(){switch(this.privMessageStatusResponse.statusCode){case"Success":return 200;case"Failed":return 400;case"TimedOut":return 429;default:return this.privMessageStatusResponse.statusCode}}}au.TurnStatusResponsePayload=Vd;Object.defineProperty(su,"__esModule",{value:!0});su.TurnStatusReceivedEventArgs=void 0;const A0=au;class k0{constructor(t){this.privTurnStatus=A0.TurnStatusResponsePayload.fromJSON(t)}get interactionId(){return this.privTurnStatus.interactionId}get conversationId(){return this.privTurnStatus.conversationId}get statusCode(){return this.privTurnStatus.statusCode}}su.TurnStatusReceivedEventArgs=k0;var AC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ServicePropertyChannel=void 0,function(t){t[t.UriQueryParameter=0]="UriQueryParameter"}(e.ServicePropertyChannel||(e.ServicePropertyChannel={}))})(AC);var kC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProfanityOption=void 0,function(t){t[t.Masked=0]="Masked",t[t.Removed=1]="Removed",t[t.Raw=2]="Raw"}(e.ProfanityOption||(e.ProfanityOption={}))})(kC);var $i={},wf;function M0(){if(wf)return $i;wf=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.BaseAudioPlayer=void 0;const e=Re,t=T(),r=Ir;let n=class{constructor(s){this.audioContext=null,this.gainNode=null,this.autoUpdateBufferTimer=0,s===void 0&&(s=t.AudioStreamFormat.getDefaultInputFormat()),this.init(s)}playAudioSample(s,a,o){try{this.ensureInitializedContext();const c=this.formatAudioData(s),u=new Float32Array(this.samples.length+c.length);u.set(this.samples,0),u.set(c,this.samples.length),this.samples=u,a&&a()}catch(c){o&&o(c)}}stopAudio(s,a){this.audioContext!==null&&(this.samples=new Float32Array,clearInterval(this.autoUpdateBufferTimer),this.audioContext.close().then(()=>{s&&s()},o=>{a&&a(o)}),this.audioContext=null)}init(s){this.audioFormat=s,this.samples=new Float32Array}ensureInitializedContext(){if(this.audioContext===null){this.createAudioContext();const s=200;this.autoUpdateBufferTimer=setInterval(()=>{this.updateAudioBuffer()},s)}}createAudioContext(){this.audioContext=r.AudioStreamFormatImpl.getAudioContext(),this.gainNode=this.audioContext.createGain(),this.gainNode.gain.value=1,this.gainNode.connect(this.audioContext.destination),this.startTime=this.audioContext.currentTime}formatAudioData(s){switch(this.audioFormat.bitsPerSample){case 8:return this.formatArrayBuffer(new Int8Array(s),128);case 16:return this.formatArrayBuffer(new Int16Array(s),32768);case 32:return this.formatArrayBuffer(new Int32Array(s),2147483648);default:throw new e.InvalidOperationError("Only WAVE_FORMAT_PCM (8/16/32 bps) format supported at this time")}}formatArrayBuffer(s,a){const o=new Float32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[c]/a;return o}updateAudioBuffer(){if(this.samples.length===0)return;const s=this.audioFormat.channels,a=this.audioContext.createBufferSource(),o=this.samples.length/s,c=this.audioContext.createBuffer(s,o,this.audioFormat.samplesPerSec);for(let u=0;u<s;u++){let l=u;const p=c.getChannelData(u);for(let d=0;d<this.samples.length;d++,l+=s)p[d]=this.samples[l]}this.startTime<this.audioContext.currentTime&&(this.startTime=this.audioContext.currentTime),a.buffer=c,a.connect(this.gainNode),a.start(this.startTime),this.startTime+=c.duration,this.samples=new Float32Array}async playAudio(s){this.audioContext===null&&this.createAudioContext();const a=this.audioContext.createBufferSource(),o=this.audioContext.destination;await this.audioContext.decodeAudioData(s,c=>{a.buffer=c,a.connect(o),a.start(0)})}};return $i.BaseAudioPlayer=n,$i}var cu={};Object.defineProperty(cu,"__esModule",{value:!0});cu.ConnectionMessageEventArgs=void 0;class O0{constructor(t){this.privConnectionMessage=t}get message(){return this.privConnectionMessage}toString(){return"Message: "+this.privConnectionMessage.toString()}}cu.ConnectionMessageEventArgs=O0;var uu={};Object.defineProperty(uu,"__esModule",{value:!0});uu.VoiceProfile=void 0;class D0{constructor(t,r){this.privId=t,this.privProfileType=r}get profileId(){return this.privId}get profileType(){return this.privProfileType}}uu.VoiceProfile=D0;var Or={},If;function b0(){if(If)return Or;If=1,Object.defineProperty(Or,"__esModule",{value:!0}),Or.VoiceProfileEnrollmentCancellationDetails=Or.VoiceProfileEnrollmentResult=void 0;const e=O(),t=T();let r=class bp{constructor(s,a,o){this.privReason=s,this.privProperties=new t.PropertyCollection,this.privReason!==t.ResultReason.Canceled?a&&(this.privDetails=JSON.parse(a),this.privDetails.enrollmentStatus.toLowerCase()==="enrolling"&&(this.privReason=t.ResultReason.EnrollingVoiceProfile)):(this.privErrorDetails=o,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get enrollmentsCount(){return this.privDetails.enrollmentsCount}get enrollmentsLength(){return this.privDetails.enrollmentsLength}get properties(){return this.privProperties}get enrollmentResultDetails(){return this.privDetails}get errorDetails(){return this.privErrorDetails}static FromIdentificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,u=new bp(c,null,null);u.privDetails=this.getIdentificationDetails(o),a.push(u)}return a}static FromVerificationProfileList(s){const a=[];for(const o of s.value){const c=o.enrollmentStatus.toLowerCase()==="enrolling"?t.ResultReason.EnrollingVoiceProfile:o.enrollmentStatus.toLowerCase()==="enrolled"?t.ResultReason.EnrolledVoiceProfile:t.ResultReason.Canceled,u=new bp(c,null,null);u.privDetails=this.getVerificationDetails(o),a.push(u)}return a}static getIdentificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount||0,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.identificationProfileId,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}static getVerificationDetails(s){return{audioLength:s.audioLength?parseFloat(s.audioLength):0,audioSpeechLength:s.audioSpeechLength?parseFloat(s.audioSpeechLength):0,enrollmentStatus:s.enrollmentStatus,enrollmentsCount:s.enrollmentsCount,enrollmentsLength:s.enrollmentsLength?parseFloat(s.enrollmentsLength):0,enrollmentsSpeechLength:s.enrollmentsSpeechLength?parseFloat(s.enrollmentsSpeechLength):0,profileId:s.profileId||s.verificationProfileId,remainingEnrollmentsCount:s.remainingEnrollments||s.remainingEnrollmentsCount,remainingEnrollmentsSpeechLength:s.remainingEnrollmentsSpeechLength?parseFloat(s.remainingEnrollmentsSpeechLength):0}}};Or.VoiceProfileEnrollmentResult=r;class n extends t.CancellationDetailsBase{constructor(s,a,o){super(s,a,o)}static fromResult(s){const a=t.CancellationReason.Error;let o=t.CancellationErrorCode.NoError;return s.properties&&(o=t.CancellationErrorCode[s.properties.getProperty(e.CancellationErrorCodePropertyName,t.CancellationErrorCode[t.CancellationErrorCode.NoError])]),new n(a,s.errorDetails,o)}}return Or.VoiceProfileEnrollmentCancellationDetails=n,Or}var Dr={},Tf;function N0(){if(Tf)return Dr;Tf=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.VoiceProfileCancellationDetails=Dr.VoiceProfileResult=void 0;const e=O(),t=z,r=T();let n=class{constructor(a,o){this.privReason=a,this.privProperties=new r.PropertyCollection,a===r.ResultReason.Canceled&&(t.Contracts.throwIfNullOrUndefined(o,"statusText"),this.privErrorDetails=o,this.privProperties.setProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.ServiceError]))}get reason(){return this.privReason}get properties(){return this.privProperties}get errorDetails(){return this.privErrorDetails}};Dr.VoiceProfileResult=n;class i extends r.CancellationDetailsBase{constructor(a,o,c){super(a,o,c)}static fromResult(a){const o=r.CancellationReason.Error;let c=r.CancellationErrorCode.NoError;return a.properties&&(c=r.CancellationErrorCode[a.properties.getProperty(e.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new i(o,a.errorDetails,c)}}return Dr.VoiceProfileCancellationDetails=i,Dr}var Wi={},_f;function z0(){if(_f)return Wi;_f=1,Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.VoiceProfilePhraseResult=void 0;const e=z,t=T();let r=class extends t.VoiceProfileResult{constructor(i,s,a,o){super(i,s),this.privPhrases=[],e.Contracts.throwIfNullOrUndefined(o,"phrase array"),this.privType=a,o&&o[0]&&(this.privPhrases=o)}get phrases(){return this.privPhrases}get type(){return this.privType}};return Wi.VoiceProfilePhraseResult=r,Wi}var Vi={},Af;function L0(){if(Af)return Vi;Af=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.VoiceProfileClient=void 0;const e=O(),t=uC(),r=z,n=T();let i=class extends n.Recognizer{constructor(a){r.Contracts.throwIfNullOrUndefined(a,"speechConfig");const o=a;r.Contracts.throwIfNull(o,"speechConfig"),super(t.AudioConfig.fromStreamInput(n.AudioInputStream.createPushStream()),o.properties,new e.VoiceProfileConnectionFactory),this.privProperties=o.properties.clone(),this.privVoiceAdapter=this.privReco,this.privDisposedVoiceAdapter=!1}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(a){r.Contracts.throwIfNullOrWhitespace(a,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,a)}async createProfileAsync(a,o){const c=await this.privVoiceAdapter.createProfile(a,o);return new n.VoiceProfile(c[0],a)}async retrieveEnrollmentResultAsync(a){return this.privVoiceAdapter.retrieveEnrollmentResult(a)}async getAllProfilesAsync(a){return this.privVoiceAdapter.getAllProfiles(a)}async getActivationPhrasesAsync(a,o){return this.privVoiceAdapter.getActivationPhrases(a,o)}async enrollProfileAsync(a,o){const c=o;return r.Contracts.throwIfNullOrUndefined(c,"audioConfig"),this.audioConfig=o,this.privVoiceAdapter.SpeakerAudioSource=c,this.privVoiceAdapter.enrollProfile(a)}async deleteProfileAsync(a){return this.privVoiceAdapter.deleteProfile(a)}async resetProfileAsync(a){return this.privVoiceAdapter.resetProfile(a)}async close(){await this.dispose(!0)}createServiceRecognizer(a,o,c,u){const l=c;return new e.VoiceServiceRecognizer(a,o,l,u,this)}async dispose(a){this.privDisposedVoiceAdapter||(this.privDisposedVoiceAdapter=!0,a&&await super.dispose(a))}createRecognizerConfig(a){return new e.RecognizerConfig(a,this.properties)}getResult(a,o){return new n.VoiceProfileResult(a.ok?o:n.ResultReason.Canceled,a.statusText)}};return Vi.VoiceProfileClient=i,Vi}var Hi={},kf;function j0(){if(kf)return Hi;kf=1,Object.defineProperty(Hi,"__esModule",{value:!0}),Hi.SpeakerRecognizer=void 0;const e=O(),t=z,r=T();let n=class extends r.Recognizer{constructor(s,a){t.Contracts.throwIfNullOrUndefined(s,"speechConfig");const o=s;t.Contracts.throwIfNullOrUndefined(o,"speechConfig"),super(a,o.properties,new e.SpeakerRecognitionConnectionFactory),this.privAudioConfigImpl=a,t.Contracts.throwIfNull(this.privAudioConfigImpl,"audioConfig"),this.privDisposedSpeakerRecognizer=!1,this.privProperties=o.properties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(s){t.Contracts.throwIfNullOrWhitespace(s,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,s)}get properties(){return this.privProperties}async recognizeOnceAsync(s){return t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),this.recognizeSpeakerOnceAsyncImpl(s)}async close(){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.dispose(!0)}async recognizeSpeakerOnceAsyncImpl(s){t.Contracts.throwIfDisposed(this.privDisposedSpeakerRecognizer),await this.implRecognizerStop();const a=await this.privReco.recognizeSpeaker(s);return await this.implRecognizerStop(),a}async implRecognizerStop(){this.privReco&&await this.privReco.stopRecognizing()}createRecognizerConfig(s){return new e.RecognizerConfig(s,this.privProperties)}createServiceRecognizer(s,a,o,c){const u=o;return new e.SpeakerServiceRecognizer(s,a,u,c,this)}async dispose(s){this.privDisposedSpeakerRecognizer||s&&(this.privDisposedSpeakerRecognizer=!0,await super.dispose(s))}};return Hi.SpeakerRecognizer=n,Hi}var Ki={},Mf;function x0(){if(Mf)return Ki;Mf=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.SpeakerIdentificationModel=void 0;const e=z,t=T();let r=class MC{constructor(i){if(this.privVoiceProfiles=[],this.privProfileIds=[],e.Contracts.throwIfNullOrUndefined(i,"VoiceProfiles"),i.length===0)throw new Error("Empty Voice Profiles array");for(const s of i){if(s.profileType!==t.VoiceProfileType.TextIndependentIdentification)throw new Error("Identification model can only be created from Identification profile: "+s.profileId);this.privVoiceProfiles.push(s),this.privProfileIds.push(s.profileId)}}static fromProfiles(i){return new MC(i)}get voiceProfileIds(){return this.privProfileIds.join(",")}get profileIds(){return this.privProfileIds}get scenario(){return"TextIndependentIdentification"}};return Ki.SpeakerIdentificationModel=r,Ki}var Ji={},Of;function B0(){if(Of)return Ji;Of=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.SpeakerVerificationModel=void 0;const e=z,t=T();let r=class OC{constructor(i){if(e.Contracts.throwIfNullOrUndefined(i,"VoiceProfile"),i.profileType===t.VoiceProfileType.TextIndependentIdentification)throw new Error("Verification model cannot be created from Identification profile");this.privVoiceProfile=i}static fromProfile(i){return new OC(i)}get voiceProfile(){return this.privVoiceProfile}get profileIds(){return[this.voiceProfile.profileId]}get scenario(){return this.voiceProfile.profileType===t.VoiceProfileType.TextDependentVerification?"TextDependentVerification":"TextIndependentVerification"}};return Ji.SpeakerVerificationModel=r,Ji}var Gi={},Hd={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdMode=void 0,function(t){t[t.AtStart=0]="AtStart",t[t.Continuous=1]="Continuous"}(e.LanguageIdMode||(e.LanguageIdMode={}))})(Hd);var Df;function F0(){if(Df)return Gi;Df=1,Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.AutoDetectSourceLanguageConfig=void 0;const e=O(),t=z,r=T(),n=Hd;let i=class Da{constructor(){this.privProperties=new r.PropertyCollection,this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart"),this.privLanguageIdMode=n.LanguageIdMode.AtStart}static fromOpenRange(){const a=new Da;return a.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,e.AutoDetectSourceLanguagesOpenRangeOptionName),a.properties.setProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,"en-US"),a}static fromLanguages(a){t.Contracts.throwIfArrayEmptyOrWhitespace(a,"languages");const o=new Da;return o.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,a.join()),o}static fromSourceLanguageConfigs(a){if(a.length<1)throw new Error("Expected non-empty SourceLanguageConfig array.");const o=new Da,c=[];return a.forEach(u=>{if(c.push(u.language),u.endpointId!==void 0&&u.endpointId!==""){const l=u.language+r.PropertyId.SpeechServiceConnection_EndpointId.toString();o.properties.setProperty(l,u.endpointId)}}),o.properties.setProperty(r.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,c.join()),o}get properties(){return this.privProperties}set mode(a){a===n.LanguageIdMode.Continuous?(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"Continuous")):(this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"1"),this.privProperties.setProperty(r.PropertyId.SpeechServiceConnection_LanguageIdMode,"AtStart")),this.privLanguageIdMode=a}};return Gi.AutoDetectSourceLanguageConfig=i,Gi}var lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.AutoDetectSourceLanguageResult=void 0;const bf=z;class ic{constructor(t,r){bf.Contracts.throwIfNullOrUndefined(t,"language"),bf.Contracts.throwIfNullOrUndefined(r,"languageDetectionConfidence"),this.privLanguage=t,this.privLanguageDetectionConfidence=r}static fromResult(t){return new ic(t.language,t.languageDetectionConfidence)}static fromConversationTranscriptionResult(t){return new ic(t.language,t.languageDetectionConfidence)}get language(){return this.privLanguage}get languageDetectionConfidence(){return this.privLanguageDetectionConfidence}}lu.AutoDetectSourceLanguageResult=ic;var pu={};Object.defineProperty(pu,"__esModule",{value:!0});pu.SourceLanguageConfig=void 0;const q0=z;class Kd{constructor(t,r){q0.Contracts.throwIfNullOrUndefined(t,"language"),this.privLanguage=t,this.privEndpointId=r}static fromLanguage(t,r){return new Kd(t,r)}get language(){return this.privLanguage}get endpointId(){return this.privEndpointId}}pu.SourceLanguageConfig=Kd;var Al={},Nf;function U0(){return Nf||(Nf=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResult=e.SpeakerRecognitionResultType=void 0;const t=O(),r=T();var n;(function(a){a[a.Verify=0]="Verify",a[a.Identify=1]="Identify"})(n=e.SpeakerRecognitionResultType||(e.SpeakerRecognitionResultType={}));class i{constructor(o,c=r.ResultReason.RecognizedSpeaker,u=r.CancellationErrorCode.NoError,l=""){this.privProperties=new r.PropertyCollection;const p=o.scenario==="TextIndependentIdentification"?n.Identify:n.Verify;this.privReason=c,this.privReason!==r.ResultReason.Canceled?p===n.Identify?(this.privProfileId=o.identificationResult.identifiedProfile.profileId,this.privScore=o.identificationResult.identifiedProfile.score,this.privReason=r.ResultReason.RecognizedSpeakers):(this.privScore=o.verificationResult.score,o.verificationResult.recognitionResult.toLowerCase()!=="accept"&&(this.privReason=r.ResultReason.NoMatch),o.verificationResult.profileId!==void 0&&o.verificationResult.profileId!==""&&(this.privProfileId=o.verificationResult.profileId)):(this.privErrorDetails=l,this.privProperties.setProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[u])),this.privProperties.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,JSON.stringify(o))}get properties(){return this.privProperties}get reason(){return this.privReason}get profileId(){return this.privProfileId}get errorDetails(){return this.privErrorDetails}get score(){return this.privScore}}e.SpeakerRecognitionResult=i;class s extends r.CancellationDetailsBase{constructor(o,c,u){super(o,c,u)}static fromResult(o){const c=r.CancellationReason.Error;let u=r.CancellationErrorCode.NoError;return o.properties&&(u=r.CancellationErrorCode[o.properties.getProperty(t.CancellationErrorCodePropertyName,r.CancellationErrorCode[r.CancellationErrorCode.NoError])]),new s(c,o.errorDetails,u)}}e.SpeakerRecognitionCancellationDetails=s}(Al)),Al}var kl={},br={},zf;function DC(){if(zf)return br;zf=1,Object.defineProperty(br,"__esModule",{value:!0}),br.ConversationImpl=br.Conversation=void 0;const e=O(),t=b(),r=z,n=T();let i=class{constructor(){}static createConversationAsync(o,c,u,l){r.Contracts.throwIfNullOrUndefined(o,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(o.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),!o.subscriptionKey&&!o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(o.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));let p,d,h;return typeof c=="string"?(p=new s(o,c),(0,t.marshalPromiseToCallbacks)((async()=>{})(),u,l)):(p=new s(o),d=c,h=u,p.createConversationAsync(()=>{d&&d()},m=>{h&&h(m)})),p}};br.Conversation=i;class s extends i{constructor(o,c){if(super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const h=this.privConversationTranslator?.properties.getProperty(n.PropertyId.ConversationTranslator_Name);h!==void 0&&h.length>0&&h!==this.me.displayName&&this.changeNicknameAsync(h)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),c)this.privConversationId=c;else{o.targetLanguages.length===0&&o.addTargetLanguage(this.privLanguage),o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceResponse_ProfanityOption])||o.setProfanity(n.ProfanityOption.Masked);let d=o.getProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name]);d==null&&(d="Host"),r.Contracts.throwIfNullOrTooLong(d,"nickname",50),r.Contracts.throwIfNullOrTooShort(d,"nickname",2),o.setProperty(n.PropertyId[n.PropertyId.ConversationTranslator_Name],d)}this.privConfig=o;const l=o;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get conversationId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get conversationInfo(){const o=this.conversationId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,conversationProperties:u}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}set conversationTranslator(o){this.privConversationTranslator=o}onToken(o){this.privConversationTranslator.onToken(o)}createConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startConversationAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer=e.ConversationRecognizerFactory.fromConfig(this,this.privConfig),this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){r.Contracts.throwIfNullOrUndefined(o,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(o),c,u)}joinConversationAsync(o,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteConversationAsync(o,c){(0,t.marshalPromiseToCallbacks)(this.deleteConversationImplAsync(),o,c)}async deleteConversationImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endConversationAsync(o,c){(0,t.marshalPromiseToCallbacks)(this.endConversationImplAsync(),o,c)}endConversationImplAsync(){return this.close(!0)}lockConversationAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(o),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockConversationAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.conversation=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.conversationInfo;return u.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.conversationInfo;return c.participants=[o],this.privTranscriberRecognizer.pushConversationEvent(c,"leave")}async close(o){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(c){throw c}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new n.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return br.ConversationImpl=s,br}var du={};Object.defineProperty(du,"__esModule",{value:!0});du.ConversationCommon=void 0;class $0{constructor(t){this.privAudioConfig=t}handleCallback(t,r){if(t){try{t()}catch(n){r&&r(n)}t=void 0}}handleError(t,r){if(r)if(t instanceof Error){const n=t;r(n.name+": "+n.message)}else r(t)}}du.ConversationCommon=$0;var Qi={},Lf;function W0(){if(Lf)return Qi;Lf=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.ConversationExpirationEventArgs=void 0;const e=T();let t=class extends e.SessionEventArgs{constructor(n,i){super(i),this.privExpirationTime=n}get expirationTime(){return this.privExpirationTime}};return Qi.ConversationExpirationEventArgs=t,Qi}var Yi={},jf;function V0(){if(jf)return Yi;jf=1,Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.ConversationParticipantsChangedEventArgs=void 0;const e=T();let t=class extends e.SessionEventArgs{constructor(n,i,s){super(s),this.privReason=n,this.privParticipant=i}get reason(){return this.privReason}get participants(){return this.privParticipant}};return Yi.ConversationParticipantsChangedEventArgs=t,Yi}var Xi={},xf;function H0(){if(xf)return Xi;xf=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.ConversationTranslationCanceledEventArgs=void 0;const e=Vs();let t=class extends e.CancellationEventArgsBase{};return Xi.ConversationTranslationCanceledEventArgs=t,Xi}var Zi={},Bf;function K0(){if(Bf)return Zi;Bf=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.ConversationTranslationEventArgs=void 0;const e=T();let t=class extends e.RecognitionEventArgs{constructor(n,i,s){super(i,s),this.privResult=n}get result(){return this.privResult}};return Zi.ConversationTranslationEventArgs=t,Zi}var eo={},Ff;function J0(){if(Ff)return eo;Ff=1,Object.defineProperty(eo,"__esModule",{value:!0}),eo.ConversationTranslationResult=void 0;const e=vC();let t=class extends e.TranslationRecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(i,a,o,c,u,l,void 0,void 0,p,d,h),this.privId=n,this.privOrigLang=s}get participantId(){return this.privId}get originalLang(){return this.privOrigLang}};return eo.ConversationTranslationResult=t,eo}var Ml={},to={},Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});Ks.StringUtils=void 0;class G0{static formatString(t,r){if(!t)return"";if(!r)return t;let n="",i="";const s=c=>{n+=c},a=c=>{i+=c};let o=s;for(let c=0;c<t.length;c++){const u=t[c],l=c+1<t.length?t[c+1]:"";switch(u){case"{":l==="{"?(o("{"),c++):o=a;break;case"}":l==="}"?(o("}"),c++):(r.hasOwnProperty(i)&&(n+=r[i]),o=s,i="");break;default:o(u);break}}return n}}Ks.StringUtils=G0;var qf;function Q0(){if(qf)return to;qf=1,Object.defineProperty(to,"__esModule",{value:!0}),to.ConversationTranslatorConnectionFactory=void 0;const e=ge(),t=Ks,r=z,n=T(),i=fe,s=St,a=Ct(),o=O();let c=class bC extends a.ConnectionFactoryBase{constructor(l){super(),r.Contracts.throwIfNullOrUndefined(l,"convGetter"),this.privConvGetter=l}create(l,p,d){const h=l.parameters.getProperty("ConversationTranslator_MultiChannelAudio","").toUpperCase()==="TRUE",m=this.privConvGetter().room,y=m.cognitiveSpeechRegion||l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Region,""),S={hostSuffix:a.ConnectionFactoryBase.getHostSuffix(y),path:bC.CTS_VIRT_MIC_PATH,region:encodeURIComponent(y)};S[s.QueryParameterNames.Language]=encodeURIComponent(l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage,"")),S[s.QueryParameterNames.CtsMeetingId]=encodeURIComponent(m.roomId),S[s.QueryParameterNames.CtsDeviceId]=encodeURIComponent(m.participantId),S[s.QueryParameterNames.CtsIsParticipant]=m.isHost?"":"&"+s.QueryParameterNames.CtsIsParticipant;let v="";const f={},g={};if(h){v=l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Endpoint),v||(v="wss://"+l.parameters.getProperty(n.PropertyId.SpeechServiceConnection_Host,"transcribe.{region}.cts.speech{hostSuffix}")+"{path}"),v=t.StringUtils.formatString(v,S);const P=new URL(v);P.searchParams.forEach((I,R)=>{f[R]=I}),new o.TranscriberConnectionFactory().setQueryParams(f,l,v),f[s.QueryParameterNames.CtsMeetingId]=S[s.QueryParameterNames.CtsMeetingId],f[s.QueryParameterNames.CtsDeviceId]=S[s.QueryParameterNames.CtsDeviceId],m.isHost||(f[s.QueryParameterNames.CtsIsParticipant]=""),s.QueryParameterNames.Format in f||(f[s.QueryParameterNames.Format]="simple"),P.searchParams.forEach((I,R)=>{P.searchParams.set(R,f[R]),delete f[R]}),v=P.toString()}else{const P=new o.TranslationConnectionFactory;v=P.getEndpointUrl(l,!0),v=t.StringUtils.formatString(v,S),P.setQueryParams(f,l,v)}g[i.HeaderNames.ConnectionId]=d,g[e.RestConfigBase.configParams.token]=m.token,p.token&&(g[p.headerName]=p.token);const C=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","").toUpperCase()==="TRUE";return Promise.resolve(new e.WebsocketConnection(v,f,g,new o.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),C,d))}};return to.ConversationTranslatorConnectionFactory=c,c.CTS_VIRT_MIC_PATH="/speech/recognition/dynamicaudio",to}var Uf;function Y0(){return Uf||(Uf=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranslator=e.SpeechState=void 0;const t=O(),r=Q0(),n=b(),i=z,s=T(),a=DC(),o=Jd();var c;(function(p){p[p.Inactive=0]="Inactive",p[p.Connecting=1]="Connecting",p[p.Connected=2]="Connected"})(c=e.SpeechState||(e.SpeechState={}));class u extends s.TranslationRecognizer{constructor(d,h,m,y){super(d,h,new r.ConversationTranslatorConnectionFactory(y)),this.privSpeechState=c.Inactive,m&&(this.privTranslator=m,this.sessionStarted=()=>{this.privSpeechState=c.Connected},this.sessionStopped=()=>{this.privSpeechState=c.Inactive},this.recognizing=(S,v)=>{this.privTranslator.recognizing&&this.privTranslator.recognizing(this.privTranslator,v)},this.recognized=async(S,v)=>{v.result?.errorDetails?(await this.cancelSpeech(),this.fireCancelEvent(v.result.errorDetails)):this.privTranslator.recognized&&this.privTranslator.recognized(this.privTranslator,v)},this.canceled=async()=>{if(this.privSpeechState!==c.Inactive)try{await this.cancelSpeech()}catch{this.privSpeechState=c.Inactive}})}get state(){return this.privSpeechState}set state(d){this.privSpeechState=d}set authentication(d){this.privReco.authentication=d}onConnection(){this.privSpeechState=c.Connected}async onCancelSpeech(){this.privSpeechState=c.Inactive,await this.cancelSpeech()}fireCancelEvent(d){try{if(this.privTranslator.canceled){const h=new o.ConversationTranslationCanceledEventArgs(s.CancellationReason.Error,d,s.CancellationErrorCode.RuntimeError);this.privTranslator.canceled(this.privTranslator,h)}}catch{}}async cancelSpeech(){try{this.stopContinuousRecognitionAsync(),await this.privReco?.disconnect(),this.privSpeechState=c.Inactive}catch{}}}class l extends o.ConversationCommon{constructor(d){super(d),this.privErrors=t.ConversationConnectionConfig.restErrors,this.privIsDisposed=!1,this.privIsSpeaking=!1,this.privPlaceholderKey="abcdefghijklmnopqrstuvwxyz012345",this.privPlaceholderRegion="westus",this.privProperties=new s.PropertyCollection}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get participants(){return this.privConversation?.participants}get canSpeak(){return!(!this.privConversation.isConnected||!this.privCTRecognizer||this.privIsSpeaking||this.privCTRecognizer.state===c.Connected||this.privCTRecognizer.state===c.Connecting||this.privConversation.isMutedByHost)}onToken(d){this.privCTRecognizer.authentication=d}setServiceProperty(d,h){const m=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));m[d]=h,this.privProperties.setProperty(t.ServicePropertiesPropertyName,JSON.stringify(m))}joinConversationAsync(d,h,m,y,S){try{if(typeof d=="string"){i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privConversation&&this.handleError(new Error(this.privErrors.permissionDeniedStart),S);let v=m;(v==null||v==="")&&(v=t.ConversationConnectionConfig.defaultLanguageCode),this.privSpeechTranslationConfig=s.SpeechTranslationConfig.fromSubscription(this.privPlaceholderKey,this.privPlaceholderRegion),this.privSpeechTranslationConfig.setProfanity(s.ProfanityOption.Masked),this.privSpeechTranslationConfig.addTargetLanguage(v),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_RecoLanguage],v),this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.ConversationTranslator_Name],h);const f=[s.PropertyId.SpeechServiceConnection_Host,s.PropertyId.ConversationTranslator_Host,s.PropertyId.SpeechServiceConnection_Endpoint,s.PropertyId.SpeechServiceConnection_ProxyHostName,s.PropertyId.SpeechServiceConnection_ProxyPassword,s.PropertyId.SpeechServiceConnection_ProxyPort,s.PropertyId.SpeechServiceConnection_ProxyUserName,"ConversationTranslator_MultiChannelAudio","ConversationTranslator_Region"];for(const C of f){const P=this.privProperties.getProperty(C);if(P){const E=typeof C=="string"?C:s.PropertyId[C];this.privSpeechTranslationConfig.setProperty(E,P)}}const g=JSON.parse(this.privProperties.getProperty(t.ServicePropertiesPropertyName,"{}"));for(const C of Object.keys(g))this.privSpeechTranslationConfig.setServiceProperty(C,g[C],s.ServicePropertyChannel.UriQueryParameter);this.privConversation=new a.ConversationImpl(this.privSpeechTranslationConfig),this.privConversation.conversationTranslator=this,this.privConversation.joinConversationAsync(d,h,v,C=>{C||this.handleError(new Error(this.privErrors.permissionDeniedConnect),S),this.privSpeechTranslationConfig.authorizationToken=C,this.privConversation.room.isHost=!1,this.privConversation.startConversationAsync(()=>{this.handleCallback(y,S)},P=>{this.handleError(P,S)})},C=>{this.handleError(C,S)})}else typeof d=="object"?(i.Contracts.throwIfNullOrUndefined(d,this.privErrors.invalidArgs.replace("{arg}","conversation id")),i.Contracts.throwIfNullOrWhitespace(h,this.privErrors.invalidArgs.replace("{arg}","nickname")),this.privProperties.setProperty(s.PropertyId.ConversationTranslator_Name,h),this.privConversation=d,this.privConversation.conversationTranslator=this,this.privConversation.room.isHost=!0,i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedConnect),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privSpeechTranslationConfig=d.config,this.handleCallback(m,y)):this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","invalid conversation type")),y)}catch(v){this.handleError(v,typeof m=="string"?S:y)}}leaveConversationAsync(d,h){(0,n.marshalPromiseToCallbacks)((async()=>{await this.cancelSpeech(),await this.privConversation.endConversationImplAsync(),await this.privConversation.deleteConversationImplAsync(),this.dispose()})(),d,h)}sendTextMessageAsync(d,h,m){try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrWhitespace(d,this.privErrors.invalidArgs.replace("{arg}",d)),this.privConversation.sendTextMessageAsync(d,h,m)}catch(y){this.handleError(y,m)}}startTranscribingAsync(d,h){(0,n.marshalPromiseToCallbacks)((async()=>{try{i.Contracts.throwIfNullOrUndefined(this.privConversation,this.privErrors.permissionDeniedSend),i.Contracts.throwIfNullOrUndefined(this.privConversation.room.token,this.privErrors.permissionDeniedConnect),this.privCTRecognizer===void 0&&await this.connectTranslatorRecognizer(),i.Contracts.throwIfNullOrUndefined(this.privCTRecognizer,this.privErrors.permissionDeniedSend),this.canSpeak||this.handleError(new Error(this.privErrors.permissionDeniedSend),h),await this.startContinuousRecognition(),this.privIsSpeaking=!0}catch(m){throw this.privIsSpeaking=!1,await this.cancelSpeech(),m}})(),d,h)}stopTranscribingAsync(d,h){(0,n.marshalPromiseToCallbacks)((async()=>{try{if(!this.privIsSpeaking){await this.cancelSpeech();return}this.privIsSpeaking=!1,await new Promise((m,y)=>{this.privCTRecognizer.stopContinuousRecognitionAsync(m,y)})}catch{await this.cancelSpeech()}})(),d,h)}isDisposed(){return this.privIsDisposed}dispose(d,h,m){(0,n.marshalPromiseToCallbacks)((async()=>{this.isDisposed&&!this.privIsSpeaking||(await this.cancelSpeech(),this.privIsDisposed=!0,this.privSpeechTranslationConfig.close(),this.privSpeechRecognitionLanguage=void 0,this.privProperties=void 0,this.privAudioConfig=void 0,this.privSpeechTranslationConfig=void 0,this.privConversation.dispose(),this.privConversation=void 0)})(),h,m)}async cancelSpeech(){try{this.privIsSpeaking=!1,await this.privCTRecognizer?.onCancelSpeech(),this.privCTRecognizer=void 0}catch{}}async connectTranslatorRecognizer(){try{this.privAudioConfig===void 0&&(this.privAudioConfig=s.AudioConfig.fromDefaultMicrophoneInput()),this.privSpeechTranslationConfig.getProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key])===this.privPlaceholderKey&&this.privSpeechTranslationConfig.setProperty(s.PropertyId[s.PropertyId.SpeechServiceConnection_Key],"");const d=()=>this.privConversation;this.privCTRecognizer=new u(this.privSpeechTranslationConfig,this.privAudioConfig,this,d)}catch(d){throw await this.cancelSpeech(),d}}startContinuousRecognition(){return new Promise((d,h)=>{this.privCTRecognizer.startContinuousRecognitionAsync(d,h)})}}e.ConversationTranslator=l}(Ml)),Ml}var ro={},$f;function X0(){if($f)return ro;$f=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.ConversationTranscriber=void 0;const e=O(),t=tt,r=b(),n=z,i=T();let s=class NC extends i.Recognizer{constructor(o,c){const u=o;n.Contracts.throwIfNull(u,"speechConfig"),n.Contracts.throwIfNullOrWhitespace(u.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage),i.PropertyId[i.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,u.properties,new e.ConversationTranscriberConnectionFactory,o.tokenCredential),this.privProperties.setProperty(i.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2"),this.privDisposedRecognizer=!1}static FromConfig(o,c,u){const l=o;return c.properties.mergeTo(l.properties),new NC(o,u)}get endpointId(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")}get authorizationToken(){return this.properties.getProperty(i.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){n.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(i.PropertyId.SpeechServiceAuthorization_Token,o)}get speechRecognitionLanguage(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage)}get outputFormat(){return n.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(e.OutputFormatPropertyName,i.OutputFormat[i.OutputFormat.Simple])===i.OutputFormat[i.OutputFormat.Simple]?i.OutputFormat.Simple:i.OutputFormat.Detailed}get properties(){return this.privProperties}startTranscribingAsync(o,c){(0,r.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(t.RecognitionMode.Conversation),o,c)}stopTranscribingAsync(o,c){(0,r.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,c)}close(o,c){n.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,r.marshalPromiseToCallbacks)(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new e.RecognizerConfig(o,this.privProperties)}createServiceRecognizer(o,c,u,l){const p=u;return l.isSpeakerDiarizationEnabled=!0,new e.ConversationTranscriptionServiceRecognizer(o,c,p,l,this)}};return ro.ConversationTranscriber=s,ro}var Nr={},Wf;function Z0(){if(Wf)return Nr;Wf=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.Participant=Nr.User=void 0;const e=T();class t{constructor(i){this.privUserId=i}get userId(){return this.privUserId}}Nr.User=t;class r{constructor(i,s,a,o,c,u,l,p){this.privId=i,this.privAvatar=s,this.privDisplayName=a,this.privIsHost=o,this.privIsMuted=c,this.privIsUsingTts=u,this.privPreferredLanguage=l,this.privVoice=p,this.privProperties=new e.PropertyCollection}get avatar(){return this.privAvatar}get displayName(){return this.privDisplayName}get id(){return this.privId}get preferredLanguage(){return this.privPreferredLanguage}get isHost(){return this.privIsHost}get isMuted(){return this.privIsMuted}get isUsingTts(){return this.privIsUsingTts}get voice(){return this.privVoice}get properties(){return this.privProperties}static From(i,s,a){return new r(i,"",i,!1,!1,!1,s,a)}}return Nr.Participant=r,Nr}var zC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ParticipantChangedReason=void 0,function(t){t[t.JoinedConversation=0]="JoinedConversation",t[t.LeftConversation=1]="LeftConversation",t[t.Updated=2]="Updated"}(e.ParticipantChangedReason||(e.ParticipantChangedReason={}))})(zC);var zr={},Vf;function e1(){if(Vf)return zr;Vf=1,Object.defineProperty(zr,"__esModule",{value:!0}),zr.MeetingImpl=zr.Meeting=void 0;const e=O(),t=b(),r=z,n=T();let i=class{constructor(){}static createMeetingAsync(o,c,u,l){if(r.Contracts.throwIfNullOrUndefined(o,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","config")),r.Contracts.throwIfNullOrUndefined(o.region,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Region")),r.Contracts.throwIfNull(c,"meetingId"),c.length===0)throw new Error("meetingId cannot be empty");!o.subscriptionKey&&!o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceAuthorization_Token])&&r.Contracts.throwIfNullOrUndefined(o.subscriptionKey,e.ConversationConnectionConfig.restErrors.invalidArgs.replace("{arg}","SpeechServiceConnection_Key"));const p=new s(o,c);return(0,t.marshalPromiseToCallbacks)((async()=>{})(),u,l),p}};zr.Meeting=i;class s extends i{constructor(o,c){super(),this.privErrors=e.ConversationConnectionConfig.restErrors,this.onConnected=p=>{this.privIsConnected=!0;try{this.privConversationTranslator?.sessionStarted&&this.privConversationTranslator.sessionStarted(this.privConversationTranslator,p)}catch{}},this.onDisconnected=p=>{try{this.privConversationTranslator?.sessionStopped&&this.privConversationTranslator.sessionStopped(this.privConversationTranslator,p)}catch{}finally{this.close(!1)}},this.onCanceled=(p,d)=>{try{this.privConversationTranslator?.canceled&&this.privConversationTranslator.canceled(this.privConversationTranslator,d)}catch{}},this.onParticipantUpdateCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.id);if(h!==void 0){switch(d.key){case e.ConversationTranslatorCommandTypes.changeNickname:h.displayName=d.value;break;case e.ConversationTranslatorCommandTypes.setUseTTS:h.isUsingTts=d.value;break;case e.ConversationTranslatorCommandTypes.setProfanityFiltering:h.profanity=d.value;break;case e.ConversationTranslatorCommandTypes.setMute:h.isMuted=d.value;break;case e.ConversationTranslatorCommandTypes.setTranslateToLanguages:h.translateToLanguages=d.value;break}this.privParticipants.addOrUpdateParticipant(h),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,[this.toParticipant(h)],d.sessionId))}}catch{}},this.onLockRoomCommandReceived=()=>{},this.onMuteAllCommandReceived=(p,d)=>{try{this.privParticipants.participants.forEach(h=>h.isMuted=h.isHost?!1:d.isMuted),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.Updated,this.toParticipants(!1),d.sessionId))}catch{}},this.onParticipantJoinCommandReceived=(p,d)=>{try{const h=this.privParticipants.addOrUpdateParticipant(d.participant);h!==void 0&&this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,[this.toParticipant(h)],d.sessionId))}catch{}},this.onParticipantLeaveCommandReceived=(p,d)=>{try{const h=this.privParticipants.getParticipant(d.participant.id);h!==void 0&&(this.privParticipants.deleteParticipant(d.participant.id),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.LeftConversation,[this.toParticipant(h)],d.sessionId)))}catch{}},this.onTranslationReceived=(p,d)=>{try{switch(d.command){case e.ConversationTranslatorMessageTypes.final:this.privConversationTranslator&&this.privConversationTranslator.transcribed(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.partial:this.privConversationTranslator&&this.privConversationTranslator.transcribing(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break;case e.ConversationTranslatorMessageTypes.instantMessage:this.privConversationTranslator&&this.privConversationTranslator.textMessageReceived(this.privConversationTranslator,new n.ConversationTranslationEventArgs(d.payload,void 0,d.sessionId));break}}catch{}},this.onParticipantsListReceived=(p,d)=>{try{if(d.sessionToken!==void 0&&d.sessionToken!==null&&(this.privRoom.token=d.sessionToken),this.privParticipants.participants=[...d.participants],this.privParticipants.me!==void 0&&(this.privIsReady=!0),this.privConversationTranslator&&this.privConversationTranslator.participantsChanged(this.privConversationTranslator,new n.ConversationParticipantsChangedEventArgs(n.ParticipantChangedReason.JoinedConversation,this.toParticipants(!0),d.sessionId)),this.me.isHost){const h=this.privConversationTranslator?.properties.getProperty(n.PropertyId.ConversationTranslator_Name);h!==void 0&&h.length>0&&h!==this.me.displayName&&this.changeNicknameAsync(h)}}catch{}},this.onConversationExpiration=(p,d)=>{try{this.privConversationTranslator&&this.privConversationTranslator.conversationExpiration(this.privConversationTranslator,d)}catch{}},this.privIsConnected=!1,this.privIsDisposed=!1,this.privConversationId="",this.privProperties=new n.PropertyCollection,this.privManager=new e.ConversationManager,o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage])||o.setProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage],e.ConversationConnectionConfig.defaultLanguageCode),this.privLanguage=o.getProperty(n.PropertyId[n.PropertyId.SpeechServiceConnection_RecoLanguage]),this.privConversationId=c,this.privConfig=o;const l=o;r.Contracts.throwIfNull(l,"speechConfig"),this.privProperties=l.properties.clone(),this.privIsConnected=!1,this.privParticipants=new e.InternalParticipants,this.privIsReady=!1,this.privTextMessageMaxLength=1e3}get room(){return this.privRoom}get connection(){return this.privConversationRecognizer}get config(){return this.privConfig}get meetingId(){return this.privRoom?this.privRoom.roomId:this.privConversationId}get properties(){return this.privProperties}get speechRecognitionLanguage(){return this.privLanguage}get isMutedByHost(){return this.privParticipants.me?.isHost?!1:this.privParticipants.me?.isMuted}get isConnected(){return this.privIsConnected&&this.privIsReady}get participants(){return this.toParticipants(!0)}get me(){return this.toParticipant(this.privParticipants.me)}get host(){return this.toParticipant(this.privParticipants.host)}get transcriberRecognizer(){return this.privTranscriberRecognizer}get meetingInfo(){const o=this.meetingId,c=this.participants.map(p=>({id:p.id,preferredLanguage:p.preferredLanguage,voice:p.voice})),u={};for(const p of e.ConversationConnectionConfig.transcriptionEventKeys){const d=this.properties.getProperty(p,"");d!==""&&(u[p]=d)}return{id:o,participants:c,meetingProperties:u}}get canSend(){return this.privIsConnected&&!this.privParticipants.me?.isMuted}get canSendAsHost(){return this.privIsConnected&&this.privParticipants.me?.isHost}get authorizationToken(){return this.privToken}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"authorizationToken"),this.privToken=o}createMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),this.privManager.createOrJoin(this.privProperties,void 0,u=>{u||this.handleError(new Error(this.privErrors.permissionDeniedConnect),c),this.privRoom=u,this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}startMeetingAsync(o,c){try{this.privConversationRecognizer&&this.handleError(new Error(this.privErrors.permissionDeniedStart),c),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedConnect),this.privParticipants.meId=this.privRoom.participantId,this.privConversationRecognizer.connected=this.onConnected,this.privConversationRecognizer.disconnected=this.onDisconnected,this.privConversationRecognizer.canceled=this.onCanceled,this.privConversationRecognizer.participantUpdateCommandReceived=this.onParticipantUpdateCommandReceived,this.privConversationRecognizer.lockRoomCommandReceived=this.onLockRoomCommandReceived,this.privConversationRecognizer.muteAllCommandReceived=this.onMuteAllCommandReceived,this.privConversationRecognizer.participantJoinCommandReceived=this.onParticipantJoinCommandReceived,this.privConversationRecognizer.participantLeaveCommandReceived=this.onParticipantLeaveCommandReceived,this.privConversationRecognizer.translationReceived=this.onTranslationReceived,this.privConversationRecognizer.participantsListReceived=this.onParticipantsListReceived,this.privConversationRecognizer.conversationExpiration=this.onConversationExpiration,this.privConversationRecognizer.connect(this.privRoom.token,()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}addParticipantAsync(o,c,u){r.Contracts.throwIfNullOrUndefined(o,"Participant"),(0,t.marshalPromiseToCallbacks)(this.addParticipantImplAsync(o),c,u)}joinMeetingAsync(o,c,u,l,p){try{r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","conversationId")),r.Contracts.throwIfNullOrWhitespace(c,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrWhitespace(u,this.privErrors.invalidArgs.replace("{arg}","language")),this.privManager.createOrJoin(this.privProperties,o,d=>{r.Contracts.throwIfNullOrUndefined(d,this.privErrors.permissionDeniedConnect),this.privRoom=d,this.privConfig.authorizationToken=d.cognitiveSpeechAuthToken,l&&l(d.cognitiveSpeechAuthToken)},d=>{this.handleError(d,p)})}catch(d){this.handleError(d,p)}}deleteMeetingAsync(o,c){(0,t.marshalPromiseToCallbacks)(this.deleteMeetingImplAsync(),o,c)}async deleteMeetingImplAsync(){r.Contracts.throwIfNullOrUndefined(this.privProperties,this.privErrors.permissionDeniedConnect),r.Contracts.throwIfNullOrWhitespace(this.privRoom.token,this.privErrors.permissionDeniedConnect),await this.privManager.leave(this.privProperties,this.privRoom.token),this.dispose()}endMeetingAsync(o,c){(0,t.marshalPromiseToCallbacks)(this.endMeetingImplAsync(),o,c)}endMeetingImplAsync(){return this.close(!0)}lockMeetingAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","lock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privConversationRecognizer,this.privErrors.permissionDeniedSend),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","mute")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!0),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}muteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!0),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}removeParticipantAsync(o,c,u){try{if(r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTranscriberRecognizer&&o.hasOwnProperty("id"))(0,t.marshalPromiseToCallbacks)(this.removeParticipantImplAsync(o),c,u);else{r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","remove")),u);let l="";typeof o=="string"?l=o:o.hasOwnProperty("id")?l=o.id:o.hasOwnProperty("userId")&&(l=o.userId),r.Contracts.throwIfNullOrWhitespace(l,this.privErrors.invalidArgs.replace("{arg}","userId")),this.participants.findIndex(d=>d.id===l)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getEjectCommand(l),()=>{this.handleCallback(c,u)},d=>{this.handleError(d,u)})}}catch(l){this.handleError(l,u)}}unlockMeetingAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unlock")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getLockCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteAllParticipantsAsync(o,c){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSendAsHost||this.handleError(new Error(this.privErrors.permissionDeniedConversation.replace("{command}","unmute all")),c),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteAllCommand(!1),()=>{this.handleCallback(o,c)},u=>{this.handleError(u,c)})}catch(u){this.handleError(u,c)}}unmuteParticipantAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","userId")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),!this.me.isHost&&this.me.id!==o&&this.handleError(new Error(this.privErrors.permissionDeniedParticipant.replace("{command}","mute")),u),this.privParticipants.getParticipantIndex(o)===-1&&this.handleError(new Error(this.privErrors.invalidParticipantRequest),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMuteCommand(o,!1),()=>{this.handleCallback(c,u)},p=>{this.handleError(p,u)})}catch(l){this.handleError(l,u)}}sendTextMessageAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","message")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),o.length>this.privTextMessageMaxLength&&this.handleError(new Error(this.privErrors.invalidArgs.replace("{arg}","message length")),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getMessageCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}setTranslatedLanguagesAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfArrayEmptyOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","languages")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getSetTranslateToLanguagesCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}changeNicknameAsync(o,c,u){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfDisposed(this.privConversationRecognizer.isDisposed()),r.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","nickname")),r.Contracts.throwIfNullOrUndefined(this.privRoom,this.privErrors.permissionDeniedSend),this.canSend||this.handleError(new Error(this.privErrors.permissionDeniedSend),u),this.privConversationRecognizer&&this.privConversationRecognizer.sendRequest(this.getChangeNicknameCommand(o),()=>{this.handleCallback(c,u)},l=>{this.handleError(l,u)})}catch(l){this.handleError(l,u)}}isDisposed(){return this.privIsDisposed}dispose(){this.isDisposed||(this.privIsDisposed=!0,this.config&&this.config.close(),this.privConfig=void 0,this.privLanguage=void 0,this.privProperties=void 0,this.privRoom=void 0,this.privToken=void 0,this.privManager=void 0,this.privIsConnected=!1,this.privIsReady=!1,this.privParticipants=void 0)}async connectTranscriberRecognizer(o){this.privTranscriberRecognizer&&await this.privTranscriberRecognizer.close(),await o.enforceAudioGating(),this.privTranscriberRecognizer=o,this.privTranscriberRecognizer.meeting=this}getKeepAlive(){const o=this.me?this.me.displayName:"default_nickname";return JSON.stringify({id:"0",nickname:o,participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.keepAlive})}addParticipantImplAsync(o){if(this.privParticipants.addOrUpdateParticipant(o)!==void 0&&this.privTranscriberRecognizer){const u=this.meetingInfo;return u.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(u,"join")}}removeParticipantImplAsync(o){this.privParticipants.deleteParticipant(o.id);const c=this.meetingInfo;return c.participants=[o],this.privTranscriberRecognizer.pushMeetingEvent(c,"leave")}async close(o){try{this.privIsConnected=!1,await this.privConversationRecognizer?.close(),this.privConversationRecognizer=void 0,this.privConversationTranslator&&this.privConversationTranslator.dispose()}catch(c){throw c}o&&this.dispose()}handleCallback(o,c){if(o){try{o()}catch(u){c&&c(u)}o=void 0}}handleError(o,c){if(c)if(o instanceof Error){const u=o;c(u.name+": "+u.message)}else c(o)}toParticipants(o){const c=this.privParticipants.participants.map(u=>this.toParticipant(u));return o?c:c.filter(u=>u.isHost===!1)}toParticipant(o){return new n.Participant(o.id,o.avatar,o.displayName,o.isHost,o.isMuted,o.isUsingTts,o.preferredLanguage,o.voice)}getMuteAllCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingd"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMuteAll,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMuteCommand(o,c){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"conversationId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setMute,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:c})}getLockCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setLockState,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getEjectCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(o,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.ejectParticipant,participantId:o,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand})}getSetTranslateToLanguagesCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.setTranslateToLanguages,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getChangeNicknameCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(o,"nickname"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),JSON.stringify({command:e.ConversationTranslatorCommandTypes.changeNickname,nickname:o,participantId:this.privRoom.participantId,roomid:this.privRoom.roomId,type:e.ConversationTranslatorMessageTypes.participantCommand,value:o})}getMessageCommand(o){return r.Contracts.throwIfNullOrWhitespace(this.privRoom.roomId,"meetingId"),r.Contracts.throwIfNullOrWhitespace(this.privRoom.participantId,"participantId"),r.Contracts.throwIfNullOrWhitespace(o,"message"),JSON.stringify({participantId:this.privRoom.participantId,roomId:this.privRoom.roomId,text:o,type:e.ConversationTranslatorMessageTypes.instantMessage})}}return zr.MeetingImpl=s,zr}var no={},Hf;function t1(){if(Hf)return no;Hf=1,Object.defineProperty(no,"__esModule",{value:!0}),no.MeetingTranscriptionCanceledEventArgs=void 0;const e=Vs();class t extends e.CancellationEventArgsBase{}return no.MeetingTranscriptionCanceledEventArgs=t,no}var io={},Kf;function r1(){if(Kf)return io;Kf=1,Object.defineProperty(io,"__esModule",{value:!0}),io.MeetingTranscriber=void 0;const e=O(),t=b(),r=z,n=T(),i=Jd();let s=class{constructor(o){this.privAudioConfig=o,this.privProperties=new n.PropertyCollection,this.privRecognizer=void 0,this.privDisposedRecognizer=!1}get speechRecognitionLanguage(){return r.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(n.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get internalData(){return this.privRecognizer.internalData}get connection(){return n.Connection.fromRecognizer(this.privRecognizer)}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}joinMeetingAsync(o,c,u){const l=o;r.Contracts.throwIfNullOrUndefined(i.MeetingImpl,"Meeting"),this.privRecognizer=new e.TranscriberRecognizer(o.config,this.privAudioConfig),r.Contracts.throwIfNullOrUndefined(this.privRecognizer,"Recognizer"),this.privRecognizer.connectMeetingCallbacks(this),(0,t.marshalPromiseToCallbacks)(l.connectTranscriberRecognizer(this.privRecognizer),c,u)}startTranscribingAsync(o,c){this.privRecognizer.startContinuousRecognitionAsync(o,c)}stopTranscribingAsync(o,c){this.privRecognizer.stopContinuousRecognitionAsync(o,c)}leaveMeetingAsync(o,c){this.privRecognizer.disconnectCallbacks(),(0,t.marshalPromiseToCallbacks)((async()=>{})(),o,c)}close(o,c){r.Contracts.throwIfDisposed(this.privDisposedRecognizer),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),o,c)}async dispose(o){this.privDisposedRecognizer||(this.privRecognizer&&(await this.privRecognizer.close(),this.privRecognizer=void 0),o&&(this.privDisposedRecognizer=!0))}};return io.MeetingTranscriber=s,io}var oo={},Jf;function n1(){if(Jf)return oo;Jf=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.ConversationTranscriptionResult=void 0;const e=T();let t=class extends e.RecognitionResult{constructor(n,i,s,a,o,c,u,l,p,d,h){super(n,i,s,a,o,c,u,p,d,h),this.privSpeakerId=l}get speakerId(){return this.privSpeakerId}};return oo.ConversationTranscriptionResult=t,oo}var Gf;function Jd(){return Gf||(Gf=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConversationTranscriptionResult=e.MeetingTranscriber=e.MeetingTranscriptionCanceledEventArgs=e.MeetingImpl=e.Meeting=e.ParticipantChangedReason=e.User=e.Participant=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.ConversationCommon=e.ConversationImpl=e.Conversation=void 0;var t=DC();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return t.Conversation}}),Object.defineProperty(e,"ConversationImpl",{enumerable:!0,get:function(){return t.ConversationImpl}});var r=du;Object.defineProperty(e,"ConversationCommon",{enumerable:!0,get:function(){return r.ConversationCommon}});var n=W0();Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return n.ConversationExpirationEventArgs}});var i=V0();Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return i.ConversationParticipantsChangedEventArgs}});var s=H0();Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return s.ConversationTranslationCanceledEventArgs}});var a=K0();Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return a.ConversationTranslationEventArgs}});var o=J0();Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return o.ConversationTranslationResult}});var c=Y0();Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return c.ConversationTranslator}});var u=X0();Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return u.ConversationTranscriber}});var l=Z0();Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return l.Participant}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return l.User}});var p=zC;Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return p.ParticipantChangedReason}});var d=e1();Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return d.Meeting}}),Object.defineProperty(e,"MeetingImpl",{enumerable:!0,get:function(){return d.MeetingImpl}});var h=t1();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return h.MeetingTranscriptionCanceledEventArgs}});var m=r1();Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return m.MeetingTranscriber}});var y=n1();Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return y.ConversationTranscriptionResult}})}(kl)),kl}var Lr={},Qf;function Gd(){if(Qf)return Lr;Qf=1,Object.defineProperty(Lr,"__esModule",{value:!0}),Lr.SynthesisRequest=Lr.Synthesizer=void 0;const e=O(),t=b(),r=z,n=T();let i=class LC{constructor(o){const c=o;r.Contracts.throwIfNull(c,"speechConfig"),this.privProperties=c.properties.clone(),this.privDisposed=!1,this.privSynthesizing=!1,this.synthesisRequestQueue=new t.Queue,this.tokenCredential=o.tokenCredential}get authorizationToken(){return this.properties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){r.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(n.PropertyId.SpeechServiceAuthorization_Token,o)}get properties(){return this.privProperties}get autoDetectSourceLanguage(){return this.properties.getProperty(n.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages)===e.AutoDetectSourceLanguagesOpenRangeOptionName}buildSsml(o){const c={"af-ZA":"af-ZA-AdriNeural","am-ET":"am-ET-AmehaNeural","ar-AE":"ar-AE-FatimaNeural","ar-BH":"ar-BH-AliNeural","ar-DZ":"ar-DZ-AminaNeural","ar-EG":"ar-EG-SalmaNeural","ar-IQ":"ar-IQ-BasselNeural","ar-JO":"ar-JO-SanaNeural","ar-KW":"ar-KW-FahedNeural","ar-LY":"ar-LY-ImanNeural","ar-MA":"ar-MA-JamalNeural","ar-QA":"ar-QA-AmalNeural","ar-SA":"ar-SA-HamedNeural","ar-SY":"ar-SY-AmanyNeural","ar-TN":"ar-TN-HediNeural","ar-YE":"ar-YE-MaryamNeural","bg-BG":"bg-BG-BorislavNeural","bn-BD":"bn-BD-NabanitaNeural","bn-IN":"bn-IN-BashkarNeural","ca-ES":"ca-ES-JoanaNeural","cs-CZ":"cs-CZ-AntoninNeural","cy-GB":"cy-GB-AledNeural","da-DK":"da-DK-ChristelNeural","de-AT":"de-AT-IngridNeural","de-CH":"de-CH-JanNeural","de-DE":"de-DE-KatjaNeural","el-GR":"el-GR-AthinaNeural","en-AU":"en-AU-NatashaNeural","en-CA":"en-CA-ClaraNeural","en-GB":"en-GB-LibbyNeural","en-HK":"en-HK-SamNeural","en-IE":"en-IE-ConnorNeural","en-IN":"en-IN-NeerjaNeural","en-KE":"en-KE-AsiliaNeural","en-NG":"en-NG-AbeoNeural","en-NZ":"en-NZ-MitchellNeural","en-PH":"en-PH-JamesNeural","en-SG":"en-SG-LunaNeural","en-TZ":"en-TZ-ElimuNeural","en-US":"en-US-AvaMultilingualNeural","en-ZA":"en-ZA-LeahNeural","es-AR":"es-AR-ElenaNeural","es-BO":"es-BO-MarceloNeural","es-CL":"es-CL-CatalinaNeural","es-CO":"es-CO-GonzaloNeural","es-CR":"es-CR-JuanNeural","es-CU":"es-CU-BelkysNeural","es-DO":"es-DO-EmilioNeural","es-EC":"es-EC-AndreaNeural","es-ES":"es-ES-AlvaroNeural","es-GQ":"es-GQ-JavierNeural","es-GT":"es-GT-AndresNeural","es-HN":"es-HN-CarlosNeural","es-MX":"es-MX-DaliaNeural","es-NI":"es-NI-FedericoNeural","es-PA":"es-PA-MargaritaNeural","es-PE":"es-PE-AlexNeural","es-PR":"es-PR-KarinaNeural","es-PY":"es-PY-MarioNeural","es-SV":"es-SV-LorenaNeural","es-US":"es-US-AlonsoNeural","es-UY":"es-UY-MateoNeural","es-VE":"es-VE-PaolaNeural","et-EE":"et-EE-AnuNeural","fa-IR":"fa-IR-DilaraNeural","fi-FI":"fi-FI-SelmaNeural","fil-PH":"fil-PH-AngeloNeural","fr-BE":"fr-BE-CharlineNeural","fr-CA":"fr-CA-SylvieNeural","fr-CH":"fr-CH-ArianeNeural","fr-FR":"fr-FR-DeniseNeural","ga-IE":"ga-IE-ColmNeural","gl-ES":"gl-ES-RoiNeural","gu-IN":"gu-IN-DhwaniNeural","he-IL":"he-IL-AvriNeural","hi-IN":"hi-IN-MadhurNeural","hr-HR":"hr-HR-GabrijelaNeural","hu-HU":"hu-HU-NoemiNeural","id-ID":"id-ID-ArdiNeural","is-IS":"is-IS-GudrunNeural","it-IT":"it-IT-IsabellaNeural","ja-JP":"ja-JP-NanamiNeural","jv-ID":"jv-ID-DimasNeural","kk-KZ":"kk-KZ-AigulNeural","km-KH":"km-KH-PisethNeural","kn-IN":"kn-IN-GaganNeural","ko-KR":"ko-KR-SunHiNeural","lo-LA":"lo-LA-ChanthavongNeural","lt-LT":"lt-LT-LeonasNeural","lv-LV":"lv-LV-EveritaNeural","mk-MK":"mk-MK-AleksandarNeural","ml-IN":"ml-IN-MidhunNeural","mr-IN":"mr-IN-AarohiNeural","ms-MY":"ms-MY-OsmanNeural","mt-MT":"mt-MT-GraceNeural","my-MM":"my-MM-NilarNeural","nb-NO":"nb-NO-PernilleNeural","nl-BE":"nl-BE-ArnaudNeural","nl-NL":"nl-NL-ColetteNeural","pl-PL":"pl-PL-AgnieszkaNeural","ps-AF":"ps-AF-GulNawazNeural","pt-BR":"pt-BR-FranciscaNeural","pt-PT":"pt-PT-DuarteNeural","ro-RO":"ro-RO-AlinaNeural","ru-RU":"ru-RU-SvetlanaNeural","si-LK":"si-LK-SameeraNeural","sk-SK":"sk-SK-LukasNeural","sl-SI":"sl-SI-PetraNeural","so-SO":"so-SO-MuuseNeural","sr-RS":"sr-RS-NicholasNeural","su-ID":"su-ID-JajangNeural","sv-SE":"sv-SE-SofieNeural","sw-KE":"sw-KE-RafikiNeural","sw-TZ":"sw-TZ-DaudiNeural","ta-IN":"ta-IN-PallaviNeural","ta-LK":"ta-LK-KumarNeural","ta-SG":"ta-SG-AnbuNeural","te-IN":"te-IN-MohanNeural","th-TH":"th-TH-PremwadeeNeural","tr-TR":"tr-TR-AhmetNeural","uk-UA":"uk-UA-OstapNeural","ur-IN":"ur-IN-GulNeural","ur-PK":"ur-PK-AsadNeural","uz-UZ":"uz-UZ-MadinaNeural","vi-VN":"vi-VN-HoaiMyNeural","zh-CN":"zh-CN-XiaoxiaoNeural","zh-HK":"zh-HK-HiuMaanNeural","zh-TW":"zh-TW-HsiaoChenNeural","zu-ZA":"zu-ZA-ThandoNeural"};let u=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthLanguage,"en-US"),l=this.properties.getProperty(n.PropertyId.SpeechServiceConnection_SynthVoice,""),p=LC.XMLEncode(o);return this.autoDetectSourceLanguage?u="en-US":l=l||c[u],l&&(p=`<voice name='${l}'>${p}</voice>`),p=`<speak version='1.0' xmlns='http://www.w3.org/2001/10/synthesis' xmlns:mstts='http://www.w3.org/2001/mstts' xmlns:emo='http://www.w3.org/2009/10/emotionml' xml:lang='${u}'>${p}</speak>`,p}async dispose(o){this.privDisposed||(o&&this.privAdapter&&await this.privAdapter.dispose(),this.privDisposed=!0)}async adapterSpeak(){if(!this.privDisposed&&!this.privSynthesizing){this.privSynthesizing=!0;const o=await this.synthesisRequestQueue.dequeue();return this.privAdapter.Speak(o.text,o.isSSML,o.requestId,o.cb,o.err,o.dataStream)}}createSynthesizerConfig(o){return new e.SynthesizerConfig(o,this.privProperties)}implCommonSynthesizeSetup(){let o=typeof window<"u"?"Browser":"Node",c="unknown",u="unknown";typeof navigator<"u"&&(o=o+"/"+navigator.platform,c=navigator.userAgent,u=navigator.appVersion);const l=this.createSynthesizerConfig(new e.SpeechServiceConfig(new e.Context(new e.OS(o,c,u)))),p=this.privProperties.getProperty(n.PropertyId.SpeechServiceConnection_Key,void 0),d=p&&p!==""?new e.CognitiveSubscriptionKeyAuthentication(p):this.tokenCredential?new e.CognitiveTokenAuthentication(async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(h){throw h}},async()=>{try{return(await this.tokenCredential.getToken("https://cognitiveservices.azure.com/.default"))?.token??""}catch(h){throw h}}):new e.CognitiveTokenAuthentication(()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)},()=>{const h=this.privProperties.getProperty(n.PropertyId.SpeechServiceAuthorization_Token,void 0);return Promise.resolve(h)});this.privAdapter=this.createSynthesisAdapter(d,this.privConnectionFactory,l),this.privRestAdapter=this.createRestSynthesisAdapter(d,l)}static XMLEncode(o){return o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}};Lr.Synthesizer=i;class s{constructor(o,c,u,l,p,d){this.requestId=o,this.text=c,this.isSSML=u,this.cb=l,this.err=p,this.dataStream=d}}return Lr.SynthesisRequest=s,Lr}var so={},Yf;function i1(){if(Yf)return so;Yf=1,Object.defineProperty(so,"__esModule",{value:!0}),so.SpeechSynthesizer=void 0;const e=O(),t=b(),r=Ws,n=Tr,i=Ce,s=z,a=T(),o=Gd();let c=class jC extends a.Synthesizer{constructor(l,p){super(l),p!==null&&(p===void 0?this.audioConfig=typeof window>"u"?void 0:a.AudioConfig.fromDefaultSpeakerOutput():this.audioConfig=p),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.implCommonSynthesizeSetup()}static FromConfig(l,p,d){const h=l;return p.properties.mergeTo(h.properties),new jC(l,d)}speakTextAsync(l,p,d,h){this.speakImpl(l,!1,p,d,h)}speakSsmlAsync(l,p,d,h){this.speakImpl(l,!0,p,d,h)}async getVoicesAsync(l=""){return this.getVoices(l)}close(l,p){s.Contracts.throwIfDisposed(this.privDisposed),(0,t.marshalPromiseToCallbacks)(this.dispose(!0),l,p)}get internalData(){return this.privAdapter}createSynthesisAdapter(l,p,d){return new e.SpeechSynthesisAdapter(l,p,d,this,this.audioConfig)}createRestSynthesisAdapter(l,p){return new e.SynthesisRestAdapter(p,l)}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(a.SpeechSynthesisOutputFormat[this.properties.getProperty(a.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0)])}speakImpl(l,p,d,h,m){try{s.Contracts.throwIfDisposed(this.privDisposed);const y=(0,t.createNoDashGuid)();let S;m instanceof a.PushAudioOutputStreamCallback?S=new i.PushAudioOutputStreamImpl(m):m instanceof a.PullAudioOutputStream?S=m:m!==void 0?S=new r.AudioFileWriter(m):S=void 0,this.synthesisRequestQueue.enqueue(new o.SynthesisRequest(y,l,p,v=>{if(this.privSynthesizing=!1,d)try{d(v)}catch(f){h&&h(f)}d=void 0,this.adapterSpeak().catch(()=>{})},v=>{h&&h(v)},S)),this.adapterSpeak().catch(()=>{})}catch(y){if(h)if(y instanceof Error){const S=y;h(S.name+": "+S.message)}else h(y);this.dispose(!0).catch(()=>{})}}async getVoices(l){const p=(0,t.createNoDashGuid)(),d=await this.privRestAdapter.getVoicesList(p);if(d.ok&&Array.isArray(d.json)){let h=d.json;return l&&l.length>0&&(h=h.filter(m=>!!m.Locale&&m.Locale.toLowerCase()===l.toLowerCase())),new a.SynthesisVoicesResult(p,h,void 0)}else return new a.SynthesisVoicesResult(p,void 0,`Error: ${d.status}: ${d.statusText}`)}};return so.SpeechSynthesizer=c,so}var hu={};Object.defineProperty(hu,"__esModule",{value:!0});hu.SynthesisResult=void 0;class o1{constructor(t,r,n,i){this.privResultId=t,this.privReason=r,this.privErrorDetails=n,this.privProperties=i}get resultId(){return this.privResultId}get reason(){return this.privReason}get errorDetails(){return this.privErrorDetails}get properties(){return this.privProperties}}hu.SynthesisResult=o1;var ao={},Xf;function s1(){if(Xf)return ao;Xf=1,Object.defineProperty(ao,"__esModule",{value:!0}),ao.SpeechSynthesisResult=void 0;const e=T();let t=class extends e.SynthesisResult{constructor(n,i,s,a,o,c){super(n,i,a,o),this.privAudioData=s,this.privAudioDuration=c}get audioData(){return this.privAudioData}get audioDuration(){return this.privAudioDuration}};return ao.SpeechSynthesisResult=t,ao}var vu={};Object.defineProperty(vu,"__esModule",{value:!0});vu.SpeechSynthesisEventArgs=void 0;class a1{constructor(t){this.privResult=t}get result(){return this.privResult}}vu.SpeechSynthesisEventArgs=a1;var fu={};Object.defineProperty(fu,"__esModule",{value:!0});fu.SpeechSynthesisWordBoundaryEventArgs=void 0;class c1{constructor(t,r,n,i,s,a){this.privAudioOffset=t,this.privDuration=r,this.privText=n,this.privWordLength=i,this.privTextOffset=s,this.privBoundaryType=a}get audioOffset(){return this.privAudioOffset}get duration(){return this.privDuration}get text(){return this.privText}get wordLength(){return this.privWordLength}get textOffset(){return this.privTextOffset}get boundaryType(){return this.privBoundaryType}}fu.SpeechSynthesisWordBoundaryEventArgs=c1;var gu={};Object.defineProperty(gu,"__esModule",{value:!0});gu.SpeechSynthesisBookmarkEventArgs=void 0;class u1{constructor(t,r){this.privAudioOffset=t,this.privText=r}get audioOffset(){return this.privAudioOffset}get text(){return this.privText}}gu.SpeechSynthesisBookmarkEventArgs=u1;var mu={};Object.defineProperty(mu,"__esModule",{value:!0});mu.SpeechSynthesisVisemeEventArgs=void 0;class l1{constructor(t,r,n){this.privAudioOffset=t,this.privVisemeId=r,this.privAnimation=n}get audioOffset(){return this.privAudioOffset}get visemeId(){return this.privVisemeId}get animation(){return this.privAnimation}}mu.SpeechSynthesisVisemeEventArgs=l1;var xC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SpeechSynthesisBoundaryType=void 0,function(t){t.Word="WordBoundary",t.Punctuation="PunctuationBoundary",t.Sentence="SentenceBoundary"}(e.SpeechSynthesisBoundaryType||(e.SpeechSynthesisBoundaryType={}))})(xC);var co={},Zf;function p1(){if(Zf)return co;Zf=1,Object.defineProperty(co,"__esModule",{value:!0}),co.SynthesisVoicesResult=void 0;const e=T();let t=class extends e.SynthesisResult{constructor(n,i,s){if(Array.isArray(i)){super(n,e.ResultReason.VoicesListRetrieved,void 0,new e.PropertyCollection),this.privVoices=[];for(const a of i)this.privVoices.push(new e.VoiceInfo(a))}else super(n,e.ResultReason.Canceled,s||"Error information unavailable",new e.PropertyCollection)}get voices(){return this.privVoices}};return co.SynthesisVoicesResult=t,co}var BC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=void 0;var t;(function(a){a[a.Unknown=0]="Unknown",a[a.Female=1]="Female",a[a.Male=2]="Male",a[a.Neutral=3]="Neutral"})(t=e.SynthesisVoiceGender||(e.SynthesisVoiceGender={}));var r;(function(a){a[a.Unknown=0]="Unknown",a[a.OnlineNeural=1]="OnlineNeural",a[a.OnlineStandard=2]="OnlineStandard",a[a.OfflineNeural=3]="OfflineNeural",a[a.OfflineStandard=4]="OfflineStandard",a[a.OnlineNeuralHD=5]="OnlineNeuralHD"})(r=e.SynthesisVoiceType||(e.SynthesisVoiceType={}));const n={[t[t.Neutral]]:t.Neutral,[t[t.Male]]:t.Male,[t[t.Female]]:t.Female},i={Neural:r.OnlineNeural,NeuralHD:r.OnlineNeuralHD};class s{constructor(o){if(this.privStyleList=[],o){if(this.privName=o.Name,this.privLocale=o.Locale,this.privShortName=o.ShortName,this.privLocaleName=o.LocaleName,this.privDisplayName=o.DisplayName,this.privLocalName=o.LocalName,this.privVoiceType=i[o.VoiceType]||r.Unknown,this.privGender=n[o.Gender]||t.Unknown,o.StyleList&&Array.isArray(o.StyleList))for(const c of o.StyleList)this.privStyleList.push(c);this.privSampleRateHertz=o.SampleRateHertz,this.privStatus=o.Status,o.ExtendedPropertyMap&&(this.privExtendedPropertyMap=o.ExtendedPropertyMap),this.privWordsPerMinute=o.WordsPerMinute,Array.isArray(o.SecondaryLocaleList)&&(this.privSecondaryLocaleList=[...o.SecondaryLocaleList]),Array.isArray(o.RolePlayList)&&(this.privRolePlayList=[...o.RolePlayList]),o.VoiceTag&&(this.privVoiceTag=o.VoiceTag)}}get name(){return this.privName}get locale(){return this.privLocale}get shortName(){return this.privShortName}get displayName(){return this.privDisplayName}get localName(){return this.privLocalName}get localeName(){return this.privLocaleName}get gender(){return this.privGender}get voiceType(){return this.privVoiceType}get styleList(){return this.privStyleList}get sampleRateHertz(){return this.privSampleRateHertz}get status(){return this.privStatus}get extendedPropertyMap(){return this.privExtendedPropertyMap}get wordsPerMinute(){return this.privWordsPerMinute}get secondaryLocaleList(){return this.privSecondaryLocaleList}get rolePlayList(){return this.privRolePlayList}get voiceTag(){return this.privVoiceTag}}e.VoiceInfo=s})(BC);var yu={};Object.defineProperty(yu,"__esModule",{value:!0});yu.SpeakerAudioDestination=void 0;const jr=b(),d1=Ce,Ue=Ir,h1=60*30,eg={[Ue.AudioFormatTag.PCM]:"audio/wav",[Ue.AudioFormatTag.MuLaw]:"audio/x-wav",[Ue.AudioFormatTag.MP3]:"audio/mpeg",[Ue.AudioFormatTag.OGG_OPUS]:"audio/ogg",[Ue.AudioFormatTag.WEBM_OPUS]:"audio/webm; codecs=opus",[Ue.AudioFormatTag.ALaw]:"audio/x-wav",[Ue.AudioFormatTag.FLAC]:"audio/flac",[Ue.AudioFormatTag.AMR_WB]:"audio/amr-wb",[Ue.AudioFormatTag.G722]:"audio/G722"};class v1{constructor(t){this.privPlaybackStarted=!1,this.privAppendingToBuffer=!1,this.privMediaSourceOpened=!1,this.privBytesReceived=0,this.privId=t||(0,jr.createNoDashGuid)(),this.privIsPaused=!1,this.privIsClosed=!1}id(){return this.privId}write(t,r,n){this.privAudioBuffer!==void 0?(this.privAudioBuffer.push(t),this.updateSourceBuffer().then(()=>{r&&r()},i=>{n&&n(i)})):this.privAudioOutputStream!==void 0&&(this.privAudioOutputStream.write(t),this.privBytesReceived+=t.byteLength)}close(t,r){if(this.privIsClosed=!0,this.privSourceBuffer!==void 0)this.handleSourceBufferUpdateEnd().then(()=>{t&&t()},n=>{r&&r(n)});else if(this.privAudioOutputStream!==void 0&&typeof window<"u")if((this.privFormat.formatTag===Ue.AudioFormatTag.PCM||this.privFormat.formatTag===Ue.AudioFormatTag.MuLaw||this.privFormat.formatTag===Ue.AudioFormatTag.ALaw)&&this.privFormat.hasHeader===!1)console.warn("Play back is not supported for raw PCM, mulaw or alaw format without header."),this.onAudioEnd&&this.onAudioEnd(this);else{let n=new ArrayBuffer(this.privBytesReceived);this.privAudioOutputStream.read(n).then(()=>{n=this.privFormat.addHeader(n);const i=new Blob([n],{type:eg[this.privFormat.formatTag]});this.privAudio.src=window.URL.createObjectURL(i),this.notifyPlayback().then(()=>{t&&t()},s=>{r&&r(s)})},i=>{r&&r(i)})}else this.onAudioEnd&&this.onAudioEnd(this)}set format(t){if(typeof AudioContext<"u"||typeof window<"u"&&typeof window.webkitAudioContext<"u"){this.privFormat=t;const r=eg[this.privFormat.formatTag];r===void 0?console.warn(`Unknown mimeType for format ${Ue.AudioFormatTag[this.privFormat.formatTag]}; playback is not supported.`):typeof MediaSource<"u"&&MediaSource.isTypeSupported(r)?(this.privAudio=new Audio,this.privAudioBuffer=[],this.privMediaSource=new MediaSource,this.privAudio.src=URL.createObjectURL(this.privMediaSource),this.privAudio.load(),this.privMediaSource.onsourceopen=()=>{this.privMediaSourceOpened=!0,this.privMediaSource.duration=h1,this.privSourceBuffer=this.privMediaSource.addSourceBuffer(r),this.privSourceBuffer.onupdate=()=>{this.updateSourceBuffer().catch(n=>{jr.Events.instance.onEvent(new jr.BackgroundEvent(n))})},this.privSourceBuffer.onupdateend=()=>{this.handleSourceBufferUpdateEnd().catch(n=>{jr.Events.instance.onEvent(new jr.BackgroundEvent(n))})},this.privSourceBuffer.onupdatestart=()=>{this.privAppendingToBuffer=!1}},this.updateSourceBuffer().catch(n=>{jr.Events.instance.onEvent(new jr.BackgroundEvent(n))})):(console.warn(`Format ${Ue.AudioFormatTag[this.privFormat.formatTag]} could not be played by MSE, streaming playback is not enabled.`),this.privAudioOutputStream=new d1.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privFormat,this.privAudio=new Audio)}}get volume(){return this.privAudio?.volume??-1}set volume(t){this.privAudio&&(this.privAudio.volume=t)}mute(){this.privAudio&&(this.privAudio.muted=!0)}unmute(){this.privAudio&&(this.privAudio.muted=!1)}get isClosed(){return this.privIsClosed}get currentTime(){return this.privAudio!==void 0?this.privAudio.currentTime:-1}pause(){!this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.pause(),this.privIsPaused=!0)}resume(t,r){this.privIsPaused&&this.privAudio!==void 0&&(this.privAudio.play().then(()=>{t&&t()},n=>{r&&r(n)}),this.privIsPaused=!1)}get internalAudio(){return this.privAudio}async updateSourceBuffer(){if(this.privAudioBuffer!==void 0&&this.privAudioBuffer.length>0&&this.sourceBufferAvailable()){this.privAppendingToBuffer=!0;const t=this.privAudioBuffer.shift();try{this.privSourceBuffer.appendBuffer(t)}catch{this.privAudioBuffer.unshift(t),console.log("buffer filled, pausing addition of binaries until space is made");return}await this.notifyPlayback()}else this.canEndStream()&&await this.handleSourceBufferUpdateEnd()}async handleSourceBufferUpdateEnd(){this.canEndStream()&&this.sourceBufferAvailable()&&(this.privMediaSource.endOfStream(),await this.notifyPlayback())}async notifyPlayback(){!this.privPlaybackStarted&&this.privAudio!==void 0&&(this.privPlaybackStarted=!0,this.onAudioStart&&this.onAudioStart(this),this.privAudio.onended=()=>{this.onAudioEnd&&this.onAudioEnd(this)},this.privIsPaused||await this.privAudio.play())}canEndStream(){return this.isClosed&&this.privSourceBuffer!==void 0&&this.privAudioBuffer.length===0&&this.privMediaSourceOpened&&!this.privAppendingToBuffer&&this.privMediaSource.readyState==="open"}sourceBufferAvailable(){return this.privSourceBuffer!==void 0&&!this.privSourceBuffer.updating}}yu.SpeakerAudioDestination=v1;var uo={},tg;function f1(){if(tg)return uo;tg=1,Object.defineProperty(uo,"__esModule",{value:!0}),uo.ConversationTranscriptionCanceledEventArgs=void 0;const e=Vs();let t=class extends e.CancellationEventArgsBase{};return uo.ConversationTranscriptionCanceledEventArgs=t,uo}var lo={},rg;function g1(){if(rg)return lo;rg=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.MeetingTranscriptionCanceledEventArgs=void 0;const e=Vs();let t=class extends e.CancellationEventArgsBase{};return lo.MeetingTranscriptionCanceledEventArgs=t,lo}var FC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGradingSystem=void 0,function(t){t[t.FivePoint=1]="FivePoint",t[t.HundredMark=2]="HundredMark"}(e.PronunciationAssessmentGradingSystem||(e.PronunciationAssessmentGradingSystem={}))})(FC);var qC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PronunciationAssessmentGranularity=void 0,function(t){t[t.Phoneme=1]="Phoneme",t[t.Word=2]="Word",t[t.FullText=3]="FullText"}(e.PronunciationAssessmentGranularity||(e.PronunciationAssessmentGranularity={}))})(qC);var po={},ng;function m1(){if(ng)return po;ng=1,Object.defineProperty(po,"__esModule",{value:!0}),po.PronunciationAssessmentConfig=void 0;const e=z,t=T();let r=class UC{constructor(i,s=t.PronunciationAssessmentGradingSystem.FivePoint,a=t.PronunciationAssessmentGranularity.Phoneme,o=!1){e.Contracts.throwIfNullOrUndefined(i,"referenceText"),this.privProperties=new t.PropertyCollection,this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_GradingSystem,t.PronunciationAssessmentGradingSystem[s]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Granularity,t.PronunciationAssessmentGranularity[a]),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,String(o))}static fromJSON(i){e.Contracts.throwIfNullOrUndefined(i,"json");const s=new UC("");return s.privProperties=new t.PropertyCollection,s.properties.setProperty(t.PropertyId.PronunciationAssessment_Json,i),s}toJSON(){return this.updateJson(),this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Params)}applyTo(i){this.updateJson();const s=i.internalData;s.expectContentAssessmentResponse=!!this.privContentAssessmentTopic,s.speechContext.setPronunciationAssessmentParams(this.properties.getProperty(t.PropertyId.PronunciationAssessment_Params),this.privContentAssessmentTopic,s.isSpeakerDiarizationEnabled)}get referenceText(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText)}set referenceText(i){e.Contracts.throwIfNullOrWhitespace(i,"referenceText"),this.properties.setProperty(t.PropertyId.PronunciationAssessment_ReferenceText,i)}set phonemeAlphabet(i){e.Contracts.throwIfNullOrWhitespace(i,"phonemeAlphabet"),this.privPhonemeAlphabet=i}set enableMiscue(i){const s=i?"true":"false";this.properties.setProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,s)}get enableMiscue(){return this.properties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue,"false").toLowerCase()==="true"}set nbestPhonemeCount(i){this.privNBestPhonemeCount=i}set enableProsodyAssessment(i){this.privEnableProsodyAssessment=i}enableContentAssessmentWithTopic(i){this.privContentAssessmentTopic=i}get properties(){return this.privProperties}updateJson(){const i=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Json,"{}"),s=JSON.parse(i),a=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_ReferenceText);a&&(s.referenceText=a);const o=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_GradingSystem);o&&(s.gradingSystem=o);const c=this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_Granularity);c&&(s.granularity=c),this.privPhonemeAlphabet&&(s.phonemeAlphabet=this.privPhonemeAlphabet),this.privNBestPhonemeCount&&(s.nbestPhonemeCount=this.privNBestPhonemeCount),s.enableProsodyAssessment=this.privEnableProsodyAssessment,s.dimension="Comprehensive",this.privProperties.getProperty(t.PropertyId.PronunciationAssessment_EnableMiscue)&&(s.enableMiscue=this.enableMiscue),this.privProperties.setProperty(t.PropertyId.PronunciationAssessment_Params,JSON.stringify(s))}};return po.PronunciationAssessmentConfig=r,po}var xr={},ig;function y1(){if(ig)return xr;ig=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.PronunciationAssessmentResult=xr.ContentAssessmentResult=void 0;const e=z,t=T();class r{constructor(s){this.privPronJson=s}get grammarScore(){return this.privPronJson.ContentAssessment.GrammarScore}get vocabularyScore(){return this.privPronJson.ContentAssessment.VocabularyScore}get topicScore(){return this.privPronJson.ContentAssessment.TopicScore}}xr.ContentAssessmentResult=r;let n=class $C{constructor(s){const a=JSON.parse(s);e.Contracts.throwIfNullOrUndefined(a.NBest[0],"NBest"),this.privPronJson=a.NBest[0]}static fromResult(s){e.Contracts.throwIfNullOrUndefined(s,"result");const a=s.properties.getProperty(t.PropertyId.SpeechServiceResponse_JsonResult);return e.Contracts.throwIfNullOrUndefined(a,"json"),new $C(a)}get detailResult(){return this.privPronJson}get accuracyScore(){return this.detailResult.PronunciationAssessment?.AccuracyScore}get pronunciationScore(){return this.detailResult.PronunciationAssessment?.PronScore}get completenessScore(){return this.detailResult.PronunciationAssessment?.CompletenessScore}get fluencyScore(){return this.detailResult.PronunciationAssessment?.FluencyScore}get prosodyScore(){return this.detailResult.PronunciationAssessment?.ProsodyScore}get contentAssessmentResult(){if(this.detailResult.ContentAssessment!==void 0)return new r(this.detailResult)}};return xr.PronunciationAssessmentResult=n,xr}var ho={},og;function S1(){if(og)return ho;og=1,Object.defineProperty(ho,"__esModule",{value:!0}),ho.AvatarConfig=void 0;const e=z,t=T();let r=class{constructor(i,s,a){this.privCustomized=!1,this.privUseBuiltInVoice=!1,e.Contracts.throwIfNullOrWhitespace(i,"character"),this.character=i,this.style=s,a===void 0&&(a=new t.AvatarVideoFormat),this.videoFormat=a}get customized(){return this.privCustomized}set customized(i){this.privCustomized=i}get useBuiltInVoice(){return this.privUseBuiltInVoice}set useBuiltInVoice(i){this.privUseBuiltInVoice=i}get backgroundColor(){return this.privBackgroundColor}set backgroundColor(i){this.privBackgroundColor=i}get backgroundImage(){return this.privBackgroundImage}set backgroundImage(i){this.privBackgroundImage=i}get remoteIceServers(){return this.privRemoteIceServers}set remoteIceServers(i){this.privRemoteIceServers=i}};return ho.AvatarConfig=r,ho}var WC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AvatarEventArgs=e.AvatarEventTypes=void 0,function(r){r.SwitchedToSpeaking="SwitchedToSpeaking",r.SwitchedToIdle="SwitchedToIdle",r.SessionClosed="SessionClosed"}(e.AvatarEventTypes||(e.AvatarEventTypes={}));class t{constructor(n,i){this.privOffset=n,this.privDescription=i}get type(){return this.privType}get offset(){return this.privOffset}get description(){return this.privDescription}}e.AvatarEventArgs=t})(WC);var vo={},fo={},sg;function VC(){if(sg)return fo;sg=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.SpeechSynthesisConnectionFactory=void 0;const e=ge(),t=T(),r=Ct(),n=O(),i=fe,s=St;let a=class{constructor(){this.synthesisUri="/tts/cognitiveservices/websocket/v1"}async create(c,u,l){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),h=r.ConnectionFactoryBase.getHostSuffix(d),m=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),y=m===void 0?"tts":"voice",S=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+d+"."+y+".speech"+h),v={},f={};if(u.token!==void 0&&u.token!==""&&(f[u.headerName]=u.token),f[i.HeaderNames.ConnectionId]=l,m!==void 0&&m!==""&&(!p||p.search(s.QueryParameterNames.CustomVoiceDeploymentId)===-1)&&(v[s.QueryParameterNames.CustomVoiceDeploymentId]=m),c.avatarEnabled&&(!p||p.search(s.QueryParameterNames.EnableAvatar)===-1)&&(v[s.QueryParameterNames.EnableAvatar]="true"),p){const C=new URL(p),P=C.pathname;(P===""||P==="/")&&(C.pathname=this.synthesisUri,p=await r.ConnectionFactoryBase.getRedirectUrlFromEndpoint(C.toString()))}p||(p=S+this.synthesisUri),c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const g=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(p,v,f,new n.WebsocketMessageFormatter,e.ProxyInfo.fromParameters(c.parameters),g,l)}};return fo.SpeechSynthesisConnectionFactory=a,fo}var ag;function C1(){if(ag)return vo;ag=1,Object.defineProperty(vo,"__esModule",{value:!0}),vo.AvatarSynthesizer=void 0;const e=VC(),t=O(),r=b(),n=Tr,i=T(),s=z,a=Gd();let o=class extends i.Synthesizer{constructor(u,l){super(u),s.Contracts.throwIfNullOrUndefined(l,"avatarConfig"),this.privConnectionFactory=new e.SpeechSynthesisConnectionFactory,this.privAvatarConfig=l,this.implCommonSynthesizeSetup()}implCommonSynthesizeSetup(){super.implCommonSynthesizeSetup(),this.privAdapter.audioOutputFormat=n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormat(i.SpeechSynthesisOutputFormat.Riff24Khz16BitMonoPcm)}async startAvatarAsync(u){s.Contracts.throwIfNullOrUndefined(u,"peerConnection"),this.privIceServers=u.getConfiguration().iceServers,s.Contracts.throwIfNullOrUndefined(this.privIceServers,"Ice servers must be set.");const l=new r.Deferred;u.onicegatheringstatechange=()=>{r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering state: "+u.iceGatheringState,r.EventType.Debug)),u.iceGatheringState==="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering complete.",r.EventType.Info)),l.resolve())},u.onicecandidate=y=>{y.candidate?r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: "+y.candidate.candidate,r.EventType.Debug)):(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice candidate: complete",r.EventType.Debug)),l.resolve())},setTimeout(()=>{u.iceGatheringState!=="complete"&&(r.Events.instance.onEvent(new r.PlatformEvent("peer connection: ice gathering timeout.",r.EventType.Warning)),l.resolve())},2e3);const p=await u.createOffer();await u.setLocalDescription(p),await l.promise,r.Events.instance.onEvent(new r.PlatformEvent("peer connection: got local SDP.",r.EventType.Info)),this.privProperties.setProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP,JSON.stringify(u.localDescription));const d=await this.speak("",!1);if(d.reason!==i.ResultReason.SynthesizingAudioCompleted)return new i.SynthesisResult(d.resultId,d.reason,d.errorDetails,d.properties);const h=atob(d.properties.getProperty(i.PropertyId.TalkingAvatarService_WebRTC_SDP)),m=new RTCSessionDescription(JSON.parse(h));return await u.setRemoteDescription(m),new i.SynthesisResult(d.resultId,d.reason,void 0,d.properties)}async speakTextAsync(u){const l=await this.speak(u,!1);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async speakSsmlAsync(u){const l=await this.speak(u,!0);return new i.SynthesisResult(l.resultId,l.reason,l.errorDetails,l.properties)}async stopSpeakingAsync(){for(;this.synthesisRequestQueue.length()>0;)(await this.synthesisRequestQueue.dequeue()).err("Synthesis is canceled by user.");return this.privAdapter.stopSpeaking()}async stopAvatarAsync(){return s.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)}async close(){if(!this.privDisposed)return this.dispose(!0)}get iceServers(){return this.privIceServers}createSynthesisAdapter(u,l,p){return new t.AvatarSynthesisAdapter(u,l,p,this,this.privAvatarConfig)}createRestSynthesisAdapter(u,l){}createSynthesizerConfig(u){const l=super.createSynthesizerConfig(u);return l.avatarEnabled=!0,l}async speak(u,l){const p=(0,r.createNoDashGuid)(),d=new r.Deferred;return this.synthesisRequestQueue.enqueue(new a.SynthesisRequest(p,u,l,h=>{d.resolve(h),this.privSynthesizing=!1,this.adapterSpeak()},h=>{d.reject(h),this.privSynthesizing=!1})),this.adapterSpeak(),d.promise}};return vo.AvatarSynthesizer=o,vo}var xn={};Object.defineProperty(xn,"__esModule",{value:!0});xn.AvatarVideoFormat=xn.Coordinate=void 0;class P1{constructor(t,r){this.x=t,this.y=r}}xn.Coordinate=P1;class R1{constructor(t="H264",r=2e6,n=1920,i=1080){this.codec=t,this.bitrate=r,this.width=n,this.height=i}setCropRange(t,r){this.cropRange={bottomRight:r,topLeft:t}}}xn.AvatarVideoFormat=R1;var go={},cg;function E1(){if(cg)return go;cg=1,Object.defineProperty(go,"__esModule",{value:!0}),go.AvatarWebRTCConnectionResult=void 0;const e=T();let t=class extends e.SynthesisResult{constructor(n,i,s,a,o){super(i,s,a,o),this.privSDPAnswer=n}get SDPAnswer(){return this.privSDPAnswer}};return go.AvatarWebRTCConnectionResult=t,go}var mo={},ug;function w1(){if(ug)return mo;ug=1,Object.defineProperty(mo,"__esModule",{value:!0}),mo.Diagnostics=void 0;const e=ge(),t=b();let r=class{static SetLoggingLevel(i){this.privListener=new e.ConsoleLoggingListener(i),t.Events.instance.attachConsoleListener(this.privListener)}static StartConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!0)}static StopConsoleOutput(){this.privListener&&(this.privListener.enableConsoleOutput=!1)}static SetLogOutputPath(i){if(typeof window>"u")this.privListener&&(this.privListener.logPath=i);else throw new Error("File system logging not available in browser.")}static set onLogOutput(i){this.privListener&&(this.privListener.logCallback=i)}};return mo.Diagnostics=r,r.privListener=void 0,mo}var lg;function T(){return lg||(lg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionEventArgs=e.CancellationErrorCode=e.CancellationDetails=e.CancellationDetailsBase=e.IntentRecognitionCanceledEventArgs=e.TranslationRecognitionCanceledEventArgs=e.NoMatchDetails=e.NoMatchReason=e.Translations=e.TranslationRecognizer=e.VoiceProfileType=e.IntentRecognizer=e.SpeechRecognizer=e.Recognizer=e.PropertyId=e.PropertyCollection=e.SpeechTranslationConfigImpl=e.SpeechTranslationConfig=e.SpeechConfigImpl=e.SpeechConfig=e.ResultReason=e.TranslationSynthesisResult=e.TranslationRecognitionResult=e.TranslationSynthesisEventArgs=e.TranslationRecognitionEventArgs=e.SpeechRecognitionCanceledEventArgs=e.MeetingTranscriptionEventArgs=e.ConversationTranscriptionEventArgs=e.SpeechRecognitionEventArgs=e.LanguageUnderstandingModel=e.IntentRecognitionResult=e.SpeechRecognitionResult=e.RecognitionResult=e.IntentRecognitionEventArgs=e.OutputFormat=e.RecognitionEventArgs=e.SessionEventArgs=e.KeywordRecognitionModel=e.PushAudioOutputStreamCallback=e.PullAudioInputStreamCallback=e.CancellationReason=e.PushAudioOutputStream=e.PullAudioOutputStream=e.AudioOutputStream=e.PushAudioInputStream=e.PullAudioInputStream=e.AudioInputStream=e.AudioFormatTag=e.AudioStreamFormat=e.AudioConfig=void 0,e.SpeechSynthesisEventArgs=e.SpeechSynthesisResult=e.SynthesisResult=e.SpeechSynthesizer=e.SpeechSynthesisOutputFormat=e.Synthesizer=e.User=e.ParticipantChangedReason=e.Participant=e.MeetingTranscriber=e.Meeting=e.ConversationTranscriptionResult=e.ConversationTranscriber=e.ConversationTranslator=e.ConversationTranslationResult=e.ConversationTranslationEventArgs=e.ConversationTranslationCanceledEventArgs=e.ConversationParticipantsChangedEventArgs=e.ConversationExpirationEventArgs=e.Conversation=e.SpeakerRecognitionCancellationDetails=e.SpeakerRecognitionResultType=e.SpeakerRecognitionResult=e.SourceLanguageConfig=e.AutoDetectSourceLanguageResult=e.AutoDetectSourceLanguageConfig=e.SpeakerVerificationModel=e.SpeakerIdentificationModel=e.SpeakerRecognizer=e.VoiceProfileClient=e.VoiceProfilePhraseResult=e.VoiceProfileCancellationDetails=e.VoiceProfileResult=e.VoiceProfileEnrollmentCancellationDetails=e.VoiceProfileEnrollmentResult=e.VoiceProfile=e.ConnectionMessage=e.ConnectionMessageEventArgs=e.BaseAudioPlayer=e.ProfanityOption=e.ServicePropertyChannel=e.TurnStatusReceivedEventArgs=e.ActivityReceivedEventArgs=e.DialogServiceConnector=e.CustomCommandsConfig=e.BotFrameworkConfig=e.DialogServiceConfig=e.PhraseListGrammar=e.Connection=e.ServiceEventArgs=void 0,e.LogLevel=e.Diagnostics=e.AvatarWebRTCConnectionResult=e.Coordinate=e.AvatarVideoFormat=e.AvatarSynthesizer=e.AvatarEventArgs=e.AvatarConfig=e.LanguageIdMode=e.PronunciationAssessmentResult=e.PronunciationAssessmentConfig=e.PronunciationAssessmentGranularity=e.PronunciationAssessmentGradingSystem=e.MeetingTranscriptionCanceledEventArgs=e.ConversationTranscriptionCanceledEventArgs=e.SpeakerAudioDestination=e.VoiceInfo=e.SynthesisVoiceType=e.SynthesisVoiceGender=e.SynthesisVoicesResult=e.SpeechSynthesisBoundaryType=e.SpeechSynthesisVisemeEventArgs=e.SpeechSynthesisBookmarkEventArgs=e.SpeechSynthesisWordBoundaryEventArgs=void 0;var t=uC();Object.defineProperty(e,"AudioConfig",{enumerable:!0,get:function(){return t.AudioConfig}});var r=Ir;Object.defineProperty(e,"AudioStreamFormat",{enumerable:!0,get:function(){return r.AudioStreamFormat}}),Object.defineProperty(e,"AudioFormatTag",{enumerable:!0,get:function(){return r.AudioFormatTag}});var n=iC();Object.defineProperty(e,"AudioInputStream",{enumerable:!0,get:function(){return n.AudioInputStream}}),Object.defineProperty(e,"PullAudioInputStream",{enumerable:!0,get:function(){return n.PullAudioInputStream}}),Object.defineProperty(e,"PushAudioInputStream",{enumerable:!0,get:function(){return n.PushAudioInputStream}});var i=Ce;Object.defineProperty(e,"AudioOutputStream",{enumerable:!0,get:function(){return i.AudioOutputStream}}),Object.defineProperty(e,"PullAudioOutputStream",{enumerable:!0,get:function(){return i.PullAudioOutputStream}}),Object.defineProperty(e,"PushAudioOutputStream",{enumerable:!0,get:function(){return i.PushAudioOutputStream}});var s=lC;Object.defineProperty(e,"CancellationReason",{enumerable:!0,get:function(){return s.CancellationReason}});var a=Qc;Object.defineProperty(e,"PullAudioInputStreamCallback",{enumerable:!0,get:function(){return a.PullAudioInputStreamCallback}});var o=Yc;Object.defineProperty(e,"PushAudioOutputStreamCallback",{enumerable:!0,get:function(){return o.PushAudioOutputStreamCallback}});var c=Xc;Object.defineProperty(e,"KeywordRecognitionModel",{enumerable:!0,get:function(){return c.KeywordRecognitionModel}});var u=Zc;Object.defineProperty(e,"SessionEventArgs",{enumerable:!0,get:function(){return u.SessionEventArgs}});var l=ZA();Object.defineProperty(e,"RecognitionEventArgs",{enumerable:!0,get:function(){return l.RecognitionEventArgs}});var p=pC;Object.defineProperty(e,"OutputFormat",{enumerable:!0,get:function(){return p.OutputFormat}});var d=e0();Object.defineProperty(e,"IntentRecognitionEventArgs",{enumerable:!0,get:function(){return d.IntentRecognitionEventArgs}});var h=eu;Object.defineProperty(e,"RecognitionResult",{enumerable:!0,get:function(){return h.RecognitionResult}});var m=r0();Object.defineProperty(e,"SpeechRecognitionResult",{enumerable:!0,get:function(){return m.SpeechRecognitionResult}});var y=n0();Object.defineProperty(e,"IntentRecognitionResult",{enumerable:!0,get:function(){return y.IntentRecognitionResult}});var S=jn;Object.defineProperty(e,"LanguageUnderstandingModel",{enumerable:!0,get:function(){return S.LanguageUnderstandingModel}});var v=i0();Object.defineProperty(e,"SpeechRecognitionEventArgs",{enumerable:!0,get:function(){return v.SpeechRecognitionEventArgs}}),Object.defineProperty(e,"ConversationTranscriptionEventArgs",{enumerable:!0,get:function(){return v.ConversationTranscriptionEventArgs}}),Object.defineProperty(e,"MeetingTranscriptionEventArgs",{enumerable:!0,get:function(){return v.MeetingTranscriptionEventArgs}});var f=o0();Object.defineProperty(e,"SpeechRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return f.SpeechRecognitionCanceledEventArgs}});var g=s0();Object.defineProperty(e,"TranslationRecognitionEventArgs",{enumerable:!0,get:function(){return g.TranslationRecognitionEventArgs}});var C=a0();Object.defineProperty(e,"TranslationSynthesisEventArgs",{enumerable:!0,get:function(){return C.TranslationSynthesisEventArgs}});var P=vC();Object.defineProperty(e,"TranslationRecognitionResult",{enumerable:!0,get:function(){return P.TranslationRecognitionResult}});var E=tu;Object.defineProperty(e,"TranslationSynthesisResult",{enumerable:!0,get:function(){return E.TranslationSynthesisResult}});var I=fC;Object.defineProperty(e,"ResultReason",{enumerable:!0,get:function(){return I.ResultReason}});var R=u0();Object.defineProperty(e,"SpeechConfig",{enumerable:!0,get:function(){return R.SpeechConfig}}),Object.defineProperty(e,"SpeechConfigImpl",{enumerable:!0,get:function(){return R.SpeechConfigImpl}});var D=l0();Object.defineProperty(e,"SpeechTranslationConfig",{enumerable:!0,get:function(){return D.SpeechTranslationConfig}}),Object.defineProperty(e,"SpeechTranslationConfigImpl",{enumerable:!0,get:function(){return D.SpeechTranslationConfigImpl}});var A=mC();Object.defineProperty(e,"PropertyCollection",{enumerable:!0,get:function(){return A.PropertyCollection}});var K=ru;Object.defineProperty(e,"PropertyId",{enumerable:!0,get:function(){return K.PropertyId}});var rt=p0();Object.defineProperty(e,"Recognizer",{enumerable:!0,get:function(){return rt.Recognizer}});var ae=d0();Object.defineProperty(e,"SpeechRecognizer",{enumerable:!0,get:function(){return ae.SpeechRecognizer}});var Qn=h0();Object.defineProperty(e,"IntentRecognizer",{enumerable:!0,get:function(){return Qn.IntentRecognizer}});var xu=CC;Object.defineProperty(e,"VoiceProfileType",{enumerable:!0,get:function(){return xu.VoiceProfileType}});var Yn=v0();Object.defineProperty(e,"TranslationRecognizer",{enumerable:!0,get:function(){return Yn.TranslationRecognizer}});var Xn=f0();Object.defineProperty(e,"Translations",{enumerable:!0,get:function(){return Xn.Translations}});var k=wC;Object.defineProperty(e,"NoMatchReason",{enumerable:!0,get:function(){return k.NoMatchReason}});var j=g0();Object.defineProperty(e,"NoMatchDetails",{enumerable:!0,get:function(){return j.NoMatchDetails}});var B=nu;Object.defineProperty(e,"TranslationRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return B.TranslationRecognitionCanceledEventArgs}});var Z=y0();Object.defineProperty(e,"IntentRecognitionCanceledEventArgs",{enumerable:!0,get:function(){return Z.IntentRecognitionCanceledEventArgs}});var ue=Hs;Object.defineProperty(e,"CancellationDetailsBase",{enumerable:!0,get:function(){return ue.CancellationDetailsBase}});var an=C0();Object.defineProperty(e,"CancellationDetails",{enumerable:!0,get:function(){return an.CancellationDetails}});var kt=_C;Object.defineProperty(e,"CancellationErrorCode",{enumerable:!0,get:function(){return kt.CancellationErrorCode}});var Zn=P0();Object.defineProperty(e,"ConnectionEventArgs",{enumerable:!0,get:function(){return Zn.ConnectionEventArgs}});var Mt=R0();Object.defineProperty(e,"ServiceEventArgs",{enumerable:!0,get:function(){return Mt.ServiceEventArgs}});var cn=RC();Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return cn.Connection}});var mP=iu;Object.defineProperty(e,"PhraseListGrammar",{enumerable:!0,get:function(){return mP.PhraseListGrammar}});var yP=Wd();Object.defineProperty(e,"DialogServiceConfig",{enumerable:!0,get:function(){return yP.DialogServiceConfig}});var SP=E0();Object.defineProperty(e,"BotFrameworkConfig",{enumerable:!0,get:function(){return SP.BotFrameworkConfig}});var CP=w0();Object.defineProperty(e,"CustomCommandsConfig",{enumerable:!0,get:function(){return CP.CustomCommandsConfig}});var PP=T0();Object.defineProperty(e,"DialogServiceConnector",{enumerable:!0,get:function(){return PP.DialogServiceConnector}});var RP=ou;Object.defineProperty(e,"ActivityReceivedEventArgs",{enumerable:!0,get:function(){return RP.ActivityReceivedEventArgs}});var EP=su;Object.defineProperty(e,"TurnStatusReceivedEventArgs",{enumerable:!0,get:function(){return EP.TurnStatusReceivedEventArgs}});var wP=AC;Object.defineProperty(e,"ServicePropertyChannel",{enumerable:!0,get:function(){return wP.ServicePropertyChannel}});var IP=kC;Object.defineProperty(e,"ProfanityOption",{enumerable:!0,get:function(){return IP.ProfanityOption}});var TP=M0();Object.defineProperty(e,"BaseAudioPlayer",{enumerable:!0,get:function(){return TP.BaseAudioPlayer}});var _P=cu;Object.defineProperty(e,"ConnectionMessageEventArgs",{enumerable:!0,get:function(){return _P.ConnectionMessageEventArgs}});var AP=PC();Object.defineProperty(e,"ConnectionMessage",{enumerable:!0,get:function(){return AP.ConnectionMessage}});var kP=uu;Object.defineProperty(e,"VoiceProfile",{enumerable:!0,get:function(){return kP.VoiceProfile}});var uh=b0();Object.defineProperty(e,"VoiceProfileEnrollmentResult",{enumerable:!0,get:function(){return uh.VoiceProfileEnrollmentResult}}),Object.defineProperty(e,"VoiceProfileEnrollmentCancellationDetails",{enumerable:!0,get:function(){return uh.VoiceProfileEnrollmentCancellationDetails}});var lh=N0();Object.defineProperty(e,"VoiceProfileResult",{enumerable:!0,get:function(){return lh.VoiceProfileResult}}),Object.defineProperty(e,"VoiceProfileCancellationDetails",{enumerable:!0,get:function(){return lh.VoiceProfileCancellationDetails}});var MP=z0();Object.defineProperty(e,"VoiceProfilePhraseResult",{enumerable:!0,get:function(){return MP.VoiceProfilePhraseResult}});var OP=L0();Object.defineProperty(e,"VoiceProfileClient",{enumerable:!0,get:function(){return OP.VoiceProfileClient}});var DP=j0();Object.defineProperty(e,"SpeakerRecognizer",{enumerable:!0,get:function(){return DP.SpeakerRecognizer}});var bP=x0();Object.defineProperty(e,"SpeakerIdentificationModel",{enumerable:!0,get:function(){return bP.SpeakerIdentificationModel}});var NP=B0();Object.defineProperty(e,"SpeakerVerificationModel",{enumerable:!0,get:function(){return NP.SpeakerVerificationModel}});var zP=F0();Object.defineProperty(e,"AutoDetectSourceLanguageConfig",{enumerable:!0,get:function(){return zP.AutoDetectSourceLanguageConfig}});var LP=lu;Object.defineProperty(e,"AutoDetectSourceLanguageResult",{enumerable:!0,get:function(){return LP.AutoDetectSourceLanguageResult}});var jP=pu;Object.defineProperty(e,"SourceLanguageConfig",{enumerable:!0,get:function(){return jP.SourceLanguageConfig}});var Bu=U0();Object.defineProperty(e,"SpeakerRecognitionResult",{enumerable:!0,get:function(){return Bu.SpeakerRecognitionResult}}),Object.defineProperty(e,"SpeakerRecognitionResultType",{enumerable:!0,get:function(){return Bu.SpeakerRecognitionResultType}}),Object.defineProperty(e,"SpeakerRecognitionCancellationDetails",{enumerable:!0,get:function(){return Bu.SpeakerRecognitionCancellationDetails}});var qe=Jd();Object.defineProperty(e,"Conversation",{enumerable:!0,get:function(){return qe.Conversation}}),Object.defineProperty(e,"ConversationExpirationEventArgs",{enumerable:!0,get:function(){return qe.ConversationExpirationEventArgs}}),Object.defineProperty(e,"ConversationParticipantsChangedEventArgs",{enumerable:!0,get:function(){return qe.ConversationParticipantsChangedEventArgs}}),Object.defineProperty(e,"ConversationTranslationCanceledEventArgs",{enumerable:!0,get:function(){return qe.ConversationTranslationCanceledEventArgs}}),Object.defineProperty(e,"ConversationTranslationEventArgs",{enumerable:!0,get:function(){return qe.ConversationTranslationEventArgs}}),Object.defineProperty(e,"ConversationTranslationResult",{enumerable:!0,get:function(){return qe.ConversationTranslationResult}}),Object.defineProperty(e,"ConversationTranslator",{enumerable:!0,get:function(){return qe.ConversationTranslator}}),Object.defineProperty(e,"ConversationTranscriber",{enumerable:!0,get:function(){return qe.ConversationTranscriber}}),Object.defineProperty(e,"ConversationTranscriptionResult",{enumerable:!0,get:function(){return qe.ConversationTranscriptionResult}}),Object.defineProperty(e,"Meeting",{enumerable:!0,get:function(){return qe.Meeting}}),Object.defineProperty(e,"MeetingTranscriber",{enumerable:!0,get:function(){return qe.MeetingTranscriber}}),Object.defineProperty(e,"Participant",{enumerable:!0,get:function(){return qe.Participant}}),Object.defineProperty(e,"ParticipantChangedReason",{enumerable:!0,get:function(){return qe.ParticipantChangedReason}}),Object.defineProperty(e,"User",{enumerable:!0,get:function(){return qe.User}});var xP=Gd();Object.defineProperty(e,"Synthesizer",{enumerable:!0,get:function(){return xP.Synthesizer}});var BP=Fd;Object.defineProperty(e,"SpeechSynthesisOutputFormat",{enumerable:!0,get:function(){return BP.SpeechSynthesisOutputFormat}});var FP=i1();Object.defineProperty(e,"SpeechSynthesizer",{enumerable:!0,get:function(){return FP.SpeechSynthesizer}});var qP=hu;Object.defineProperty(e,"SynthesisResult",{enumerable:!0,get:function(){return qP.SynthesisResult}});var UP=s1();Object.defineProperty(e,"SpeechSynthesisResult",{enumerable:!0,get:function(){return UP.SpeechSynthesisResult}});var $P=vu;Object.defineProperty(e,"SpeechSynthesisEventArgs",{enumerable:!0,get:function(){return $P.SpeechSynthesisEventArgs}});var WP=fu;Object.defineProperty(e,"SpeechSynthesisWordBoundaryEventArgs",{enumerable:!0,get:function(){return WP.SpeechSynthesisWordBoundaryEventArgs}});var VP=gu;Object.defineProperty(e,"SpeechSynthesisBookmarkEventArgs",{enumerable:!0,get:function(){return VP.SpeechSynthesisBookmarkEventArgs}});var HP=mu;Object.defineProperty(e,"SpeechSynthesisVisemeEventArgs",{enumerable:!0,get:function(){return HP.SpeechSynthesisVisemeEventArgs}});var KP=xC;Object.defineProperty(e,"SpeechSynthesisBoundaryType",{enumerable:!0,get:function(){return KP.SpeechSynthesisBoundaryType}});var JP=p1();Object.defineProperty(e,"SynthesisVoicesResult",{enumerable:!0,get:function(){return JP.SynthesisVoicesResult}});var Fu=BC;Object.defineProperty(e,"SynthesisVoiceGender",{enumerable:!0,get:function(){return Fu.SynthesisVoiceGender}}),Object.defineProperty(e,"SynthesisVoiceType",{enumerable:!0,get:function(){return Fu.SynthesisVoiceType}}),Object.defineProperty(e,"VoiceInfo",{enumerable:!0,get:function(){return Fu.VoiceInfo}});var GP=yu;Object.defineProperty(e,"SpeakerAudioDestination",{enumerable:!0,get:function(){return GP.SpeakerAudioDestination}});var QP=f1();Object.defineProperty(e,"ConversationTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return QP.ConversationTranscriptionCanceledEventArgs}});var YP=g1();Object.defineProperty(e,"MeetingTranscriptionCanceledEventArgs",{enumerable:!0,get:function(){return YP.MeetingTranscriptionCanceledEventArgs}});var XP=FC;Object.defineProperty(e,"PronunciationAssessmentGradingSystem",{enumerable:!0,get:function(){return XP.PronunciationAssessmentGradingSystem}});var ZP=qC;Object.defineProperty(e,"PronunciationAssessmentGranularity",{enumerable:!0,get:function(){return ZP.PronunciationAssessmentGranularity}});var eR=m1();Object.defineProperty(e,"PronunciationAssessmentConfig",{enumerable:!0,get:function(){return eR.PronunciationAssessmentConfig}});var tR=y1();Object.defineProperty(e,"PronunciationAssessmentResult",{enumerable:!0,get:function(){return tR.PronunciationAssessmentResult}});var rR=Hd;Object.defineProperty(e,"LanguageIdMode",{enumerable:!0,get:function(){return rR.LanguageIdMode}});var nR=S1();Object.defineProperty(e,"AvatarConfig",{enumerable:!0,get:function(){return nR.AvatarConfig}});var iR=WC;Object.defineProperty(e,"AvatarEventArgs",{enumerable:!0,get:function(){return iR.AvatarEventArgs}});var oR=C1();Object.defineProperty(e,"AvatarSynthesizer",{enumerable:!0,get:function(){return oR.AvatarSynthesizer}});var ph=xn;Object.defineProperty(e,"AvatarVideoFormat",{enumerable:!0,get:function(){return ph.AvatarVideoFormat}}),Object.defineProperty(e,"Coordinate",{enumerable:!0,get:function(){return ph.Coordinate}});var sR=E1();Object.defineProperty(e,"AvatarWebRTCConnectionResult",{enumerable:!0,get:function(){return sR.AvatarWebRTCConnectionResult}});var aR=w1();Object.defineProperty(e,"Diagnostics",{enumerable:!0,get:function(){return aR.Diagnostics}});var cR=xd;Object.defineProperty(e,"LogLevel",{enumerable:!0,get:function(){return cR.LogLevel}})}(Tl)),Tl}var pg;function I1(){if(pg)return fi;pg=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.ProxyInfo=void 0;const e=T();let t=class HC{constructor(n,i,s,a){this.privProxyHostName=n,this.privProxyPort=i,this.privProxyUserName=s,this.privProxyPassword=a}static fromParameters(n){return new HC(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyHostName),parseInt(n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPort),10),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyUserName),n.getProperty(e.PropertyId.SpeechServiceConnection_ProxyPassword))}static fromRecognizerConfig(n){return this.fromParameters(n.parameters)}get HostName(){return this.privProxyHostName}get Port(){return this.privProxyPort}get UserName(){return this.privProxyUserName}get Password(){return this.privProxyPassword}};return fi.ProxyInfo=t,fi}var KC={};const T1=new Set(["json","buffer","string"]);var _1=e=>(...t)=>{const r=new Set;let n,i,s,a="";return t.forEach(o=>{if(typeof o=="string")if(o.toUpperCase()===o)if(n){const c=`Can't set method to ${o}, already set to ${n}.`;throw new Error(c)}else n=o;else if(o.startsWith("http:")||o.startsWith("https:"))a=o;else if(T1.has(o))i=o;else throw new Error(`Unknown encoding, ${o}`);else if(typeof o=="number")r.add(o);else if(typeof o=="object")if(Array.isArray(o)||o instanceof Set)o.forEach(c=>r.add(c));else{if(s)throw new Error("Cannot set headers twice.");s=o}else throw new Error(`Unknown type: ${typeof o}`)}),n||(n="GET"),r.size===0&&r.add(200),e(r,n,i,s,a)};const A1=_1;class Qd extends Error{constructor(t,...r){super(...r),Error.captureStackTrace&&Error.captureStackTrace(this,Qd),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let n;Object.defineProperty(this,"responseBody",{get:()=>(n||(n=this.arrayBuffer()),n)}),this.headers={};for(const[s,a]of t.headers.entries())this.headers[s.toLowerCase()]=a}}const k1=(e,t,r,n,i)=>async(s,a,o={})=>{s=i+(s||"");let c=new URL(s);if(n||(n={}),c.username&&(n.Authorization="Basic "+btoa(c.username+":"+c.password),c=new URL(c.protocol+"//"+c.host+c.pathname+c.search)),c.protocol!=="https:"&&c.protocol!=="http:")throw new Error(`Unknown protocol, ${c.protocol}`);if(a&&!(a instanceof ArrayBuffer||ArrayBuffer.isView(a)||typeof a=="string"))if(typeof a=="object")a=JSON.stringify(a),n["Content-Type"]="application/json";else throw new Error("Unknown body type.");o=new Headers({...n||{},...o});const u=await fetch(c,{method:t,headers:o,body:a});if(u.statusCode=u.status,!e.has(u.status))throw new Qd(u);return r==="json"?u.json():r==="buffer"?u.arrayBuffer():r==="string"?u.text():u};var M1=A1(k1);(function(e){var t=q&&q.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(e,"__esModule",{value:!0}),e.RestMessageAdapter=e.RestRequestType=void 0;const r=t(M1),n=b();var i;(function(a){a.Get="GET",a.Post="POST",a.Delete="DELETE",a.File="file"})(i=e.RestRequestType||(e.RestRequestType={}));class s{constructor(o){if(!o)throw new n.ArgumentNullError("configParams");this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}static extractHeaderValue(o,c){let u="";try{const l=c.trim().split(/[\r\n]+/),p={};l.forEach(d=>{const h=d.split(": "),m=h.shift().toLowerCase(),y=h.join(": ");p[m]=y}),u=p[o.toLowerCase()]}catch{}return u}set options(o){this.privHeaders=o.headers,this.privIgnoreCache=o.ignoreCache}setHeaders(o,c){this.privHeaders[o]=c}request(o,c,u={},l=null){const p=new n.Deferred,d=o===i.File?"POST":o,h=(y,S={})=>{const v=y;return{data:JSON.stringify(S),headers:JSON.stringify(y.headers),json:S,ok:y.statusCode>=200&&y.statusCode<300,status:y.statusCode,statusText:S.error?S.error.message:v.statusText?v.statusText:v.statusMessage}},m=y=>{const S=(0,r.default)(c,d,this.privHeaders,200,201,202,204,400,401,402,403,404),v=this.queryParams(u)===""?"":`?${this.queryParams(u)}`;S(v,y).then(async f=>{if(o===i.Delete||f.statusCode===204)p.resolve(h(f));else try{const g=await f.json();p.resolve(h(f,g))}catch{p.resolve(h(f))}}).catch(f=>{p.reject(f)})};return this.privIgnoreCache&&(this.privHeaders["Cache-Control"]="no-cache"),o===i.Post&&l&&(this.privHeaders["content-type"]="application/json",this.privHeaders["Content-Type"]="application/json"),m(l),p.promise}queryParams(o={}){return Object.keys(o).map(c=>encodeURIComponent(c)+"="+encodeURIComponent(o[c])).join("&")}}e.RestMessageAdapter=s})(KC);var Js={};Object.defineProperty(Js,"__esModule",{value:!0});Js.RestConfigBase=void 0;class fr{static get requestOptions(){return fr.privDefaultRequestOptions}static get configParams(){return fr.privDefaultParams}static get restErrors(){return fr.privRestErrors}}Js.RestConfigBase=fr;fr.privDefaultRequestOptions={headers:{Accept:"application/json"},ignoreCache:!1,timeout:1e4};fr.privRestErrors={authInvalidSubscriptionKey:"You must specify either an authentication token to use, or a Cognitive Speech subscription key.",authInvalidSubscriptionRegion:"You must specify the Cognitive Speech region to use.",invalidArgs:"Required input not found: {arg}.",invalidCreateJoinConversationResponse:"Creating/Joining conversation failed with HTTP {status}.",invalidParticipantRequest:"The requested participant was not found.",permissionDeniedConnect:"Required credentials not found.",permissionDeniedConversation:"Invalid operation: only the host can {command} the conversation.",permissionDeniedParticipant:"Invalid operation: only the host can {command} a participant.",permissionDeniedSend:"Invalid operation: the conversation is not in a connected state.",permissionDeniedStart:"Invalid operation: there is already an active conversation."};fr.privDefaultParams={apiVersion:"api-version",authorization:"Authorization",clientAppId:"X-ClientAppId",contentTypeKey:"Content-Type",correlationId:"X-CorrelationId",languageCode:"language",nickname:"nickname",profanity:"profanity",requestId:"X-RequestId",roomId:"roomid",sessionToken:"token",subscriptionKey:"Ocp-Apim-Subscription-Key",subscriptionRegion:"Ocp-Apim-Subscription-Region",token:"X-CapitoToken"};var dg;function ge(){return dg||(dg=1,function(e){var t=q&&q.__createBinding||(Object.create?function(n,i,s,a){a===void 0&&(a=s),Object.defineProperty(n,a,{enumerable:!0,get:function(){return i[s]}})}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]}),r=q&&q.__exportStar||function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&t(i,n,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(Hc,e),r(rC,e),r(_A(),e),r(AA(),e),r(Kc,e),r(Jc,e),r($s,e),r(Gc,e),r(I1(),e),r(KC,e),r(Js,e)}(El)),El}var hg;function O1(){if(hg)return di;hg=1,Object.defineProperty(di,"__esModule",{value:!0}),di.IntentConnectionFactory=void 0;const e=ge(),t=T(),r=Ct(),n=O(),i=fe;let s=class extends r.ConnectionFactoryBase{create(o,c,u){let l=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!l){const m=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_IntentRegion),y=r.ConnectionFactoryBase.getHostSuffix(m);l=o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+m+".sr.speech"+y)+"/speech/recognition/interactive/cognitiveservices/v1"}const p={format:"simple",language:o.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(o,p,l);const d={};c.token!==void 0&&c.token!==""&&(d[c.headerName]=c.token),d[i.HeaderNames.ConnectionId]=u,o.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,l);const h=o.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(l,p,d,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(o),h,u))}getSpeechRegionFromIntentRegion(o){switch(o){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return o}}};return di.IntentConnectionFactory=s,di}var Br={},vg;function D1(){if(vg)return Br;vg=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.VoiceProfileConnectionFactory=Br.SpeakerRecognitionConnectionFactory=void 0;const e=ge(),t=T(),r=Ct(),n=O(),i=fe;class s extends r.ConnectionFactoryBase{create(u,l,p,d){let h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint);if(!h){const v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region),f=r.ConnectionFactoryBase.getHostSuffix(v),g=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`wss://${v}.spr-frontend.speech${f}`),C=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_SpeakerIdMode,"TextIndependentIdentification");h=`${g}/speaker/ws/${this.scenarioToPath(C)}/${p}`}const m={format:"simple",language:u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage)};this.setCommonUrlParams(u,m,h);const y={};l.token!==void 0&&l.token!==""&&(y[l.headerName]=l.token),y[i.HeaderNames.ConnectionId]=d,y[i.HeaderNames.SpIDAuthKey]=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Key),u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,h);const S=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(h,m,y,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),S,d))}scenarioToPath(u){switch(u){case"TextIndependentVerification":case"2":return"verification/text-independent";case"TextDependentVerification":case"1":return"verification/text-dependent";default:return"identification/text-independent"}}}let a=class extends s{create(u,l,p){return super.create(u,l,"recognition",p)}};Br.SpeakerRecognitionConnectionFactory=a;class o extends s{create(u,l,p){return super.create(u,l,"profile",p)}}return Br.VoiceProfileConnectionFactory=o,Br}var Su={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionEndedEvent=e.RecognitionCompletionStatus=e.RecognitionStartedEvent=e.ConnectingToServiceEvent=e.ListeningStartedEvent=e.RecognitionTriggeredEvent=e.SpeechRecognitionEvent=void 0;const t=b();class r extends t.PlatformEvent{constructor(l,p,d,h=t.EventType.Info){super(l,h),this.privRequestId=p,this.privSessionId=d}get requestId(){return this.privRequestId}get sessionId(){return this.privSessionId}}e.SpeechRecognitionEvent=r;class n extends r{constructor(l,p,d,h){super("RecognitionTriggeredEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.RecognitionTriggeredEvent=n;class i extends r{constructor(l,p,d,h){super("ListeningStartedEvent",l,p),this.privAudioSourceId=d,this.privAudioNodeId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}}e.ListeningStartedEvent=i;class s extends r{constructor(l,p,d){super("ConnectingToServiceEvent",l,d),this.privAuthFetchEventid=p}get authFetchEventid(){return this.privAuthFetchEventid}}e.ConnectingToServiceEvent=s;class a extends r{constructor(l,p,d,h,m){super("RecognitionStartedEvent",l,m),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}}e.RecognitionStartedEvent=a;var o;(function(u){u[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError"})(o=e.RecognitionCompletionStatus||(e.RecognitionCompletionStatus={}));class c extends r{constructor(l,p,d,h,m,y,S,v){super("RecognitionEndedEvent",l,m,S===o.Success?t.EventType.Info:t.EventType.Error),this.privAudioSourceId=p,this.privAudioNodeId=d,this.privAuthFetchEventId=h,this.privStatus=S,this.privError=v,this.privServiceTag=y}get audioSourceId(){return this.privAudioSourceId}get audioNodeId(){return this.privAudioNodeId}get authFetchEventId(){return this.privAuthFetchEventId}get serviceTag(){return this.privServiceTag}get status(){return this.privStatus}get error(){return this.privError}}e.RecognitionEndedEvent=c})(Su);var yo={},Gt={};Object.defineProperty(Gt,"__esModule",{value:!0});Gt.SpeechConnectionMessage=void 0;const Ol=b(),bt=fe;class Yd extends Ol.ConnectionMessage{constructor(t,r,n,i,s,a,o,c){if(!r)throw new Ol.ArgumentNullError("path");if(!n)throw new Ol.ArgumentNullError("requestId");const u={};if(u[bt.HeaderNames.Path]=r,u[bt.HeaderNames.RequestId]=n,u[bt.HeaderNames.RequestTimestamp]=new Date().toISOString(),i&&(u[bt.HeaderNames.ContentType]=i),a&&(u[bt.HeaderNames.RequestStreamId]=a),o)for(const l in o)l&&(u[l]=o[l]);c?super(t,s,u,c):super(t,s,u),this.privPath=r,this.privRequestId=n,this.privContentType=i,this.privStreamId=a,this.privAdditionalHeaders=o}get path(){return this.privPath}get requestId(){return this.privRequestId}get contentType(){return this.privContentType}get streamId(){return this.privStreamId}get additionalHeaders(){return this.privAdditionalHeaders}static fromConnectionMessage(t){let r=null,n=null,i=null,s=null;const a={};if(t.headers)for(const o in t.headers)o&&(o.toLowerCase()===bt.HeaderNames.Path.toLowerCase()?r=t.headers[o]:o.toLowerCase()===bt.HeaderNames.RequestId.toLowerCase()?n=t.headers[o]:o.toLowerCase()===bt.HeaderNames.ContentType.toLowerCase()?i=t.headers[o]:o.toLowerCase()===bt.HeaderNames.RequestStreamId.toLowerCase()?s=t.headers[o]:a[o]=t.headers[o]);return new Yd(t.messageType,r,n,i,t.body,s,a,t.id)}}Gt.SpeechConnectionMessage=Yd;var JC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentationMode=void 0,function(t){t.Normal="Normal",t.Disabled="Disabled",t.Custom="Custom",t.Semantic="Semantic"}(e.SegmentationMode||(e.SegmentationMode={}))})(JC);var GC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Synthesize="Synthesize"}(e.NextAction||(e.NextAction={}))})(GC);var QC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Mode=void 0,function(t){t.None="None",t.Always="Always"}(e.Mode||(e.Mode={}))})(QC);var YC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageIdDetectionPriority=e.LanguageIdDetectionMode=void 0,function(t){t.DetectAtAudioStart="DetectAtAudioStart",t.DetectContinuous="DetectContinuous",t.DetectSegments="DetectSegments"}(e.LanguageIdDetectionMode||(e.LanguageIdDetectionMode={})),function(t){t.Auto="Auto",t.PrioritizeLatency="PrioritizeLatency",t.PrioritizeAccuracy="PrioritizeAccuracy"}(e.LanguageIdDetectionPriority||(e.LanguageIdDetectionPriority={}))})(YC);var XC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.Recognize="Recognize",t.None="None"}(e.NextAction||(e.NextAction={}))})(XC);var ZC={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnUnknownAction=void 0,function(t){t.RecognizeWithDefaultLanguage="RecognizeWithDefaultLanguage",t.None="None"}(e.OnUnknownAction||(e.OnUnknownAction={}))})(ZC);var eP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ResultType=void 0,function(t){t.Auto="Auto",t.StableFragment="StableFragment",t.Hypothesis="Hypothesis",t.None="None"}(e.ResultType||(e.ResultType={}))})(eP);var tP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PhraseResultOutputType=void 0,function(t){t.Always="Always",t.None="None"}(e.PhraseResultOutputType||(e.PhraseResultOutputType={}))})(tP);var rP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NextAction=void 0,function(t){t.None="None",t.Translate="Translate"}(e.NextAction||(e.NextAction={}))})(rP);var fg;function b1(){if(fg)return yo;fg=1,Object.defineProperty(yo,"__esModule",{value:!0}),yo.ServiceRecognizerBase=void 0;const e=ge(),t=b(),r=T(),n=O(),i=Gt,s=JC,a=tt,o=GC,c=QC,u=YC,l=XC,p=ZC,d=eP,h=tP,m=rP;let y=class Xo{constructor(v,f,g,C,P){if(this.privConnectionConfigurationPromise=void 0,this.privConnectionPromise=void 0,this.privSetTimeout=setTimeout,this.privIsLiveAudio=!1,this.privAverageBytesPerMs=0,this.privEnableSpeakerId=!1,this.privExpectContentAssessmentResponse=!1,this.recognizeOverride=void 0,this.recognizeSpeaker=void 0,this.disconnectOverride=void 0,this.receiveMessageOverride=void 0,this.sendPrePayloadJSONOverride=void 0,this.postConnectImplOverride=void 0,this.configConnectionOverride=void 0,this.handleSpeechPhraseMessage=void 0,this.handleSpeechHypothesisMessage=void 0,!v)throw new t.ArgumentNullError("authentication");if(!f)throw new t.ArgumentNullError("connectionFactory");if(!g)throw new t.ArgumentNullError("audioSource");if(!C)throw new t.ArgumentNullError("recognizerConfig");this.privEnableSpeakerId=C.isSpeakerDiarizationEnabled,this.privMustReportEndOfStream=!1,this.privAuthentication=v,this.privConnectionFactory=f,this.privAudioSource=g,this.privRecognizerConfig=C,this.privIsDisposed=!1,this.privRecognizer=P,this.privRequestSession=new n.RequestSession(this.privAudioSource.id()),this.privConnectionEvents=new t.EventSource,this.privServiceEvents=new t.EventSource,this.privDynamicGrammar=new n.DynamicGrammarBuilder,this.privSpeechContext=new n.SpeechContext(this.privDynamicGrammar),this.privAgentConfig=new n.AgentConfig,this.privRecognizerConfig.parameters.getProperty(r.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?this.privSetTimeout=t.Timeout.setTimeout:(typeof window<"u"&&(this.privSetTimeout=window.setTimeout.bind(window)),typeof globalThis<"u"&&(this.privSetTimeout=globalThis.setTimeout.bind(globalThis))),this.connectionEvents.attach(I=>{if(I.name==="ConnectionClosedEvent"){const R=I;(R.statusCode===1003||R.statusCode===1007||R.statusCode===1002||R.statusCode===4e3||this.privRequestSession.numConnectionAttempts>this.privRecognizerConfig.maxRetryCount)&&this.cancelRecognitionLocal(r.CancellationReason.Error,R.statusCode===1007?r.CancellationErrorCode.BadRequestParameters:r.CancellationErrorCode.ConnectionFailure,`${R.reason} websocket error code: ${R.statusCode}`)}}),this.privEnableSpeakerId&&(this.privDiarizationSessionId=(0,t.createNoDashGuid)())}setTranslationJson(){const v=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0);if(v!==void 0){const f=v.split(","),g=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0),C=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationCategoryId,void 0),P=g!==void 0?o.NextAction.Synthesize:o.NextAction.None;if(this.privSpeechContext.getContext().translation={onPassthrough:{action:P},onSuccess:{action:P},output:{includePassThroughResults:!0,interimResults:{mode:c.Mode.Always}},targetLanguages:f},C!==void 0&&(this.privSpeechContext.getContext().translation.category=C),g!==void 0){const I={};for(const R of f)I[R]=g;this.privSpeechContext.getContext().synthesis={defaultVoices:I}}const E=this.privSpeechContext.getContext().phraseDetection||{};E.onSuccess={action:m.NextAction.Translate},E.onInterim={action:m.NextAction.Translate},this.privSpeechContext.getContext().phraseDetection=E}}setSpeechSegmentationTimeoutJson(){const v=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationSilenceTimeoutMs,void 0),f=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationMaximumTimeMs,void 0),g=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.Speech_SegmentationStrategy,void 0),C={mode:s.SegmentationMode.Normal};let P=!1;if(g!==void 0){P=!0;let E=s.SegmentationMode.Normal;switch(g.toLowerCase()){case"default":break;case"time":E=s.SegmentationMode.Custom;break;case"semantic":E=s.SegmentationMode.Semantic;break}C.mode=E}if(v!==void 0){P=!0;const E=parseInt(v,10);C.mode=s.SegmentationMode.Custom,C.segmentationSilenceTimeoutMs=E}if(f!==void 0){P=!0;const E=parseInt(f,10);C.mode=s.SegmentationMode.Custom,C.segmentationForcedTimeoutMs=E}if(P){const E=this.privSpeechContext.getContext().phraseDetection||{};switch(E.mode=this.recognitionMode,this.recognitionMode){case a.RecognitionMode.Conversation:E.conversation=E.conversation??{segmentation:{}},E.conversation.segmentation=C;break;case a.RecognitionMode.Interactive:E.interactive=E.interactive??{segmentation:{}},E.interactive.segmentation=C;break;case a.RecognitionMode.Dictation:E.dictation=E.dictation??{},E.dictation.segmentation=C;break}this.privSpeechContext.getContext().phraseDetection=E}}setLanguageIdJson(){const v=this.privSpeechContext.getContext().phraseDetection||{};if(this.privRecognizerConfig.autoDetectSourceLanguages!==void 0){const f=this.privRecognizerConfig.autoDetectSourceLanguages.split(",");f.length===1&&f[0]===n.AutoDetectSourceLanguagesOpenRangeOptionName&&(f[0]="UND");let g;this.privRecognizerConfig.languageIdMode==="Continuous"?g=u.LanguageIdDetectionMode.DetectContinuous:g=u.LanguageIdDetectionMode.DetectAtAudioStart,this.privSpeechContext.getContext().languageId={languages:f,mode:g,onSuccess:{action:l.NextAction.Recognize},onUnknown:{action:p.OnUnknownAction.None},priority:u.LanguageIdDetectionPriority.PrioritizeLatency},this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:d.ResultType.Auto},phraseResults:{resultType:h.PhraseResultOutputType.Always}};const C=this.privRecognizerConfig.sourceLanguageModels;C!==void 0&&(v.customModels=C,v.onInterim={action:m.NextAction.None},v.onSuccess={action:m.NextAction.None})}this.privSpeechContext.getContext().phraseDetection=v}setOutputDetailLevelJson(){this.privEnableSpeakerId&&(this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true"?this.privSpeechContext.setWordLevelTimings():this.privRecognizerConfig.parameters.getProperty(n.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()===r.OutputFormat[r.OutputFormat.Detailed].toLocaleLowerCase()&&this.privSpeechContext.setDetailedOutputFormat())}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}get audioSource(){return this.privAudioSource}get speechContext(){return this.privSpeechContext}get dynamicGrammar(){return this.privDynamicGrammar}get agentConfig(){return this.privAgentConfig}set conversationTranslatorToken(v){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.ConversationTranslator_Token,v)}set voiceProfileType(v){this.privRecognizerConfig.parameters.setProperty(r.PropertyId.SpeechServiceConnection_SpeakerIdMode,v)}set authentication(v){this.privAuthentication=v}isDisposed(){return this.privIsDisposed}async dispose(v){if(this.privIsDisposed=!0,this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose(v)}catch{return}}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}get recognitionMode(){return this.privRecognizerConfig.recognitionMode}async recognize(v,f,g){if(this.recognizeOverride!==void 0){await this.recognizeOverride(v,f,g);return}if(this.privConnectionConfigurationPromise=void 0,this.privRecognizerConfig.recognitionMode=v,this.privRecognizerConfig.recognitionEndpointVersion==="2"){const R=this.privSpeechContext.getContext().phraseDetection||{};R.mode=v,this.privSpeechContext.getContext().phraseDetection=R}this.setLanguageIdJson(),this.setTranslationJson(),this.privRecognizerConfig.autoDetectSourceLanguages!==void 0&&this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)!==void 0&&this.setupTranslationWithLanguageId(),this.setSpeechSegmentationTimeoutJson(),this.setOutputDetailLevelJson(),this.privSuccessCallback=f,this.privErrorCallback=g,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privAudioSource.events);const C=this.connectImpl();let P;try{const R=await this.audioSource.attach(this.privRequestSession.audioNodeId),D=await this.audioSource.format,A=await this.audioSource.deviceInfo;this.privIsLiveAudio=A.type&&A.type===n.type.Microphones,P=new e.ReplayableAudioNode(R,D.avgBytesPerSec),await this.privRequestSession.onAudioSourceAttachCompleted(P,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:A}}catch(R){throw await this.privRequestSession.onStopRecognizing(),R}try{await C}catch(R){await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,R);return}const E=new r.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,E),this.receiveMessage(),this.sendAudio(P).catch(async R=>{await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,R)})}async stopRecognizing(){if(this.privRequestSession.isRecognizing)try{await this.audioSource.turnOff(),await this.sendFinalAudio(),await this.privRequestSession.onStopRecognizing(),await this.privRequestSession.turnCompletionPromise}finally{await this.privRequestSession.dispose()}}async connect(){return await this.connectImpl(),Promise.resolve()}connectAsync(v,f){this.connectImpl().then(()=>{try{v&&v()}catch(g){f&&f(g)}},g=>{try{f&&f(g)}catch{}})}async disconnect(){if(await this.cancelRecognitionLocal(r.CancellationReason.Error,r.CancellationErrorCode.NoError,"Disconnecting"),this.disconnectOverride!==void 0&&await this.disconnectOverride(),this.privConnectionPromise!==void 0)try{await(await this.privConnectionPromise).dispose()}catch{}this.privConnectionPromise=void 0}sendMessage(v){}async sendNetworkMessage(v,f){const g=typeof f=="string"?t.MessageType.Text:t.MessageType.Binary,C=typeof f=="string"?"application/json":"";return(await this.fetchConnection()).send(new i.SpeechConnectionMessage(g,v,this.privRequestSession.requestId,C,f))}set activityTemplate(v){this.privActivityTemplate=v}get activityTemplate(){return this.privActivityTemplate}set expectContentAssessmentResponse(v){this.privExpectContentAssessmentResponse=v}async sendTelemetryData(){const v=this.privRequestSession.getTelemetry();if(Xo.telemetryDataEnabled!==!0||this.privIsDisposed||v===null)return;if(Xo.telemetryData)try{Xo.telemetryData(v)}catch{}await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Text,"telemetry",this.privRequestSession.requestId,"application/json",v))}async cancelRecognitionLocal(v,f,g){this.privRequestSession.isRecognizing&&(await this.privRequestSession.onStopRecognizing(),this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,v,f,g))}async receiveMessage(){try{if(this.privIsDisposed)return;let v=await this.fetchConnection();const f=await v.read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(!f)return this.receiveMessage();this.privServiceHasSentMessage=!0;const g=i.SpeechConnectionMessage.fromConnectionMessage(f);if(g.requestId.toLowerCase()===this.privRequestSession.requestId.toLowerCase())switch(g.path.toLowerCase()){case"turn.start":this.privMustReportEndOfStream=!0,this.privRequestSession.onServiceTurnStartResponse();break;case"speech.startdetected":const C=n.SpeechDetected.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset),P=new r.RecognitionEventArgs(C.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,P);break;case"speech.enddetected":let E;g.textBody.length>0?E=g.textBody:E="{ Offset: 0 }";const I=n.SpeechDetected.fromJSON(E,this.privRequestSession.currentTurnAudioOffset),R=new r.RecognitionEventArgs(I.Offset+this.privRequestSession.currentTurnAudioOffset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,R);break;case"turn.end":await this.sendTelemetryData(),this.privRequestSession.isSpeechEnded&&this.privMustReportEndOfStream&&(this.privMustReportEndOfStream=!1,await this.cancelRecognitionLocal(r.CancellationReason.EndOfStream,r.CancellationErrorCode.NoError,void 0));const D=new r.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition),!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing){this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,D);return}else v=await this.fetchConnection(),await this.sendPrePayloadJSON(v);break;default:await this.processTypeSpecificMessages(g)||this.privServiceEvents&&this.serviceEvents.onEvent(new t.ServiceEvent(g.path.toLowerCase(),g.textBody))}return this.receiveMessage()}catch{return null}}updateSpeakerDiarizationAudioOffset(){const v=this.privRequestSession.recognitionBytesSent,f=this.privAverageBytesPerMs!==0?v/this.privAverageBytesPerMs:0;this.privSpeechContext.setSpeakerDiarizationAudioOffsetMs(f)}sendSpeechContext(v,f){this.privEnableSpeakerId&&this.updateSpeakerDiarizationAudioOffset();const g=this.speechContext.toJSON();if(f&&this.privRequestSession.onSpeechContext(),g)return v.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.context",this.privRequestSession.requestId,"application/json",g))}setupTranslationWithLanguageId(){const v=this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0),f=this.privRecognizerConfig.autoDetectSourceLanguages!==void 0;if(v!==void 0&&f){this.privSpeechContext.getContext().phraseOutput={interimResults:{resultType:d.ResultType.None},phraseResults:{resultType:h.PhraseResultOutputType.None}};const g=this.privSpeechContext.getContext().translation;if(g){const C=this.privRecognizerConfig.sourceLanguageModels;if(C!==void 0&&C.length>0){const E=this.privSpeechContext.getContext().phraseDetection||{};E.customModels=C,this.privSpeechContext.getContext().phraseDetection=E}this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)!==void 0&&(g.onSuccess={action:o.NextAction.Synthesize},g.onPassthrough={action:o.NextAction.Synthesize})}}}noOp(){}async sendPrePayloadJSON(v,f=!0){if(this.sendPrePayloadJSONOverride!==void 0)return this.sendPrePayloadJSONOverride(v);await this.sendSpeechContext(v,f),await this.sendWaveHeader(v)}async sendWaveHeader(v){const f=await this.audioSource.format;return v.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,"audio/x-wav",f.header))}connectImpl(){return this.privConnectionPromise!==void 0?this.privConnectionPromise.then(v=>v.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=void 0,this.privServiceHasSentMessage=!1,this.connectImpl())):(this.privConnectionPromise=this.retryableConnect(),this.privConnectionPromise.catch(()=>{}),this.postConnectImplOverride!==void 0?this.postConnectImplOverride(this.privConnectionPromise):this.privConnectionPromise)}sendSpeechServiceConfig(v,f,g){if(f.onSpeechContext(),Xo.telemetryDataEnabled!==!0){const P={context:{system:JSON.parse(g).context.system}};g=JSON.stringify(P)}if(this.privRecognizerConfig.parameters.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()==="true"){const C=JSON.parse(g);C.context.DisableReferenceChannel="True",C.context.MicSpec="1_0_0",g=JSON.stringify(C)}if(g)return v.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speech.config",f.requestId,"application/json",g))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(v=>v.state()===t.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.privServiceHasSentMessage=!1,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async sendAudio(v){const f=await this.audioSource.format;this.privAverageBytesPerMs=f.avgBytesPerSec/1e3;let g=Date.now();const C=this.privRecognizerConfig.parameters.getProperty("SPEECH-TransmitLengthBeforThrottleMs","5000"),P=f.avgBytesPerSec/1e3*parseInt(C,10),E=this.privRequestSession.recogNumber,I=async()=>{if(!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===E){const R=await this.fetchConnection(),D=await v.read();if(this.privRequestSession.isSpeechEnded)return;let A,K;if(!D||D.isEnd?(A=null,K=0):(A=D.buffer,this.privRequestSession.onAudioSent(A.byteLength),P>=this.privRequestSession.bytesSent?K=0:K=Math.max(0,g-Date.now())),K!==0&&await this.delay(K),A!==null&&(g=Date.now()+A.byteLength*1e3/(f.avgBytesPerSec*2)),!this.privIsDisposed&&!this.privRequestSession.isSpeechEnded&&this.privRequestSession.isRecognizing&&this.privRequestSession.recogNumber===E)if(R.send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,A)).catch(()=>{this.privRequestSession.onServiceTurnEndResponse(this.privRecognizerConfig.isContinuousRecognition).catch(()=>{})}),D?.isEnd)this.privIsLiveAudio||this.privRequestSession.onSpeechEnded();else return I()}};return I()}async retryableConnect(){let v=!1;this.privAuthFetchEventId=(0,t.createNoDashGuid)();const f=this.privRequestSession.sessionId;this.privConnectionId=f!==void 0?f:(0,t.createNoDashGuid)(),this.privRequestSession.onPreConnectionStart(this.privAuthFetchEventId,this.privConnectionId);let g=0,C="";for(;this.privRequestSession.numConnectionAttempts<=this.privRecognizerConfig.maxRetryCount;){this.privRequestSession.onRetryConnection();const E=await(v?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId));await this.privRequestSession.onAuthCompleted(!1);const I=await this.privConnectionFactory.create(this.privRecognizerConfig,E,this.privConnectionId);this.privRequestSession.listenForServiceTelemetry(I.events),I.events.attach(D=>{this.connectionEvents.onEvent(D)});const R=await I.open();if(R.statusCode===200)return await this.privRequestSession.onConnectionEstablishCompleted(R.statusCode),Promise.resolve(I);R.statusCode===1006&&(v=!0),g=R.statusCode,C=R.reason}return await this.privRequestSession.onConnectionEstablishCompleted(g,C),Promise.reject(`Unable to contact server. StatusCode: ${g}, ${this.privRecognizerConfig.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint)} Reason: ${C}`)}delay(v){return new Promise(f=>this.privSetTimeout(f,v))}writeBufferToConsole(v){let f="Buffer Size: ";if(v===null)f+="null";else{const g=new Uint8Array(v);f+=`${v.byteLength}\r
`;for(let C=0;C<v.byteLength;C++)f+=g[C].toString(16).padStart(2,"0")+" ",(C+1)%16===0&&(console.info(f),f="")}console.info(f)}async sendFinalAudio(){await(await this.fetchConnection()).send(new i.SpeechConnectionMessage(t.MessageType.Binary,"audio",this.privRequestSession.requestId,null,null))}async configureConnection(){const v=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(v):(await this.sendSpeechServiceConfig(v,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendPrePayloadJSON(v,!1),v)}};return yo.ServiceRecognizerBase=y,y.telemetryDataEnabled=!0,yo}var So={},gg;function N1(){if(gg)return So;gg=1,Object.defineProperty(So,"__esModule",{value:!0}),So.ConversationServiceRecognizer=void 0;const e=T(),t=O();let r=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.handleSpeechPhraseMessage=async u=>this.handleSpeechPhrase(u),this.handleSpeechHypothesisMessage=u=>this.handleSpeechHypothesis(u)}processTypeSpecificMessages(i){}handleRecognizedCallback(i,s,a){}handleRecognizingCallback(i,s,a){}async processSpeechMessages(i){let s=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":this.handleSpeechHypothesisMessage&&this.handleSpeechHypothesisMessage(i.textBody),s=!0;break;case"speech.phrase":this.handleSpeechPhraseMessage&&await this.handleSpeechPhraseMessage(i.textBody),s=!0;break}return s}cancelRecognition(i,s,a,o,c){}async handleSpeechPhrase(i){const s=t.SimpleSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=t.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus);let o;const c=new e.PropertyCollection;if(c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i),this.privRequestSession.onPhraseRecognized(s.Offset+s.Duration),e.ResultReason.Canceled===a){const u=t.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),l=t.EnumTranslation.implTranslateCancelErrorCode(s.RecognitionStatus);await this.cancelRecognitionLocal(u,l,t.EnumTranslation.implTranslateErrorDetails(l))}else if(s.RecognitionStatus!==t.RecognitionStatus.EndOfDictation){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,s.DisplayText,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),c);else{const u=t.DetailedSpeechPhrase.fromJSON(i,this.privRequestSession.currentTurnAudioOffset);o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,a,u.Text,u.Duration,u.Offset,u.Language,u.LanguageDetectionConfidence,u.SpeakerId,void 0,u.asJson(),c)}this.handleRecognizedCallback(o,o.offset,this.privRequestSession.sessionId)}}handleSpeechHypothesis(i){const s=t.SpeechHypothesis.fromJSON(i,this.privRequestSession.currentTurnAudioOffset),a=new e.PropertyCollection;a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,i);const o=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,s.Text,s.Duration,s.Offset,s.Language,s.LanguageDetectionConfidence,s.SpeakerId,void 0,s.asJson(),a);this.privRequestSession.onHypothesis(s.Offset),this.handleRecognizingCallback(o,s.Duration,this.privRequestSession.sessionId)}};return So.ConversationServiceRecognizer=r,So}var Dl={},mg;function z1(){return mg||(mg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognizerConfig=e.SpeechResultFormat=void 0;const t=T(),r=O(),n=tt;(function(s){s[s.Simple=0]="Simple",s[s.Detailed=1]="Detailed"})(e.SpeechResultFormat||(e.SpeechResultFormat={}));class i{constructor(a,o){this.privSpeechServiceConfig=a||new r.SpeechServiceConfig(new r.Context(null)),this.privParameters=o,this.privMaxRetryCount=parseInt(o.getProperty("SPEECH-Error-MaxRetryCount","4"),10),this.privLanguageIdMode=o.getProperty(t.PropertyId.SpeechServiceConnection_LanguageIdMode,void 0),this.privEnableSpeakerId=!1}get parameters(){return this.privParameters}get recognitionMode(){return this.privRecognitionMode}set recognitionMode(a){this.privRecognitionMode=a,this.privRecognitionActivityTimeout=a===n.RecognitionMode.Interactive?8e3:25e3,this.privSpeechServiceConfig.Recognition=n.RecognitionMode[a]}get SpeechServiceConfig(){return this.privSpeechServiceConfig}get recognitionActivityTimeout(){return this.privRecognitionActivityTimeout}get isContinuousRecognition(){return this.privRecognitionMode!==n.RecognitionMode.Interactive}get languageIdMode(){return this.privLanguageIdMode}get autoDetectSourceLanguages(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_AutoDetectSourceLanguages,void 0)}get recognitionEndpointVersion(){return this.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,"2")}set recognitionEndpointVersion(a){this.parameters.setProperty(t.PropertyId.SpeechServiceConnection_RecognitionEndpointVersion,a)}get sourceLanguageModels(){const a=[];let o=!1;if(this.autoDetectSourceLanguages!==void 0)for(const c of this.autoDetectSourceLanguages.split(",")){const u=c+t.PropertyId.SpeechServiceConnection_EndpointId.toString(),l=this.parameters.getProperty(u,void 0);l!==void 0?(a.push({language:c,endpoint:l}),o=!0):a.push({language:c,endpoint:""})}return o?a:void 0}get maxRetryCount(){return this.privMaxRetryCount}get isSpeakerDiarizationEnabled(){return this.privEnableSpeakerId}set isSpeakerDiarizationEnabled(a){this.privEnableSpeakerId=a}}e.RecognizerConfig=i}(Dl)),Dl}var nP={};Object.defineProperty(nP,"__esModule",{value:!0});var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.WebsocketMessageFormatter=void 0;const nt=b(),yg=`\r
`;class L1{toConnectionMessage(t){const r=new nt.Deferred;try{if(t.messageType===nt.MessageType.Text){const n=t.textContent;let i={},s=null;if(n){const a=n.split(`\r
\r
`);a&&a.length>0&&(i=this.parseHeaders(a[0]),a.length>1&&(s=a[1]))}r.resolve(new nt.ConnectionMessage(t.messageType,s,i,t.id))}else if(t.messageType===nt.MessageType.Binary){const n=t.binaryContent;let i={},s=null;if(!n||n.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");const a=new DataView(n),o=a.getInt16(0);if(n.byteLength<o+2)throw new Error("Invalid binary message format. Header content missing.");let c="";for(let u=0;u<o;u++)c+=String.fromCharCode(a.getInt8(u+2));i=this.parseHeaders(c),n.byteLength>o+2&&(s=n.slice(2+o)),r.resolve(new nt.ConnectionMessage(t.messageType,s,i,t.id))}}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(t){const r=new nt.Deferred;try{if(t.messageType===nt.MessageType.Text){const n=`${this.makeHeaders(t)}${yg}${t.textBody?t.textBody:""}`;r.resolve(new nt.RawWebsocketMessage(nt.MessageType.Text,n,t.id))}else if(t.messageType===nt.MessageType.Binary){const n=this.makeHeaders(t),i=t.binaryBody,s=this.stringToArrayBuffer(n),a=new Int8Array(s),o=a.byteLength,c=new Int8Array(2+o+(i?i.byteLength:0));if(c[0]=o>>8&255,c[1]=o&255,c.set(a,2),i){const l=new Int8Array(i);c.set(l,2+o)}const u=c.buffer;r.resolve(new nt.RawWebsocketMessage(nt.MessageType.Binary,u,t.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}makeHeaders(t){let r="";if(t.headers)for(const n in t.headers)n&&(r+=`${n}: ${t.headers[n]}${yg}`);return r}parseHeaders(t){const r={};if(t){const n=t.match(/[^\r\n]+/g);if(r){for(const i of n)if(i){const s=i.indexOf(":"),a=s>0?i.substr(0,s).trim().toLowerCase():i,o=s>0&&i.length>s+1?i.substr(s+1).trim():"";r[a]=o}}}return r}stringToArrayBuffer(t){const r=new ArrayBuffer(t.length),n=new DataView(r);for(let i=0;i<t.length;i++)n.setUint8(i,t.charCodeAt(i));return r}}Cu.WebsocketMessageFormatter=L1;var Co={},Sg;function j1(){if(Sg)return Co;Sg=1,Object.defineProperty(Co,"__esModule",{value:!0}),Co.SpeechConnectionFactory=void 0;const e=ge(),t=O(),r=T(),n=Ct(),i=O(),s=fe,a=St,o=tt;let c=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.interactiveRelativeUri="/speech/recognition/interactive/cognitiveservices/v1",this.conversationRelativeUri="/speech/recognition/conversation/cognitiveservices/v1",this.dictationRelativeUri="/speech/recognition/dictation/cognitiveservices/v1",this.universalUri="/stt/speech/universal/v"}async create(l,p,d){let h=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);const m=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region,void 0),y=n.ConnectionFactoryBase.getHostSuffix(m),S=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://"+m+".stt.speech"+y),v={},f=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_EndpointId,void 0),g=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(f?(!h||h.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(v[a.QueryParameterNames.CustomSpeechDeploymentId]=f):g&&(!h||h.search(a.QueryParameterNames.Language)===-1)&&(v[a.QueryParameterNames.Language]=g),(!h||h.search(a.QueryParameterNames.Format)===-1)&&(v[a.QueryParameterNames.Format]=l.parameters.getProperty(t.OutputFormatPropertyName,r.OutputFormat[r.OutputFormat.Simple]).toLowerCase()),l.autoDetectSourceLanguages!==void 0&&(v[a.QueryParameterNames.EnableLanguageId]="true"),this.setCommonUrlParams(l,v,h),h){const R=new URL(h),D=R.pathname;(D===""||D==="/")&&(R.pathname=this.universalUri+l.recognitionEndpointVersion,h=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(R.toString()))}if(!h)switch(l.recognitionMode){case o.RecognitionMode.Conversation:l.parameters.getProperty(t.ForceDictationPropertyName,"false")==="true"?h=S+this.dictationRelativeUri:l.recognitionEndpointVersion!==void 0&&parseInt(l.recognitionEndpointVersion,10)>1?h=`${S}${this.universalUri}${l.recognitionEndpointVersion}`:h=S+this.conversationRelativeUri;break;case o.RecognitionMode.Dictation:h=S+this.dictationRelativeUri;break;default:l.recognitionEndpointVersion!==void 0&&parseInt(l.recognitionEndpointVersion,10)>1?h=`${S}${this.universalUri}${l.recognitionEndpointVersion}`:h=S+this.interactiveRelativeUri;break}const C={};p.token!==void 0&&p.token!==""&&(C[p.headerName]=p.token),C[s.HeaderNames.ConnectionId]=d,C.connectionId=d;const P=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",E=new e.WebsocketConnection(h,v,C,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),P,d),I=E.uri;return l.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,I),E}};return Co.SpeechConnectionFactory=c,Co}var Po={},Cg;function x1(){if(Cg)return Po;Cg=1,Object.defineProperty(Po,"__esModule",{value:!0}),Po.ConversationTranscriberConnectionFactory=void 0;const e=ge(),t=T(),r=O(),n=Ct(),i=O(),s=fe,a=St;let o=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2"}async create(u,l,p){let d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,void 0),m=n.ConnectionFactoryBase.getHostSuffix(h),y=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,"wss://"+h+".stt.speech"+m),S={},v=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),f=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(v?(!d||d.search(a.QueryParameterNames.CustomSpeechDeploymentId)===-1)&&(S[a.QueryParameterNames.CustomSpeechDeploymentId]=v):f&&(!d||d.search(a.QueryParameterNames.Language)===-1)&&(S[a.QueryParameterNames.Language]=f),u.autoDetectSourceLanguages!==void 0&&(S[a.QueryParameterNames.EnableLanguageId]="true"),this.setV2UrlParams(u,S,d),d){const I=new URL(d),R=I.pathname;(R===""||R==="/")&&(I.pathname=this.universalUri,d=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(I.toString()))}d||(d=`${y}${this.universalUri}`);const g={};l.token!==void 0&&l.token!==""&&(g[l.headerName]=l.token),g[s.HeaderNames.ConnectionId]=p;const C=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true",P=new e.WebsocketConnection(d,S,g,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),C,p),E=P.uri;return u.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,E),P}setV2UrlParams(u,l,p){new Map([[t.PropertyId.Speech_SegmentationSilenceTimeoutMs,a.QueryParameterNames.SegmentationSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_EnableAudioLogging,a.QueryParameterNames.EnableAudioLogging],[t.PropertyId.SpeechServiceConnection_EndSilenceTimeoutMs,a.QueryParameterNames.EndSilenceTimeoutMs],[t.PropertyId.SpeechServiceConnection_InitialSilenceTimeoutMs,a.QueryParameterNames.InitialSilenceTimeoutMs],[t.PropertyId.SpeechServiceResponse_PostProcessingOption,a.QueryParameterNames.Postprocessing],[t.PropertyId.SpeechServiceResponse_ProfanityOption,a.QueryParameterNames.Profanity],[t.PropertyId.SpeechServiceResponse_StablePartialResultThreshold,a.QueryParameterNames.StableIntermediateThreshold]]).forEach((m,y)=>{this.setUrlParameter(y,m,u,l,p)});const h=JSON.parse(u.parameters.getProperty(r.ServicePropertiesPropertyName,"{}"));Object.keys(h).forEach(m=>{l[m]=h[m]})}};return Po.ConversationTranscriberConnectionFactory=o,Po}var Ro={},Pg;function B1(){if(Pg)return Ro;Pg=1,Object.defineProperty(Ro,"__esModule",{value:!0}),Ro.TranscriberConnectionFactory=void 0;const e=ge(),t=T(),r=Ct(),n=O(),i=fe,s=St;let a=class extends r.ConnectionFactoryBase{constructor(){super(...arguments),this.multiaudioRelativeUri="/speech/recognition/multiaudio"}create(c,u,l){let p=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);const d=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"centralus"),h=r.ConnectionFactoryBase.getHostSuffix(d),m="wss://transcribe."+d+".cts.speech"+h+this.multiaudioRelativeUri,y=c.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,m),S={};this.setQueryParams(S,c,p),p||(p=y);const v={};u.token!==void 0&&u.token!==""&&(v[u.headerName]=u.token),v[i.HeaderNames.ConnectionId]=l,c.parameters.setProperty(t.PropertyId.SpeechServiceConnection_Url,p);const f=c.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(p,S,v,new n.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(c),f,l))}setQueryParams(c,u,l){const p=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_EndpointId,void 0),d=u.parameters.getProperty(t.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);p&&!(s.QueryParameterNames.CustomSpeechDeploymentId in c)&&(c[s.QueryParameterNames.CustomSpeechDeploymentId]=p),d&&!(s.QueryParameterNames.Language in c)&&(c[s.QueryParameterNames.Language]=d);const h=u.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps,"false").toLowerCase()==="true",m=u.parameters.getProperty(n.OutputFormatPropertyName,t.OutputFormat[t.OutputFormat.Simple])!==t.OutputFormat[t.OutputFormat.Simple];(h||m)&&(c[s.QueryParameterNames.Format]=t.OutputFormat[t.OutputFormat.Detailed].toLowerCase()),this.setCommonUrlParams(u,c,l)}};return Ro.TranscriberConnectionFactory=a,Ro}var Eo={},Rg;function F1(){if(Rg)return Eo;Rg=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.TranslationConnectionFactory=void 0;const e=ge(),t=Ks,r=T(),n=Ct(),i=O(),s=fe,a=St,o=tt;let c=class extends n.ConnectionFactoryBase{constructor(){super(...arguments),this.universalUri="/stt/speech/universal/v2",this.translationV1Uri="/speech/translation/cognitiveservices/v1"}async create(l,p,d){let h=this.getEndpointUrl(l);const m={};if(this.setQueryParams(m,l,h),h){const f=new URL(h),g=f.pathname;(g===""||g==="/")&&(f.pathname=this.universalUri,h=await n.ConnectionFactoryBase.getRedirectUrlFromEndpoint(f.toString()))}const y={};p.token!==void 0&&p.token!==""&&(y[p.headerName]=p.token),y[s.HeaderNames.ConnectionId]=d,l.parameters.setProperty(r.PropertyId.SpeechServiceConnection_Url,h);const S=l.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return new e.WebsocketConnection(h,m,y,new i.WebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(l),S,d)}getEndpointUrl(l,p){const d=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Region),h=n.ConnectionFactoryBase.getHostSuffix(d);let m=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Endpoint,void 0);return m?p===!0?m:t.StringUtils.formatString(m,{region:d}):(l.parameters.getProperty("SPEECH-ForceV1Endpoint","false")==="true"?m=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.s2s.speech"+h)+this.translationV1Uri:m=l.parameters.getProperty(r.PropertyId.SpeechServiceConnection_Host,"wss://{region}.stt.speech"+h)+this.universalUri,p===!0?m:t.StringUtils.formatString(m,{region:d}))}setQueryParams(l,p,d){l.from=p.parameters.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage),l.to=p.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationToLanguages),l.scenario=p.recognitionMode===o.RecognitionMode.Interactive?"interactive":p.recognitionMode===o.RecognitionMode.Conversation?"conversation":"",this.setCommonUrlParams(p,l,d),this.setUrlParameter(r.PropertyId.SpeechServiceResponse_TranslationRequestStablePartialResult,a.QueryParameterNames.StableTranslation,p,l,d);const h=p.parameters.getProperty(r.PropertyId.SpeechServiceConnection_TranslationVoice,void 0);h!==void 0&&(l.voice=h,l.features="requireVoice")}};return Eo.TranslationConnectionFactory=c,Eo}var wo={},Eg;function q1(){if(Eg)return wo;Eg=1,Object.defineProperty(wo,"__esModule",{value:!0}),wo.EnumTranslation=void 0;const e=T(),t=O();let r=class{static implTranslateRecognitionResult(i,s=!1){let a=e.ResultReason.Canceled;switch(i){case t.RecognitionStatus.Success:a=e.ResultReason.RecognizedSpeech;break;case t.RecognitionStatus.EndOfDictation:a=s?e.ResultReason.RecognizedSpeech:e.ResultReason.NoMatch;break;case t.RecognitionStatus.NoMatch:case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:a=e.ResultReason.NoMatch;break;case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:a=e.ResultReason.Canceled;break}return a}static implTranslateCancelResult(i){let s=e.CancellationReason.EndOfStream;switch(i){case t.RecognitionStatus.Success:case t.RecognitionStatus.EndOfDictation:case t.RecognitionStatus.NoMatch:s=e.CancellationReason.EndOfStream;break;case t.RecognitionStatus.InitialSilenceTimeout:case t.RecognitionStatus.BabbleTimeout:case t.RecognitionStatus.Error:case t.RecognitionStatus.BadRequest:case t.RecognitionStatus.Forbidden:default:s=e.CancellationReason.Error;break}return s}static implTranslateCancelErrorCode(i){let s=e.CancellationErrorCode.NoError;switch(i){case t.RecognitionStatus.Error:s=e.CancellationErrorCode.ServiceError;break;case t.RecognitionStatus.TooManyRequests:s=e.CancellationErrorCode.TooManyRequests;break;case t.RecognitionStatus.BadRequest:s=e.CancellationErrorCode.BadRequestParameters;break;case t.RecognitionStatus.Forbidden:s=e.CancellationErrorCode.Forbidden;break;default:s=e.CancellationErrorCode.NoError;break}return s}static implTranslateErrorDetails(i){let s="The speech service encountered an internal error and could not continue.";switch(i){case e.CancellationErrorCode.Forbidden:s="The recognizer is using a free subscription that ran out of quota.";break;case e.CancellationErrorCode.BadRequestParameters:s="Invalid parameter or unsupported audio format in the request.";break;case e.CancellationErrorCode.TooManyRequests:s="The number of parallel requests exceeded the number of allowed concurrent transcriptions.";break}return s}};return wo.EnumTranslation=r,wo}var iP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RecognitionStatus=e.SynthesisStatus=void 0,function(t){t[t.Success=0]="Success",t[t.SynthesisEnd=1]="SynthesisEnd",t[t.Error=2]="Error"}(e.SynthesisStatus||(e.SynthesisStatus={})),function(t){t[t.Success=0]="Success",t[t.NoMatch=1]="NoMatch",t[t.InitialSilenceTimeout=2]="InitialSilenceTimeout",t[t.BabbleTimeout=3]="BabbleTimeout",t[t.Error=4]="Error",t[t.EndOfDictation=5]="EndOfDictation",t[t.TooManyRequests=6]="TooManyRequests",t[t.BadRequest=7]="BadRequest",t[t.Forbidden=8]="Forbidden"}(e.RecognitionStatus||(e.RecognitionStatus={}))})(iP);var Io={},wg;function U1(){if(wg)return Io;wg=1,Object.defineProperty(Io,"__esModule",{value:!0}),Io.TranslationSynthesisEnd=void 0;const e=O();let t=class oP{constructor(n){this.privSynthesisEnd=JSON.parse(n),this.privSynthesisEnd.SynthesisStatus&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]),this.privSynthesisEnd.Status&&(this.privSynthesisEnd.SynthesisStatus=e.SynthesisStatus[this.privSynthesisEnd.Status])}static fromJSON(n){return new oP(n)}get SynthesisStatus(){return this.privSynthesisEnd.SynthesisStatus}get FailureReason(){return this.privSynthesisEnd.FailureReason}};return Io.TranslationSynthesisEnd=t,Io}var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.TranslationHypothesis=void 0;const $1=z,Ig=$c;class oc{constructor(t,r){this.privTranslationHypothesis=t,this.privTranslationHypothesis.Offset+=r,this.privTranslationHypothesis.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationHypothesis.Translation.TranslationStatus)}static fromJSON(t,r){return new oc(JSON.parse(t),r)}static fromTranslationResponse(t,r){$1.Contracts.throwIfNullOrUndefined(t,"translationHypothesis");const n=t.SpeechHypothesis;return t.SpeechHypothesis=void 0,n.Translation=t,new oc(n,r)}get Duration(){return this.privTranslationHypothesis.Duration}get Offset(){return this.privTranslationHypothesis.Offset}get Text(){return this.privTranslationHypothesis.Text}get Translation(){return this.privTranslationHypothesis.Translation}get Language(){return this.privTranslationHypothesis.PrimaryLanguage?.Language}asJson(){const t={...this.privTranslationHypothesis};return t.Translation!==void 0?JSON.stringify({...t,TranslationStatus:Ig.TranslationStatus[t.Translation.TranslationStatus]}):JSON.stringify(t)}mapTranslationStatus(t){if(typeof t=="string")return Ig.TranslationStatus[t];if(typeof t=="number")return t}}Pu.TranslationHypothesis=oc;var To={},Tg;function W1(){if(Tg)return To;Tg=1,Object.defineProperty(To,"__esModule",{value:!0}),To.TranslationPhrase=void 0;const e=z,t=O(),r=$c;let n=class Np{constructor(s,a){this.privTranslationPhrase=s,this.privTranslationPhrase.Offset+=a,this.privTranslationPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privTranslationPhrase.RecognitionStatus),this.privTranslationPhrase.Translation!==void 0&&(this.privTranslationPhrase.Translation.TranslationStatus=this.mapTranslationStatus(this.privTranslationPhrase.Translation.TranslationStatus))}static fromJSON(s,a){return new Np(JSON.parse(s),a)}static fromTranslationResponse(s,a){e.Contracts.throwIfNullOrUndefined(s,"translationResponse");const o=s.SpeechPhrase;return s.SpeechPhrase=void 0,o.Translation=s,o.Text=o.DisplayText,new Np(o,a)}get RecognitionStatus(){return this.privTranslationPhrase.RecognitionStatus}get Offset(){return this.privTranslationPhrase.Offset}get Duration(){return this.privTranslationPhrase.Duration}get Text(){return this.privTranslationPhrase.Text}get Language(){return this.privTranslationPhrase.PrimaryLanguage?.Language}get Confidence(){return this.privTranslationPhrase.PrimaryLanguage?.Confidence}get Translation(){return this.privTranslationPhrase.Translation}asJson(){const s={...this.privTranslationPhrase},a={...s,RecognitionStatus:t.RecognitionStatus[s.RecognitionStatus]};return s.Translation&&(a.Translation={...s.Translation,TranslationStatus:r.TranslationStatus[s.Translation.TranslationStatus]}),JSON.stringify(a)}mapRecognitionStatus(s){if(typeof s=="string")return t.RecognitionStatus[s];if(typeof s=="number")return s}mapTranslationStatus(s){if(typeof s=="string")return r.TranslationStatus[s];if(typeof s=="number")return s}};return To.TranslationPhrase=n,To}var _o={},_g;function V1(){if(_g)return _o;_g=1,Object.defineProperty(_o,"__esModule",{value:!0}),_o.TranslationServiceRecognizer=void 0;const e=b(),t=T(),r=O();let n=class extends r.ConversationServiceRecognizer{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privTranslationRecognizer=u,this.connectionEvents.attach(l=>{l.name==="ConnectionEstablishedEvent"&&this.privTranslationRecognizer.onConnection()})}async processTypeSpecificMessages(s){const a=new t.PropertyCollection;let o=await this.processSpeechMessages(s);if(o)return!0;const c=async l=>{if(a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,l.asJson()),this.privRequestSession.onPhraseRecognized(l.Offset+l.Duration),l.RecognitionStatus===r.RecognitionStatus.Success){const p=this.fireEventForResult(l,a);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,p)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(p.result)}catch(d){this.privErrorCallback&&this.privErrorCallback(d)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}else{const p=r.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus),d=new t.TranslationRecognitionResult(void 0,this.privRequestSession.requestId,p,l.Text,l.Duration,l.Offset,l.Language,l.Confidence,void 0,l.asJson(),a);if(p===t.ResultReason.Canceled){const h=r.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),m=r.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(h,m,r.EnumTranslation.implTranslateErrorDetails(m))}else if(l.RecognitionStatus!==r.RecognitionStatus.EndOfDictation){const h=new t.TranslationRecognitionEventArgs(d,d.offset,this.privRequestSession.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,h)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(d)}catch(m){this.privErrorCallback&&this.privErrorCallback(m)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0}},u=l=>{a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,l.asJson());const p=this.fireEventForResult(l,a);if(this.privRequestSession.onHypothesis(p.offset),this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,p)}catch{}o=!0};switch(s.messageType===e.MessageType.Text&&a.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"translation.hypothesis":u(r.TranslationHypothesis.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.response":const l=JSON.parse(s.textBody);if(l.SpeechPhrase)await c(r.TranslationPhrase.fromTranslationResponse(l,this.privRequestSession.currentTurnAudioOffset));else{const d=JSON.parse(s.textBody);d.SpeechHypothesis&&u(r.TranslationHypothesis.fromTranslationResponse(d,this.privRequestSession.currentTurnAudioOffset))}break;case"translation.phrase":await c(r.TranslationPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset));break;case"translation.synthesis":case"audio":this.sendSynthesisAudio(s.binaryBody,this.privRequestSession.sessionId),o=!0;break;case"audio.end":case"translation.synthesis.end":const p=r.TranslationSynthesisEnd.fromJSON(s.textBody);switch(p.SynthesisStatus){case r.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){const d=new t.TranslationSynthesisResult(t.ResultReason.Canceled,void 0),h=new t.TranslationSynthesisEventArgs(d,this.privRequestSession.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,h)}catch{}}if(this.privTranslationRecognizer.canceled){const d=new t.TranslationRecognitionCanceledEventArgs(this.privRequestSession.sessionId,t.CancellationReason.Error,p.FailureReason,t.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,d)}catch{}}break;case r.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,this.privRequestSession.sessionId);break}o=!0;break}return o}cancelRecognition(s,a,o,c,u){const l=new t.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privTranslationRecognizer.canceled){const p=new t.TranslationRecognitionCanceledEventArgs(s,o,u,c,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.TranslationRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}handleRecognizingCallback(s,a,o){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,c)}catch{}}handleRecognizedCallback(s,a,o){try{const c=new t.TranslationRecognitionEventArgs(t.TranslationRecognitionResult.fromSpeechRecognitionResult(s),a,o);this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch{}}fireEventForResult(s,a){let o;if(s.Translation.Translations!==void 0){o=new t.Translations;for(const h of s.Translation.Translations)o.set(h.Language,h.Text||h.DisplayText)}let c,u;s instanceof r.TranslationPhrase?(s.Translation&&s.Translation.TranslationStatus===e.TranslationStatus.Success?c=t.ResultReason.TranslatedSpeech:c=t.ResultReason.RecognizedSpeech,u=s.Confidence):c=t.ResultReason.TranslatingSpeech;const l=s.Language,p=new t.TranslationRecognitionResult(o,this.privRequestSession.requestId,c,s.Text,s.Duration,s.Offset,l,u,s.Translation.FailureReason,s.asJson(),a);return new t.TranslationRecognitionEventArgs(p,s.Offset,this.privRequestSession.sessionId)}sendSynthesisAudio(s,a){const o=s===void 0?t.ResultReason.SynthesizingAudioCompleted:t.ResultReason.SynthesizingAudio,c=new t.TranslationSynthesisResult(o,s),u=new t.TranslationSynthesisEventArgs(c,a);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,u)}catch{}}};return _o.TranslationServiceRecognizer=n,_o}var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.SpeechDetected=void 0;class Xd{constructor(t,r){this.privSpeechStartDetected=JSON.parse(t),this.privSpeechStartDetected.Offset+=r}static fromJSON(t,r){return new Xd(t,r)}get Offset(){return this.privSpeechStartDetected.Offset}}Ru.SpeechDetected=Xd;var Eu={};Object.defineProperty(Eu,"__esModule",{value:!0});Eu.SpeechHypothesis=void 0;class Zd{constructor(t,r){this.privSpeechHypothesis=JSON.parse(t),this.updateOffset(r)}static fromJSON(t,r){return new Zd(t,r)}updateOffset(t){this.privSpeechHypothesis.Offset+=t}asJson(){return JSON.stringify(this.privSpeechHypothesis)}get Text(){return this.privSpeechHypothesis.Text}get Offset(){return this.privSpeechHypothesis.Offset}get Duration(){return this.privSpeechHypothesis.Duration}get Language(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSpeechHypothesis.PrimaryLanguage===void 0?void 0:this.privSpeechHypothesis.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSpeechHypothesis.SpeakerId}}Eu.SpeechHypothesis=Zd;var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.SpeechKeyword=void 0;class eh{constructor(t,r){this.privSpeechKeyword=JSON.parse(t),this.privSpeechKeyword.Offset+=r}static fromJSON(t,r){return new eh(t,r)}get Status(){return this.privSpeechKeyword.Status}get Text(){return this.privSpeechKeyword.Text}get Offset(){return this.privSpeechKeyword.Offset}get Duration(){return this.privSpeechKeyword.Duration}asJson(){return JSON.stringify(this.privSpeechKeyword)}}wu.SpeechKeyword=eh;var Ao={},Ag;function H1(){if(Ag)return Ao;Ag=1,Object.defineProperty(Ao,"__esModule",{value:!0}),Ao.SpeechServiceRecognizer=void 0;const e=T(),t=O();let r=class extends t.ServiceRecognizerBase{constructor(i,s,a,o,c){super(i,s,a,o,c),this.privSpeechRecognizer=c}async processTypeSpecificMessages(i){let s;const a=new e.PropertyCollection;let o=!1;switch(i.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const c=t.SpeechHypothesis.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,c.asJson()),s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,c.Text,c.Duration,c.Offset,c.Language,c.LanguageDetectionConfidence,void 0,void 0,c.asJson(),a),this.privRequestSession.onHypothesis(c.Offset);const u=new e.SpeechRecognitionEventArgs(s,c.Offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,u)}catch{}o=!0;break;case"speech.phrase":const l=t.SimpleSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,l.asJson());const p=t.EnumTranslation.implTranslateRecognitionResult(l.RecognitionStatus,this.privExpectContentAssessmentResponse);if(this.privRequestSession.onPhraseRecognized(l.Offset+l.Duration),e.ResultReason.Canceled===p){const d=t.EnumTranslation.implTranslateCancelResult(l.RecognitionStatus),h=t.EnumTranslation.implTranslateCancelErrorCode(l.RecognitionStatus);await this.cancelRecognitionLocal(d,h,t.EnumTranslation.implTranslateErrorDetails(h))}else{if(l.RecognitionStatus===t.RecognitionStatus.EndOfDictation)break;if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,p,l.DisplayText,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,void 0,void 0,l.asJson(),a);else{const h=t.DetailedSpeechPhrase.fromJSON(i.textBody,this.privRequestSession.currentTurnAudioOffset);a.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,h.asJson()),s=new e.SpeechRecognitionResult(this.privRequestSession.requestId,p,h.RecognitionStatus===t.RecognitionStatus.Success?h.NBest[0].Display:"",h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),a)}const d=new e.SpeechRecognitionEventArgs(s,s.offset,this.privRequestSession.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,d)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(s)}catch(h){this.privErrorCallback&&this.privErrorCallback(h)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}o=!0;break}return o}cancelRecognition(i,s,a,o,c){const u=new e.PropertyCollection;if(u.setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[o]),this.privSpeechRecognizer.canceled){const l=new e.SpeechRecognitionCanceledEventArgs(a,c,o,void 0,i);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,l)}catch{}}if(this.privSuccessCallback){const l=new e.SpeechRecognitionResult(s,e.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,c,void 0,u);try{this.privSuccessCallback(l),this.privSuccessCallback=void 0}catch{}}}};return Ao.SpeechServiceRecognizer=r,Ao}var ko={},sP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityProvider=e.SpeakerDiarizationMode=void 0,function(t){t.None="None",t.Identity="Identity",t.Anonymous="Anonymous"}(e.SpeakerDiarizationMode||(e.SpeakerDiarizationMode={})),function(t){t.CallCenter="CallCenter"}(e.IdentityProvider||(e.IdentityProvider={}))})(sP);var kg;function K1(){if(kg)return ko;kg=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.ConversationTranscriptionServiceRecognizer=void 0;const e=T(),t=O(),r=sP,n=tt;let i=class extends t.ServiceRecognizerBase{constructor(a,o,c,u,l){super(a,o,c,u,l),this.privConversationTranscriber=l,this.setSpeakerDiarizationJson()}setSpeakerDiarizationJson(){if(this.privEnableSpeakerId){const a=this.privSpeechContext.getContext().phraseDetection||{};a.mode=n.RecognitionMode.Conversation;const o={};o.mode=r.SpeakerDiarizationMode.Anonymous,o.audioSessionId=this.privDiarizationSessionId,o.audioOffsetMs=0,o.diarizeIntermediates=this.privRecognizerConfig.parameters.getProperty(e.PropertyId.SpeechServiceResponse_DiarizeIntermediateResults,"false")==="true",a.speakerDiarization=o,this.privSpeechContext.getContext().phraseDetection=a}}async processTypeSpecificMessages(a){let o;const c=new e.PropertyCollection;c.setProperty(e.PropertyId.SpeechServiceResponse_JsonResult,a.textBody);let u=!1;switch(a.path.toLowerCase()){case"speech.hypothesis":case"speech.fragment":const l=t.SpeechHypothesis.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,e.ResultReason.RecognizingSpeech,l.Text,l.Duration,l.Offset,l.Language,l.LanguageDetectionConfidence,l.SpeakerId,void 0,l.asJson(),c),this.privRequestSession.onHypothesis(l.Offset);const p=new e.ConversationTranscriptionEventArgs(o,l.Duration,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribing)try{this.privConversationTranscriber.transcribing(this.privConversationTranscriber,p)}catch{}u=!0;break;case"speech.phrase":const d=t.SimpleSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset),h=t.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus);if(this.privRequestSession.onPhraseRecognized(d.Offset+d.Duration),e.ResultReason.Canceled===h){const m=t.EnumTranslation.implTranslateCancelResult(d.RecognitionStatus),y=t.EnumTranslation.implTranslateCancelErrorCode(d.RecognitionStatus);await this.cancelRecognitionLocal(m,y,t.EnumTranslation.implTranslateErrorDetails(y))}else if(!(this.privRequestSession.isSpeechEnded&&h===e.ResultReason.NoMatch&&d.RecognitionStatus!==t.RecognitionStatus.InitialSilenceTimeout)){if(this.privRecognizerConfig.parameters.getProperty(t.OutputFormatPropertyName)===e.OutputFormat[e.OutputFormat.Simple])o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,d.DisplayText,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,d.SpeakerId,void 0,d.asJson(),c);else{const y=t.DetailedSpeechPhrase.fromJSON(a.textBody,this.privRequestSession.currentTurnAudioOffset);o=new e.ConversationTranscriptionResult(this.privRequestSession.requestId,h,y.RecognitionStatus===t.RecognitionStatus.Success?y.NBest[0].Display:void 0,y.Duration,y.Offset,y.Language,y.LanguageDetectionConfidence,d.SpeakerId,void 0,y.asJson(),c)}const m=new e.ConversationTranscriptionEventArgs(o,o.offset,this.privRequestSession.sessionId);if(this.privConversationTranscriber.transcribed)try{this.privConversationTranscriber.transcribed(this.privConversationTranscriber,m)}catch{}}u=!0;break}return u}cancelRecognition(a,o,c,u,l){if(new e.PropertyCollection().setProperty(t.CancellationErrorCodePropertyName,e.CancellationErrorCode[u]),this.privConversationTranscriber.canceled){const d=new e.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privConversationTranscriber.canceled(this.privConversationTranscriber,d)}catch{}}}};return ko.ConversationTranscriptionServiceRecognizer=i,ko}var Mo={},Mg;function J1(){if(Mg)return Mo;Mg=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.TranscriptionServiceRecognizer=void 0;const e=b(),t=T(),r=O(),n=Gt;let i=class extends r.ConversationServiceRecognizer{constructor(a,o,c,u,l){super(a,o,c,u,l),this.privTranscriberRecognizer=l,this.sendPrePayloadJSONOverride=p=>this.sendTranscriptionStartJSON(p),this.privRecognizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceResponse_RequestWordLevelTimestamps)==="true"&&this.privSpeechContext.setWordLevelTimings()}async sendSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createSpeechEventPayload(a,o))}}async sendMeetingSpeechEventAsync(a,o){if(this.privRequestSession.isRecognizing){const c=await this.fetchConnection();await this.sendSpeechEvent(c,this.createMeetingSpeechEventPayload(a,o))}}processTypeSpecificMessages(a){return this.processSpeechMessages(a)}handleRecognizedCallback(a,o,c){try{const u=new t.SpeechRecognitionEventArgs(a,o,c);if(this.privTranscriberRecognizer.recognized(this.privTranscriberRecognizer,u),this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(l){this.privErrorCallback&&this.privErrorCallback(l)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}catch{}}handleRecognizingCallback(a,o,c){try{const u=new t.SpeechRecognitionEventArgs(a,o,c);this.privTranscriberRecognizer.recognizing(this.privTranscriberRecognizer,u)}catch{}}cancelRecognition(a,o,c,u,l){const p=new t.PropertyCollection;if(p.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[u]),this.privTranscriberRecognizer.IsMeetingRecognizer()){if(this.privTranscriberRecognizer.canceled){const d=new t.MeetingTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}}else if(this.privTranscriberRecognizer.canceled){const d=new t.ConversationTranscriptionCanceledEventArgs(c,l,u,void 0,a);try{this.privTranscriberRecognizer.canceled(this.privTranscriberRecognizer,d)}catch{}}if(this.privSuccessCallback){const d=new t.SpeechRecognitionResult(o,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,l,void 0,p);try{this.privSuccessCallback(d),this.privSuccessCallback=void 0}catch{}}}async sendTranscriptionStartJSON(a){if(await this.sendSpeechContext(a,!0),this.privTranscriberRecognizer.IsMeetingRecognizer()){const o=this.privTranscriberRecognizer.getMeetingInfo(),c=this.createMeetingSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}else{const o=this.privTranscriberRecognizer.getConversationInfo(),c=this.createSpeechEventPayload(o,"start");await this.sendSpeechEvent(a,c)}await this.sendWaveHeader(a)}sendSpeechEvent(a,o){const c=JSON.stringify(o);if(c)return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.event",this.privRequestSession.requestId,"application/json",c))}createSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.conversationProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}createMeetingSpeechEventPayload(a,o){const c={id:"meeting",name:o,meeting:a.meetingProperties};return c.meeting.id=a.id,c.meeting.attendees=a.participants,c}};return Mo.TranscriptionServiceRecognizer=i,Mo}var Oo={},Og;function G1(){if(Og)return Oo;Og=1,Object.defineProperty(Oo,"__esModule",{value:!0}),Oo.DetailedSpeechPhrase=void 0;const e=O();let t=class aP{constructor(n,i){this.privDetailedSpeechPhrase=JSON.parse(n),this.privDetailedSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privDetailedSpeechPhrase.RecognitionStatus),this.updateOffsets(i)}static fromJSON(n,i){return new aP(n,i)}updateOffsets(n){if(this.privDetailedSpeechPhrase.Offset+=n,this.privDetailedSpeechPhrase.NBest)for(const i of this.privDetailedSpeechPhrase.NBest){if(i.Words)for(const s of i.Words)s.Offset+=n;if(i.DisplayWords)for(const s of i.DisplayWords)s.Offset+=n}}asJson(){const n={...this.privDetailedSpeechPhrase};return JSON.stringify({...n,RecognitionStatus:e.RecognitionStatus[n.RecognitionStatus]})}get RecognitionStatus(){return this.privDetailedSpeechPhrase.RecognitionStatus}get NBest(){return this.privDetailedSpeechPhrase.NBest}get Duration(){return this.privDetailedSpeechPhrase.Duration}get Offset(){return this.privDetailedSpeechPhrase.Offset}get Language(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privDetailedSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privDetailedSpeechPhrase.PrimaryLanguage.Confidence}get Text(){return this.privDetailedSpeechPhrase.NBest&&this.privDetailedSpeechPhrase.NBest[0]?this.privDetailedSpeechPhrase.NBest[0].Display||this.privDetailedSpeechPhrase.NBest[0].DisplayText:this.privDetailedSpeechPhrase.DisplayText}get SpeakerId(){return this.privDetailedSpeechPhrase.SpeakerId}mapRecognitionStatus(n){if(typeof n=="string")return e.RecognitionStatus[n];if(typeof n=="number")return n}};return Oo.DetailedSpeechPhrase=t,Oo}var Do={},Dg;function Q1(){if(Dg)return Do;Dg=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.SimpleSpeechPhrase=void 0;const e=O();let t=class cP{constructor(n,i=0){this.privSimpleSpeechPhrase=JSON.parse(n),this.privSimpleSpeechPhrase.RecognitionStatus=this.mapRecognitionStatus(this.privSimpleSpeechPhrase.RecognitionStatus),this.updateOffset(i)}static fromJSON(n,i){return new cP(n,i)}updateOffset(n){this.privSimpleSpeechPhrase.Offset+=n}asJson(){const n={...this.privSimpleSpeechPhrase};return JSON.stringify({...n,RecognitionStatus:e.RecognitionStatus[n.RecognitionStatus]})}get RecognitionStatus(){return this.privSimpleSpeechPhrase.RecognitionStatus}get DisplayText(){return this.privSimpleSpeechPhrase.DisplayText}get Offset(){return this.privSimpleSpeechPhrase.Offset}get Duration(){return this.privSimpleSpeechPhrase.Duration}get Language(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Language}get LanguageDetectionConfidence(){return this.privSimpleSpeechPhrase.PrimaryLanguage===void 0?void 0:this.privSimpleSpeechPhrase.PrimaryLanguage.Confidence}get SpeakerId(){return this.privSimpleSpeechPhrase.SpeakerId}mapRecognitionStatus(n){if(typeof n=="string")return e.RecognitionStatus[n];if(typeof n=="number")return n}};return Do.SimpleSpeechPhrase=t,Do}var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.AddedLmIntent=void 0;class Y1{constructor(t,r){this.modelImpl=t,this.intentName=r}}Iu.AddedLmIntent=Y1;var bo={},bg;function X1(){if(bg)return bo;bg=1,Object.defineProperty(bo,"__esModule",{value:!0}),bo.IntentServiceRecognizer=void 0;const e=b(),t=T(),r=O();let n=class extends r.ServiceRecognizerBase{constructor(s,a,o,c,u){super(s,a,o,c,u),this.privIntentRecognizer=u,this.privIntentDataSent=!1,c.recognitionEndpointVersion="1"}setIntents(s,a){this.privAddedLmIntents=s,this.privUmbrellaIntent=a,this.privIntentDataSent=!0}processTypeSpecificMessages(s){let a,o,c=!1;const u=new t.PropertyCollection;switch(s.messageType===e.MessageType.Text&&u.setProperty(t.PropertyId.SpeechServiceResponse_JsonResult,s.textBody),s.path.toLowerCase()){case"speech.hypothesis":const p=r.SpeechHypothesis.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);if(a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,t.ResultReason.RecognizingIntent,p.Text,p.Duration,p.Offset,p.Language,p.LanguageDetectionConfidence,void 0,p.asJson(),u),this.privRequestSession.onHypothesis(a.offset),o=new t.IntentRecognitionEventArgs(a,p.Offset,this.privRequestSession.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,o)}catch{}c=!0;break;case"speech.phrase":const d=r.SimpleSpeechPhrase.fromJSON(s.textBody,this.privRequestSession.currentTurnAudioOffset);a=new t.IntentRecognitionResult(void 0,this.privRequestSession.requestId,r.EnumTranslation.implTranslateRecognitionResult(d.RecognitionStatus),d.DisplayText,d.Duration,d.Offset,d.Language,d.LanguageDetectionConfidence,void 0,d.asJson(),u),o=new t.IntentRecognitionEventArgs(a,a.offset,this.privRequestSession.sessionId);const h=()=>{if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(a)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}};this.privIntentDataSent===!1||t.ResultReason.NoMatch===o.result.reason?(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),h()):this.privPendingIntentArgs=o,c=!0;break;case"response":if(o=this.privPendingIntentArgs,this.privPendingIntentArgs=void 0,o===void 0){if(s.textBody==="")return;o=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult,0,this.privRequestSession.sessionId)}const m=r.IntentResponse.fromJSON(s.textBody);if(m!==null&&m.topScoringIntent&&m.topScoringIntent.intent){let y=this.privAddedLmIntents[m.topScoringIntent.intent];if(this.privUmbrellaIntent!==void 0&&(y=this.privUmbrellaIntent),y){const S=y===void 0||y.intentName===void 0?m.topScoringIntent.intent:y.intentName;let v=o.result.reason;S!==void 0&&(v=t.ResultReason.RecognizedIntent);const f=o.result.properties!==void 0?o.result.properties:new t.PropertyCollection;f.setProperty(t.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,s.textBody),o=new t.IntentRecognitionEventArgs(new t.IntentRecognitionResult(S,o.result.resultId,v,o.result.text,o.result.duration,o.result.offset,void 0,void 0,o.result.errorDetails,o.result.json,f),o.offset,o.sessionId)}}if(this.privRequestSession.onPhraseRecognized(o.offset+o.result.duration),this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,o)}catch{}if(this.privSuccessCallback){try{this.privSuccessCallback(o.result)}catch(y){this.privErrorCallback&&this.privErrorCallback(y)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}c=!0;break}const l=new e.Deferred;return l.resolve(c),l.promise}cancelRecognition(s,a,o,c,u){const l=new t.PropertyCollection;if(l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]),this.privIntentRecognizer.canceled){const p=new t.IntentRecognitionCanceledEventArgs(o,u,c,void 0,void 0,s);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,p)}catch{}}if(this.privSuccessCallback){const p=new t.IntentRecognitionResult(void 0,a,t.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,u,void 0,l);try{this.privSuccessCallback(p),this.privSuccessCallback=void 0}catch{}}}};return bo.IntentServiceRecognizer=n,bo}var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.IntentResponse=void 0;class th{constructor(t){t===""?this.privIntentResponse={}:this.privIntentResponse=JSON.parse(t)}static fromJSON(t){return new th(t)}get query(){return this.privIntentResponse.query}get topScoringIntent(){return this.privIntentResponse.topScoringIntent}get entities(){return this.privIntentResponse.entities}}Tu.IntentResponse=th;var uP={};Object.defineProperty(uP,"__esModule",{value:!0});var _u={},Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.ServiceTelemetryListener=void 0;const Nt=b(),Ng=Su;class Z1{constructor(t,r,n){this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privRequestId=t,this.privAudioSourceId=r,this.privAudioNodeId=n,this.privReceivedMessages={},this.privPhraseLatencies=[],this.privHypothesisLatencies=[]}phraseReceived(t){t>0&&this.privPhraseLatencies.push(Date.now()-t)}hypothesisReceived(t){t>0&&this.privHypothesisLatencies.push(Date.now()-t)}onEvent(t){this.privIsDisposed||(t instanceof Ng.RecognitionTriggeredEvent&&t.requestId===this.privRequestId&&(this.privListeningTriggerMetric={End:t.eventTime,Name:"ListeningTrigger",Start:t.eventTime}),t instanceof Nt.AudioStreamNodeAttachingEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Nt.AudioStreamNodeAttachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicStartTime=t.eventTime),t instanceof Nt.AudioSourceErrorEvent&&t.audioSourceId===this.privAudioSourceId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Nt.AudioStreamNodeErrorEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Error:t.error,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Nt.AudioStreamNodeDetachedEvent&&t.audioSourceId===this.privAudioSourceId&&t.audioNodeId===this.privAudioNodeId&&(this.privMicMetric||(this.privMicMetric={End:t.eventTime,Name:"Microphone",Start:this.privMicStartTime})),t instanceof Ng.ConnectingToServiceEvent&&t.requestId===this.privRequestId&&(this.privConnectionId=t.sessionId),t instanceof Nt.ConnectionStartEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionStartTime=t.eventTime),t instanceof Nt.ConnectionEstablishedEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Nt.ConnectionEstablishErrorEvent&&t.connectionId===this.privConnectionId&&(this.privConnectionEstablishMetric||(this.privConnectionEstablishMetric={End:t.eventTime,Error:this.getConnectionError(t.statusCode),Id:this.privConnectionId,Name:"Connection",Start:this.privConnectionStartTime})),t instanceof Nt.ConnectionMessageReceivedEvent&&t.connectionId===this.privConnectionId&&t.message&&t.message.headers&&t.message.headers.path&&(this.privReceivedMessages[t.message.headers.path]||(this.privReceivedMessages[t.message.headers.path]=new Array),this.privReceivedMessages[t.message.headers.path].length<50&&this.privReceivedMessages[t.message.headers.path].push(t.networkReceivedTime)))}getTelemetry(){const t=new Array;this.privListeningTriggerMetric&&t.push(this.privListeningTriggerMetric),this.privMicMetric&&t.push(this.privMicMetric),this.privConnectionEstablishMetric&&t.push(this.privConnectionEstablishMetric),this.privPhraseLatencies.length>0&&t.push({PhraseLatencyMs:this.privPhraseLatencies}),this.privHypothesisLatencies.length>0&&t.push({FirstHypothesisLatencyMs:this.privHypothesisLatencies});const r={Metrics:t,ReceivedMessages:this.privReceivedMessages},n=JSON.stringify(r);return this.privReceivedMessages={},this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.privPhraseLatencies=[],this.privHypothesisLatencies=[],n}get hasTelemetry(){return Object.keys(this.privReceivedMessages).length!==0||this.privListeningTriggerMetric!==null||this.privMicMetric!==null||this.privConnectionEstablishMetric!==null||this.privPhraseLatencies.length!==0||this.privHypothesisLatencies.length!==0}dispose(){this.privIsDisposed=!0}getConnectionError(t){switch(t){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+t.toString()}}}Au.ServiceTelemetryListener=Z1;Object.defineProperty(_u,"__esModule",{value:!0});_u.RequestSession=void 0;const pn=b(),ga=Su,ek=Au;class tk{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsRecognizing=!1,this.privIsSpeechEnded=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privHypothesisReceived=!1,this.privBytesSent=0,this.privRecognitionBytesSent=0,this.privRecogNumber=0,this.privInTurn=!1,this.privConnectionAttempts=0,this.privAudioSourceId=t,this.privRequestId=(0,pn.createNoDashGuid)(),this.privAudioNodeId=(0,pn.createNoDashGuid)(),this.privTurnDeferral=new pn.Deferred,this.privTurnDeferral.resolve()}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get audioNodeId(){return this.privAudioNodeId}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSpeechEnded(){return this.privIsSpeechEnded}get isRecognizing(){return this.privIsRecognizing}get currentTurnAudioOffset(){return this.privTurnStartAudioOffset}get recogNumber(){return this.privRecogNumber}get numConnectionAttempts(){return this.privConnectionAttempts}get bytesSent(){return this.privBytesSent}get recognitionBytesSent(){return this.privRecognitionBytesSent}listenForServiceTelemetry(t){this.privServiceTelemetryListener&&this.privDetachables.push(t.attachListener(this.privServiceTelemetryListener))}startNewRecognition(){this.privRecognitionBytesSent=0,this.privIsSpeechEnded=!1,this.privIsRecognizing=!0,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.privRecogNumber++,this.privServiceTelemetryListener=new ek.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new ga.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}async onAudioSourceAttachCompleted(t,r){this.privAudioNode=t,this.privIsAudioNodeDetached=!1,r?await this.onComplete():this.onEvent(new ga.ListeningStartedEvent(this.privRequestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}onPreConnectionStart(t,r){this.privAuthFetchEventId=t,this.privSessionId=r,this.onEvent(new ga.ConnectingToServiceEvent(this.privRequestId,this.privAuthFetchEventId,this.privSessionId))}async onAuthCompleted(t){t&&await this.onComplete()}async onConnectionEstablishCompleted(t,r){if(t===200){this.onEvent(new ga.RecognitionStartedEvent(this.requestId,this.privAudioSourceId,this.privAudioNodeId,this.privAuthFetchEventId,this.privSessionId)),this.privAudioNode&&this.privAudioNode.replay(),this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privBytesSent=0;return}else t===403&&await this.onComplete()}async onServiceTurnEndResponse(t){this.privTurnDeferral.resolve(),!t||this.isSpeechEnded?(await this.onComplete(),this.privInTurn=!1):(this.privTurnStartAudioOffset=this.privLastRecoOffset,this.privAudioNode.replay())}onSpeechContext(){this.privRequestId=(0,pn.createNoDashGuid)()}onServiceTurnStartResponse(){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new pn.Deferred}onHypothesis(t){this.privHypothesisReceived||(this.privHypothesisReceived=!0,this.privServiceTelemetryListener.hypothesisReceived(this.privAudioNode.findTimeAtOffset(t)))}onPhraseRecognized(t){this.privServiceTelemetryListener.phraseReceived(this.privAudioNode.findTimeAtOffset(t)),this.onServiceRecognized(t)}onServiceRecognized(t){this.privLastRecoOffset=t,this.privHypothesisReceived=!1,this.privAudioNode.shrinkBuffers(t),this.privConnectionAttempts=0}onAudioSent(t){this.privBytesSent+=t,this.privRecognitionBytesSent+=t}onRetryConnection(){this.privConnectionAttempts++}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach();this.privServiceTelemetryListener&&this.privServiceTelemetryListener.dispose(),this.privIsRecognizing=!1}}getTelemetry(){return this.privServiceTelemetryListener.hasTelemetry?this.privServiceTelemetryListener.getTelemetry():null}async onStopRecognizing(){await this.onComplete()}onSpeechEnded(){this.privIsSpeechEnded=!0}onEvent(t){this.privServiceTelemetryListener&&this.privServiceTelemetryListener.onEvent(t),pn.Events.instance.onEvent(t)}async onComplete(){this.privIsRecognizing&&(this.privIsRecognizing=!1,await this.detachAudioNode())}async detachAudioNode(){this.privIsAudioNodeDetached||(this.privIsAudioNodeDetached=!0,this.privAudioNode&&await this.privAudioNode.detach())}}_u.RequestSession=tk;var ku={},lP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TentativePhraseResultsOption=e.OutputFormat=e.PhraseExtension=e.PhraseOption=void 0,function(t){t.WordTimings="WordTimings",t.SNR="SNR",t.Pronunciation="Pronunciation",t.WordPronunciation="WordPronunciation",t.WordConfidence="WordConfidence",t.Words="Words",t.Sentiment="Sentiment",t.PronunciationAssessment="PronunciationAssessment",t.ContentAssessment="ContentAssessment",t.PhraseAMScore="PhraseAMScore",t.PhraseLMScore="PhraseLMScore",t.WordAMScore="WordAMScore",t.WordLMScore="WordLMScore",t.RuleTree="RuleTree",t.NBestTimings="NBestTimings",t.DecoderDiagnostics="DecoderDiagnostics",t.DisplayWordTimings="DisplayWordTimings",t.DisplayWords="DisplayWords"}(e.PhraseOption||(e.PhraseOption={})),function(t){t.Graph="Graph",t.Corrections="Corrections",t.Sentiment="Sentiment"}(e.PhraseExtension||(e.PhraseExtension={})),function(t){t.Simple="Simple",t.Detailed="Detailed"}(e.OutputFormat||(e.OutputFormat={})),function(t){t.None="None",t.Always="Always"}(e.TentativePhraseResultsOption||(e.TentativePhraseResultsOption={}))})(lP);Object.defineProperty(ku,"__esModule",{value:!0});ku.SpeechContext=void 0;const rk=tt,Yt=lP;class nk{constructor(t){this.privContext={},this.privDynamicGrammar=t}getContext(){return this.privContext}setPronunciationAssessmentParams(t,r,n=!1){this.privContext.phraseDetection===void 0&&(this.privContext.phraseDetection={enrichment:{pronunciationAssessment:{}}}),this.privContext.phraseDetection.enrichment===void 0&&(this.privContext.phraseDetection.enrichment={pronunciationAssessment:{}}),this.privContext.phraseDetection.enrichment.pronunciationAssessment=JSON.parse(t)||{},n&&(this.privContext.phraseDetection.mode=rk.RecognitionMode.Conversation),this.setWordLevelTimings(),this.privContext.phraseOutput.detailed.options.push(Yt.PhraseOption.PronunciationAssessment),this.privContext.phraseOutput.detailed.options.indexOf(Yt.PhraseOption.SNR)===-1&&this.privContext.phraseOutput.detailed.options.push(Yt.PhraseOption.SNR),r&&(this.privContext.phraseDetection.enrichment.contentAssessment={topic:r},this.privContext.phraseOutput.detailed.options.push(Yt.PhraseOption.ContentAssessment))}setDetailedOutputFormat(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=Yt.OutputFormat.Detailed}setWordLevelTimings(){this.privContext.phraseOutput===void 0&&(this.privContext.phraseOutput={detailed:{options:[]}}),this.privContext.phraseOutput.detailed===void 0&&(this.privContext.phraseOutput.detailed={options:[]}),this.privContext.phraseOutput.format=Yt.OutputFormat.Detailed,this.privContext.phraseOutput.detailed.options.indexOf(Yt.PhraseOption.WordTimings)===-1&&this.privContext.phraseOutput.detailed.options.push(Yt.PhraseOption.WordTimings)}setSpeakerDiarizationAudioOffsetMs(t){this.privContext.phraseDetection.speakerDiarization.audioOffsetMs=t}toJSON(){const t=this.privDynamicGrammar.generateGrammarObject();return this.privContext.dgi=t,JSON.stringify(this.privContext)}}ku.SpeechContext=nk;var Mu={},pP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SubstringMatchType=e.GroupType=void 0,function(t){t.IntentText="IntentText",t.IntentEntity="IntentEntity",t.Generic="Generic",t.People="People",t.Place="Place",t.DynamicEntity="DynamicEntity"}(e.GroupType||(e.GroupType={})),function(t){t.None="None",t.LeftRooted="LeftRooted",t.PartialName="PartialName",t.MiddleOfSentence="MiddleOfSentence"}(e.SubstringMatchType||(e.SubstringMatchType={}))})(pP);Object.defineProperty(Mu,"__esModule",{value:!0});Mu.DynamicGrammarBuilder=void 0;const ik=pP;class ok{addPhrase(t){this.privPhrases||(this.privPhrases=[]),t instanceof Array?this.privPhrases=this.privPhrases.concat(t):this.privPhrases.push(t)}clearPhrases(){this.privPhrases=void 0}addReferenceGrammar(t){this.privGrammars||(this.privGrammars=[]),t instanceof Array?this.privGrammars=this.privGrammars.concat(t):this.privGrammars.push(t)}clearGrammars(){this.privGrammars=void 0}generateGrammarObject(){if(this.privGrammars===void 0&&this.privPhrases===void 0)return;const t={};if(t.referenceGrammars=this.privGrammars,this.privPhrases!==void 0&&this.privPhrases.length!==0){const r=[];this.privPhrases.forEach(n=>{r.push({text:n})}),t.groups=[{type:ik.GroupType.Generic,items:r}]}return t}}Mu.DynamicGrammarBuilder=ok;var No={},Ou={},Du={},rh={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataStreamType=e.ActivityPayloadResponse=void 0;class t{constructor(n){this.privActivityResponse=JSON.parse(n)}static fromJSON(n){return new t(n)}get conversationId(){return this.privActivityResponse.conversationId}get messageDataStreamType(){return this.privActivityResponse.messageDataStreamType}get messagePayload(){return this.privActivityResponse.messagePayload}get version(){return this.privActivityResponse.version}}e.ActivityPayloadResponse=t,function(r){r[r.None=0]="None",r[r.TextToSpeechAudio=1]="TextToSpeechAudio"}(e.MessageDataStreamType||(e.MessageDataStreamType={}))})(rh);Object.defineProperty(Du,"__esModule",{value:!0});Du.DialogServiceTurnState=void 0;const sk=Tr,ak=Ce,ck=rh;class uk{constructor(t,r){this.privRequestId=r,this.privIsCompleted=!1,this.privAudioStream=null,this.privTurnManager=t,this.resetTurnEndTimeout()}get audioStream(){return this.resetTurnEndTimeout(),this.privAudioStream}processActivityPayload(t,r){return t.messageDataStreamType===ck.MessageDataStreamType.TextToSpeechAudio&&(this.privAudioStream=ak.AudioOutputStream.createPullStream(),this.privAudioStream.format=r!==void 0?r:sk.AudioOutputFormatImpl.getDefaultOutputFormat()),this.privAudioStream}endAudioStream(){this.privAudioStream!==null&&!this.privAudioStream.isClosed&&this.privAudioStream.close()}complete(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.endAudioStream()}resetTurnEndTimeout(){this.privTimeoutToken!==void 0&&clearTimeout(this.privTimeoutToken),this.privTimeoutToken=setTimeout(()=>{this.privTurnManager.CompleteTurn(this.privRequestId)},2e3)}}Du.DialogServiceTurnState=uk;Object.defineProperty(Ou,"__esModule",{value:!0});Ou.DialogServiceTurnStateManager=void 0;const zg=Re,lk=Du;class pk{constructor(){this.privTurnMap=new Map}StartTurn(t){if(this.privTurnMap.has(t))throw new zg.InvalidOperationError("Service error: There is already a turn with id:"+t);const r=new lk.DialogServiceTurnState(this,t);return this.privTurnMap.set(t,r),this.privTurnMap.get(t)}GetTurn(t){return this.privTurnMap.get(t)}CompleteTurn(t){if(!this.privTurnMap.has(t))throw new zg.InvalidOperationError("Service error: Received turn end for an unknown turn id:"+t);const r=this.privTurnMap.get(t);return r.complete(),this.privTurnMap.delete(t),r}}Ou.DialogServiceTurnStateManager=pk;var dP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InvocationSource=void 0,function(t){t.None="None",t.VoiceActivationWithKeyword="VoiceActivationWithKeyword"}(e.InvocationSource||(e.InvocationSource={}))})(dP);var hP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.OnRejectAction=e.KeywordDetectionType=void 0,function(t){t.StartTrigger="StartTrigger"}(e.KeywordDetectionType||(e.KeywordDetectionType={})),function(t){t.EndOfTurn="EndOfTurn",t.Continue="Continue"}(e.OnRejectAction||(e.OnRejectAction={}))})(hP);var Lg;function dk(){if(Lg)return No;Lg=1,Object.defineProperty(No,"__esModule",{value:!0}),No.DialogServiceAdapter=void 0;const e=ge(),t=en,r=b(),n=Tr,i=T(),s=Ou,a=O(),o=rh,c=dP,u=hP,l=Gt;let p=class extends a.ServiceRecognizerBase{constructor(h,m,y,S,v){super(h,m,y,S,v),this.privEvents=new r.EventSource,this.privDialogServiceConnector=v,this.receiveMessageOverride=()=>this.receiveDialogMessageOverride(),this.privTurnStateManager=new s.DialogServiceTurnStateManager,this.recognizeOverride=(f,g,C)=>this.listenOnce(f,g,C),this.postConnectImplOverride=f=>this.dialogConnectImpl(f),this.configConnectionOverride=f=>this.configConnection(f),this.disconnectOverride=()=>this.privDisconnect(),this.privDialogAudioSource=y,this.agentConfigSent=!1,this.privLastResult=null,this.connectionEvents.attach(f=>{f.name==="ConnectionClosedEvent"&&(this.terminateMessageLoop=!0)})}async sendMessage(h){const m=(0,r.createGuid)(),y=(0,r.createNoDashGuid)(),S={context:{interactionId:m},messagePayload:JSON.parse(h),version:.5},v=JSON.stringify(S);await(await this.fetchConnection()).send(new l.SpeechConnectionMessage(r.MessageType.Text,"agent",y,"application/json",v))}async privDisconnect(){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,this.agentConfigSent=!1}processTypeSpecificMessages(h){const m=new i.PropertyCollection;h.messageType===r.MessageType.Text&&m.setProperty(i.PropertyId.SpeechServiceResponse_JsonResult,h.textBody);let y,S;switch(h.path.toLowerCase()){case"speech.phrase":const f=a.SimpleSpeechPhrase.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);if(this.privRequestSession.onPhraseRecognized(f.Offset+f.Duration),f.RecognitionStatus!==a.RecognitionStatus.TooManyRequests&&f.RecognitionStatus!==a.RecognitionStatus.Error){const I=this.fireEventForResult(f,m);if(this.privLastResult=I.result,this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,I)}catch{}}S=!0;break;case"speech.hypothesis":const g=a.SpeechHypothesis.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);y=new i.SpeechRecognitionResult(this.privRequestSession.requestId,i.ResultReason.RecognizingSpeech,g.Text,g.Duration,g.Offset,g.Language,g.LanguageDetectionConfidence,void 0,void 0,g.asJson(),m),this.privRequestSession.onHypothesis(g.Offset);const C=new i.SpeechRecognitionEventArgs(y,g.Offset,this.privRequestSession.sessionId);if(this.privDialogServiceConnector.recognizing)try{this.privDialogServiceConnector.recognizing(this.privDialogServiceConnector,C)}catch{}S=!0;break;case"speech.keyword":const P=a.SpeechKeyword.fromJSON(h.textBody,this.privRequestSession.currentTurnAudioOffset);y=new i.SpeechRecognitionResult(this.privRequestSession.requestId,P.Status==="Accepted"?i.ResultReason.RecognizedKeyword:i.ResultReason.NoMatch,P.Text,P.Duration,P.Offset,void 0,void 0,void 0,void 0,P.asJson(),m),P.Status!=="Accepted"&&(this.privLastResult=y);const E=new i.SpeechRecognitionEventArgs(y,y.duration,y.resultId);if(this.privDialogServiceConnector.recognized)try{this.privDialogServiceConnector.recognized(this.privDialogServiceConnector,E)}catch{}S=!0;break;case"audio":{const I=h.requestId.toUpperCase(),R=this.privTurnStateManager.GetTurn(I);try{h.binaryBody?R.audioStream.write(h.binaryBody):R.endAudioStream()}catch{}}S=!0;break;case"response":this.handleResponseMessage(h),S=!0;break}const v=new r.Deferred;return v.resolve(S),v.promise}async cancelRecognition(h,m,y,S,v){if(this.terminateMessageLoop=!0,this.privRequestSession.isRecognizing&&await this.privRequestSession.onStopRecognizing(),this.privDialogServiceConnector.canceled){const f=new i.PropertyCollection;f.setProperty(a.CancellationErrorCodePropertyName,i.CancellationErrorCode[S]);const g=new i.SpeechRecognitionCanceledEventArgs(y,v,S,void 0,h);try{this.privDialogServiceConnector.canceled(this.privDialogServiceConnector,g)}catch{}if(this.privSuccessCallback){const C=new i.SpeechRecognitionResult(void 0,i.ResultReason.Canceled,void 0,void 0,void 0,void 0,void 0,void 0,v,void 0,f);try{this.privSuccessCallback(C),this.privSuccessCallback=void 0}catch{}}}}async listenOnce(h,m,y){this.privRecognizerConfig.recognitionMode=h,this.privSuccessCallback=m,this.privErrorCallback=y,this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privDialogAudioSource.events),this.privRecognizerConfig.parameters.setProperty(i.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const S=this.connectImpl(),v=this.sendPreAudioMessages(),f=await this.privDialogAudioSource.attach(this.privRequestSession.audioNodeId),g=await this.privDialogAudioSource.format,C=await this.privDialogAudioSource.deviceInfo,P=new e.ReplayableAudioNode(f,g.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(P,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:C};try{await S,await v}catch(R){return await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.ConnectionFailure,R),Promise.resolve()}const E=new i.SessionEventArgs(this.privRequestSession.sessionId);this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,E),this.sendAudio(P).then(()=>{},async R=>{await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,R)})}dialogConnectImpl(h){return this.privConnectionLoop=this.startMessageLoop(),h}receiveDialogMessageOverride(){const h=new r.Deferred,m=async()=>{try{const y=this.isDisposed(),S=!this.isDisposed()&&this.terminateMessageLoop;if(y||S){h.resolve(void 0);return}const f=await(await this.fetchConnection()).read();if(!f)return m();const g=l.SpeechConnectionMessage.fromConnectionMessage(f);switch(g.path.toLowerCase()){case"turn.start":{const A=g.requestId.toUpperCase(),K=this.privRequestSession.requestId.toUpperCase();A!==K?this.privTurnStateManager.StartTurn(A):this.privRequestSession.onServiceTurnStartResponse()}break;case"speech.startdetected":const P=a.SpeechDetected.fromJSON(g.textBody,this.privRequestSession.currentTurnAudioOffset),E=new i.RecognitionEventArgs(P.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechStartDetected&&this.privRecognizer.speechStartDetected(this.privRecognizer,E);break;case"speech.enddetected":let I;g.textBody.length>0?I=g.textBody:I="{ Offset: 0 }";const R=a.SpeechDetected.fromJSON(I,this.privRequestSession.currentTurnAudioOffset);this.privRequestSession.onServiceRecognized(R.Offset);const D=new i.RecognitionEventArgs(R.Offset,this.privRequestSession.sessionId);this.privRecognizer.speechEndDetected&&this.privRecognizer.speechEndDetected(this.privRecognizer,D);break;case"turn.end":{const A=g.requestId.toUpperCase(),K=this.privRequestSession.requestId.toUpperCase();if(A!==K)this.privTurnStateManager.CompleteTurn(A);else{const rt=new i.SessionEventArgs(this.privRequestSession.sessionId);if(await this.privRequestSession.onServiceTurnEndResponse(!1),(!this.privRecognizerConfig.isContinuousRecognition||this.privRequestSession.isSpeechEnded||!this.privRequestSession.isRecognizing)&&this.privRecognizer.sessionStopped&&this.privRecognizer.sessionStopped(this.privRecognizer,rt),this.privSuccessCallback&&this.privLastResult){try{this.privSuccessCallback(this.privLastResult),this.privLastResult=null}catch(ae){this.privErrorCallback&&this.privErrorCallback(ae)}this.privSuccessCallback=void 0,this.privErrorCallback=void 0}}}break;default:try{await this.processTypeSpecificMessages(g)||this.serviceEvents&&this.serviceEvents.onEvent(new r.ServiceEvent(g.path.toLowerCase(),g.textBody))}catch{}}return m()}catch{this.terminateMessageLoop=!0,h.resolve()}};return m().catch(y=>{r.Events.instance.onEvent(new r.BackgroundEvent(y))}),h.promise}async startMessageLoop(){this.terminateMessageLoop=!1;try{await this.receiveDialogMessageOverride()}catch(h){await this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,i.CancellationReason.Error,i.CancellationErrorCode.RuntimeError,h)}return Promise.resolve()}async configConnection(h){return this.terminateMessageLoop?(this.terminateMessageLoop=!1,Promise.reject("Connection to service terminated.")):(await this.sendSpeechServiceConfig(h,this.privRequestSession,this.privRecognizerConfig.SpeechServiceConfig.serialize()),await this.sendAgentConfig(h),h)}async sendPreAudioMessages(){const h=await this.fetchConnection();this.addKeywordContextData(),await this.sendSpeechContext(h,!0),await this.sendAgentContext(h),await this.sendWaveHeader(h)}sendAgentConfig(h){if(this.agentConfig&&!this.agentConfigSent){if(this.privRecognizerConfig.parameters.getProperty(i.PropertyId.Conversation_DialogType)===i.DialogServiceConfig.DialogTypes.CustomCommands){const y=this.agentConfig.get();y.botInfo.commandsCulture=this.privRecognizerConfig.parameters.getProperty(i.PropertyId.SpeechServiceConnection_RecoLanguage,"en-us"),this.agentConfig.set(y)}this.onEvent(new t.SendingAgentContextMessageEvent(this.agentConfig));const m=this.agentConfig.toJsonString();return this.agentConfigSent=!0,h.send(new l.SpeechConnectionMessage(r.MessageType.Text,"agent.config",this.privRequestSession.requestId,"application/json",m))}}sendAgentContext(h){const m=(0,r.createGuid)(),y=this.privDialogServiceConnector.properties.getProperty(i.PropertyId.Conversation_Speech_Activity_Template),v=JSON.stringify({channelData:"",context:{interactionId:m},messagePayload:typeof y===void 0?void 0:y,version:.5});return h.send(new l.SpeechConnectionMessage(r.MessageType.Text,"speech.agent.context",this.privRequestSession.requestId,"application/json",v))}fireEventForResult(h,m){const y=a.EnumTranslation.implTranslateRecognitionResult(h.RecognitionStatus),S=new i.SpeechRecognitionResult(this.privRequestSession.requestId,y,h.DisplayText,h.Duration,h.Offset,h.Language,h.LanguageDetectionConfidence,void 0,void 0,h.asJson(),m);return new i.SpeechRecognitionEventArgs(S,h.Offset,this.privRequestSession.sessionId)}handleResponseMessage(h){const m=JSON.parse(h.textBody);switch(m.messageType.toLowerCase()){case"message":const y=h.requestId.toUpperCase(),S=o.ActivityPayloadResponse.fromJSON(h.textBody),v=this.privTurnStateManager.GetTurn(y);if(S.conversationId){const C=this.agentConfig.get();C.botInfo.conversationId=S.conversationId,this.agentConfig.set(C)}const f=v.processActivityPayload(S,n.AudioOutputFormatImpl.fromSpeechSynthesisOutputFormatString(this.privDialogServiceConnector.properties.getProperty(i.PropertyId.SpeechServiceConnection_SynthOutputFormat,void 0))),g=new i.ActivityReceivedEventArgs(S.messagePayload,f);if(this.privDialogServiceConnector.activityReceived)try{this.privDialogServiceConnector.activityReceived(this.privDialogServiceConnector,g)}catch{}break;case"messagestatus":if(this.privDialogServiceConnector.turnStatusReceived)try{this.privDialogServiceConnector.turnStatusReceived(this.privDialogServiceConnector,new i.TurnStatusReceivedEventArgs(h.textBody))}catch{}break;default:r.Events.instance.onEvent(new r.BackgroundEvent(`Unexpected response of type ${m.messageType}. Ignoring.`));break}}onEvent(h){this.privEvents.onEvent(h),r.Events.instance.onEvent(h)}addKeywordContextData(){const h=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect");if(h===void 0)return;const m=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Offsets"),y=this.privRecognizerConfig.parameters.getProperty("SPEECH-KeywordsToDetect-Durations"),S=h.split(";"),v=m===void 0?[]:m.split(";"),f=y===void 0?[]:y.split(";"),g=[];for(let C=0;C<S.length;C++){const P={text:S[C]};C<v.length&&(P.startOffset=Number(v[C])),C<f.length&&(P.duration=Number(f[C])),g.push(P)}this.speechContext.getContext().invocationSource=c.InvocationSource.VoiceActivationWithKeyword,this.speechContext.getContext().keywordDetection=[{clientDetectedKeywords:g,onReject:{action:u.OnRejectAction.EndOfTurn},type:u.KeywordDetectionType.StartTrigger}]}};return No.DialogServiceAdapter=p,No}var bu={};Object.defineProperty(bu,"__esModule",{value:!0});bu.AgentConfig=void 0;class hk{toJsonString(){return JSON.stringify(this.iPrivConfig)}get(){return this.iPrivConfig}set(t){this.iPrivConfig=t}}bu.AgentConfig=hk;var bl={},zo={},Gn={};Object.defineProperty(Gn,"__esModule",{value:!0});Gn.ConversationConnectionConfig=void 0;const vk=Js;class be extends vk.RestConfigBase{static get host(){return be.privHost}static get apiVersion(){return be.privApiVersion}static get clientAppId(){return be.privClientAppId}static get defaultLanguageCode(){return be.privDefaultLanguageCode}static get restPath(){return be.privRestPath}static get webSocketPath(){return be.privWebSocketPath}static get transcriptionEventKeys(){return be.privTranscriptionEventKeys}}Gn.ConversationConnectionConfig=be;be.privHost="dev.microsofttranslator.com";be.privRestPath="/capito/room";be.privApiVersion="2.0";be.privDefaultLanguageCode="en-US";be.privClientAppId="FC539C22-1767-4F1F-84BC-B4D811114F15";be.privWebSocketPath="/capito/translate";be.privTranscriptionEventKeys=["iCalUid","callId","organizer","FLAC","MTUri","DifferentiateGuestSpeakers","audiorecording","Threadid","OrganizerMri","OrganizerTenantId","UserToken"];var jg;function fk(){if(jg)return zo;jg=1,Object.defineProperty(zo,"__esModule",{value:!0}),zo.ConversationManager=void 0;const e=ge(),t=z,r=T(),n=Gn;let i=class{constructor(){this.privRequestParams=n.ConversationConnectionConfig.configParams,this.privErrors=n.ConversationConnectionConfig.restErrors,this.privHost=n.ConversationConnectionConfig.host,this.privApiVersion=n.ConversationConnectionConfig.apiVersion,this.privRestPath=n.ConversationConnectionConfig.restPath,this.privRestAdapter=new e.RestMessageAdapter({})}createOrJoin(a,o,c,u){try{t.Contracts.throwIfNullOrUndefined(a,"args");const l=a.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage,n.ConversationConnectionConfig.defaultLanguageCode),p=a.getProperty(r.PropertyId.ConversationTranslator_Name,"conversation_host"),d=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),h=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),m=a.getProperty(r.PropertyId.SpeechServiceConnection_Key),y=a.getProperty(r.PropertyId.SpeechServiceConnection_Region),S=a.getProperty(r.PropertyId.SpeechServiceAuthorization_Token);t.Contracts.throwIfNullOrWhitespace(l,"languageCode"),t.Contracts.throwIfNullOrWhitespace(p,"nickname"),t.Contracts.throwIfNullOrWhitespace(d,"endpointHost");const v={};v[this.privRequestParams.apiVersion]=this.privApiVersion,v[this.privRequestParams.languageCode]=l,v[this.privRequestParams.nickname]=p;const f={};h&&(f[this.privRequestParams.correlationId]=h),f[this.privRequestParams.clientAppId]=n.ConversationConnectionConfig.clientAppId,o!==void 0?v[this.privRequestParams.roomId]=o:(t.Contracts.throwIfNullOrUndefined(y,this.privErrors.authInvalidSubscriptionRegion),f[this.privRequestParams.subscriptionRegion]=y,m?f[this.privRequestParams.subscriptionKey]=m:S?f[this.privRequestParams.authorization]=`Bearer ${S}`:t.Contracts.throwIfNullOrUndefined(m,this.privErrors.authInvalidSubscriptionKey));const g={};g.headers=f,this.privRestAdapter.options=g;const C=`https://${d}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Post,C,v,null).then(P=>{const E=e.RestMessageAdapter.extractHeaderValue(this.privRequestParams.requestId,P.headers);if(!P.ok){if(u){let R=this.privErrors.invalidCreateJoinConversationResponse.replace("{status}",P.status.toString()),D;try{D=JSON.parse(P.data),R+=` [${D.error.code}: ${D.error.message}]`}catch{R+=` [${P.data}]`}E&&(R+=` ${E}`),u(R)}return}const I=JSON.parse(P.data);if(I&&(I.requestId=E),c){try{c(I)}catch(R){u&&u(R)}c=void 0}}).catch(()=>{})}catch(l){if(u)if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}}leave(a,o){return new Promise((c,u)=>{try{t.Contracts.throwIfNullOrUndefined(a,this.privErrors.invalidArgs.replace("{arg}","config")),t.Contracts.throwIfNullOrWhitespace(o,this.privErrors.invalidArgs.replace("{arg}","token"));const l=a.getProperty(r.PropertyId.ConversationTranslator_Host,this.privHost),p=a.getProperty(r.PropertyId.ConversationTranslator_CorrelationId),d={};d[this.privRequestParams.apiVersion]=this.privApiVersion,d[this.privRequestParams.sessionToken]=o;const h={};p&&(h[this.privRequestParams.correlationId]=p);const m={};m.headers=h,this.privRestAdapter.options=m;const y=`https://${l}${this.privRestPath}`;this.privRestAdapter.request(e.RestRequestType.Delete,y,d,null).then(S=>{S.ok,c()}).catch(()=>{})}catch(l){if(l instanceof Error){const p=l;u(p.name+": "+p.message)}else u(l)}})}};return zo.ConversationManager=i,zo}var Fr={},Lo={},Nu={},Gs={};Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ConversationConnectionMessage=void 0;const gk=b();class mk extends gk.ConnectionMessage{constructor(t,r,n,i){super(t,r,n,i);const s=JSON.parse(this.textBody);s.type!==void 0&&(this.privConversationMessageType=s.type)}get conversationMessageType(){return this.privConversationMessageType}}Gs.ConversationConnectionMessage=mk;Object.defineProperty(Nu,"__esModule",{value:!0});Nu.ConversationWebsocketMessageFormatter=void 0;const qr=b(),xg=Gs;class yk{toConnectionMessage(t){const r=new qr.Deferred;try{if(t.messageType===qr.MessageType.Text){const n=new xg.ConversationConnectionMessage(t.messageType,t.textContent,{},t.id);r.resolve(n)}else t.messageType===qr.MessageType.Binary&&r.resolve(new xg.ConversationConnectionMessage(t.messageType,t.binaryContent,void 0,t.id))}catch(n){r.reject(`Error formatting the message. Error: ${n}`)}return r.promise}fromConnectionMessage(t){const r=new qr.Deferred;try{if(t.messageType===qr.MessageType.Text){const n=`${t.textBody?t.textBody:""}`;r.resolve(new qr.RawWebsocketMessage(qr.MessageType.Text,n,t.id))}}catch(n){r.reject(`Error formatting the message. ${n}`)}return r.promise}}Nu.ConversationWebsocketMessageFormatter=yk;var Bg;function Sk(){if(Bg)return Lo;Bg=1,Object.defineProperty(Lo,"__esModule",{value:!0}),Lo.ConversationConnectionFactory=void 0;const e=ge(),t=b(),r=z,n=T(),i=Ct(),s=Gn,a=Nu;let o=class extends i.ConnectionFactoryBase{create(u,l,p){const d=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Host,s.ConversationConnectionConfig.host),h=u.parameters.getProperty(n.PropertyId.ConversationTranslator_CorrelationId,(0,t.createGuid)()),m=`wss://${d}${s.ConversationConnectionConfig.webSocketPath}`,y=u.parameters.getProperty(n.PropertyId.ConversationTranslator_Token,void 0);r.Contracts.throwIfNullOrUndefined(y,"token");const S={};S[s.ConversationConnectionConfig.configParams.apiVersion]=s.ConversationConnectionConfig.apiVersion,S[s.ConversationConnectionConfig.configParams.token]=y,S[s.ConversationConnectionConfig.configParams.correlationId]=h;const v=u.parameters.getProperty("SPEECH-EnableWebsocketCompression","false")==="true";return Promise.resolve(new e.WebsocketConnection(m,S,{},new a.ConversationWebsocketMessageFormatter,e.ProxyInfo.fromRecognizerConfig(u),v,p))}};return Lo.ConversationConnectionFactory=o,Lo}var jo={},zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.ConversationRequestSession=void 0;const Nl=b();class Ck{constructor(t){this.privIsDisposed=!1,this.privDetachables=new Array,this.privSessionId=t,this.privRequestId=(0,Nl.createNoDashGuid)(),this.privRequestCompletionDeferral=new Nl.Deferred}get sessionId(){return this.privSessionId}get requestId(){return this.privRequestId}get completionPromise(){return this.privRequestCompletionDeferral.promise}onPreConnectionStart(t,r){this.privSessionId=r}onAuthCompleted(t){t&&this.onComplete()}onConnectionEstablishCompleted(t){t!==200&&t===403&&this.onComplete()}onServiceTurnEndResponse(t){t?this.privRequestId=(0,Nl.createNoDashGuid)():this.onComplete()}async dispose(){if(!this.privIsDisposed){this.privIsDisposed=!0;for(const t of this.privDetachables)await t.detach()}}onComplete(){}}zu.ConversationRequestSession=Ck;var Le={},Fg;function vP(){if(Fg)return Le;Fg=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.ConversationReceivedTranslationEventArgs=Le.ParticipantsListEventArgs=Le.ParticipantAttributeEventArgs=Le.ParticipantEventArgs=Le.LockRoomEventArgs=Le.MuteAllEventArgs=void 0;const e=T();class t extends e.SessionEventArgs{constructor(c,u){super(u),this.privIsMuted=c}get isMuted(){return this.privIsMuted}}Le.MuteAllEventArgs=t;class r extends e.SessionEventArgs{constructor(c,u){super(u),this.privIsLocked=c}get isMuted(){return this.privIsLocked}}Le.LockRoomEventArgs=r;class n extends e.SessionEventArgs{constructor(c,u){super(u),this.privParticipant=c}get participant(){return this.privParticipant}}Le.ParticipantEventArgs=n;class i extends e.SessionEventArgs{constructor(c,u,l,p){super(p),this.privKey=u,this.privValue=l,this.privParticipantId=c}get value(){return this.privValue}get key(){return this.privKey}get id(){return this.privParticipantId}}Le.ParticipantAttributeEventArgs=i;class s extends e.SessionEventArgs{constructor(c,u,l,p,d,h,m,y,S){super(S),this.privRoomId=c,this.privSessionToken=u,this.privTranslateTo=l,this.privProfanityFilter=p,this.privRoomProfanityFilter=d,this.privIsRoomLocked=h,this.privIsRoomLocked=m,this.privParticipants=y}get sessionToken(){return this.privSessionToken}get conversationId(){return this.privRoomId}get translateTo(){return this.privTranslateTo}get profanityFilter(){return this.privProfanityFilter}get roomProfanityFilter(){return this.privRoomProfanityFilter}get isRoomLocked(){return this.privIsRoomLocked}get isMuteAll(){return this.privIsMuteAll}get participants(){return this.privParticipants}}Le.ParticipantsListEventArgs=s;class a{constructor(c,u,l){this.privPayload=u,this.privCommand=c,this.privSessionId=l}get payload(){return this.privPayload}get command(){return this.privCommand}get sessionId(){return this.privSessionId}}return Le.ConversationReceivedTranslationEventArgs=a,Le}var qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.ConversationTranslatorCommandTypes=qt.ConversationTranslatorMessageTypes=qt.InternalParticipants=void 0;class Pk{constructor(t=[],r){this.participants=t,this.meId=r}addOrUpdateParticipant(t){if(t===void 0)return;const r=this.getParticipantIndex(t.id);return r>-1?this.participants.splice(r,1,t):this.participants.push(t),this.getParticipant(t.id)}getParticipantIndex(t){return this.participants.findIndex(r=>r.id===t)}getParticipant(t){return this.participants.find(r=>r.id===t)}deleteParticipant(t){this.participants=this.participants.filter(r=>r.id!==t)}get host(){return this.participants.find(t=>t.isHost===!0)}get me(){return this.getParticipant(this.meId)}}qt.InternalParticipants=Pk;qt.ConversationTranslatorMessageTypes={command:"command",final:"final",info:"info",instantMessage:"instant_message",keepAlive:"keep_alive",partial:"partial",participantCommand:"participant_command",translatedMessage:"translated_message"};qt.ConversationTranslatorCommandTypes={changeNickname:"ChangeNickname",disconnectSession:"DisconnectSession",ejectParticipant:"EjectParticipant",instant_message:"instant_message",joinSession:"JoinSession",leaveSession:"LeaveSession",participantList:"ParticipantList",roomExpirationWarning:"RoomExpirationWarning",setLockState:"SetLockState",setMute:"SetMute",setMuteAll:"SetMuteAll",setProfanityFiltering:"SetProfanityFiltering",setTranslateToLanguages:"SetTranslateToLanguages",setUseTTS:"SetUseTTS"};var fP={},Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.CommandResponsePayload=void 0;const Rk=e=>JSON.parse(e);class nh{constructor(t){this.privCommandResponse=Rk(t)}get type(){return this.privCommandResponse.type}get command(){return this.privCommandResponse.command}get id(){return this.privCommandResponse.id}get nickname(){return this.privCommandResponse.nickname}get participantId(){return this.privCommandResponse.participantId}get roomid(){return this.privCommandResponse.roomid}get value(){return this.privCommandResponse.value}get token(){return this.privCommandResponse.token}static fromJSON(t){return new nh(t)}}Lu.CommandResponsePayload=nh;var Bn={};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.ParticipantPayloadResponse=Bn.ParticipantsListPayloadResponse=void 0;const Ek=e=>JSON.parse(e),wk=e=>JSON.parse(e);class ih{constructor(t){this.privParticipantsPayloadResponse=Ek(t)}get roomid(){return this.privParticipantsPayloadResponse.roomid}get id(){return this.privParticipantsPayloadResponse.id}get command(){return this.privParticipantsPayloadResponse.command}get participants(){return this.privParticipantsPayloadResponse.participants}get token(){return this.privParticipantsPayloadResponse.token}get translateTo(){return this.privParticipantsPayloadResponse.translateTo}get profanityFilter(){return this.privParticipantsPayloadResponse.profanityFilter}get roomProfanityFilter(){return this.privParticipantsPayloadResponse.roomProfanityFilter}get roomLocked(){return this.privParticipantsPayloadResponse.roomLocked}get muteAll(){return this.privParticipantsPayloadResponse.muteAll}get type(){return this.privParticipantsPayloadResponse.type}static fromJSON(t){return new ih(t)}}Bn.ParticipantsListPayloadResponse=ih;class oh{constructor(t){this.privParticipantPayloadResponse=wk(t)}get nickname(){return this.privParticipantPayloadResponse.nickname}get locale(){return this.privParticipantPayloadResponse.locale}get usetts(){return this.privParticipantPayloadResponse.usetts}get ismuted(){return this.privParticipantPayloadResponse.ismuted}get ishost(){return this.privParticipantPayloadResponse.ishost}get participantId(){return this.privParticipantPayloadResponse.participantId}get avatar(){return this.privParticipantPayloadResponse.avatar}static fromJSON(t){return new oh(t)}}Bn.ParticipantPayloadResponse=oh;var Fn={};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.TextResponsePayload=Fn.SpeechResponsePayload=void 0;const Ik=e=>JSON.parse(e),Tk=e=>JSON.parse(e);class sh{constructor(t){this.privSpeechResponse=Ik(t)}get recognition(){return this.privSpeechResponse.recognition}get translations(){return this.privSpeechResponse.translations}get id(){return this.privSpeechResponse.id}get language(){return this.privSpeechResponse.language}get nickname(){return this.privSpeechResponse.nickname}get participantId(){return this.privSpeechResponse.participantId}get roomid(){return this.privSpeechResponse.roomid}get timestamp(){return this.privSpeechResponse.timestamp}get type(){return this.privSpeechResponse.type}get isFinal(){return this.privSpeechResponse.type==="final"}static fromJSON(t){return new sh(t)}}Fn.SpeechResponsePayload=sh;class ah{constructor(t){this.privTextResponse=Tk(t)}get originalText(){return this.privTextResponse.originalText}get translations(){return this.privTextResponse.translations}get id(){return this.privTextResponse.id}get language(){return this.privTextResponse.language}get nickname(){return this.privTextResponse.nickname}get participantId(){return this.privTextResponse.participantId}get roomid(){return this.privTextResponse.roomid}get timestamp(){return this.privTextResponse.timestamp}get type(){return this.privTextResponse.type}static fromJSON(t){return new ah(t)}}Fn.TextResponsePayload=ah;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextResponsePayload=e.SpeechResponsePayload=e.ParticipantPayloadResponse=e.ParticipantsListPayloadResponse=e.CommandResponsePayload=void 0;var t=Lu;Object.defineProperty(e,"CommandResponsePayload",{enumerable:!0,get:function(){return t.CommandResponsePayload}});var r=Bn;Object.defineProperty(e,"ParticipantsListPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantsListPayloadResponse}}),Object.defineProperty(e,"ParticipantPayloadResponse",{enumerable:!0,get:function(){return r.ParticipantPayloadResponse}});var n=Fn;Object.defineProperty(e,"SpeechResponsePayload",{enumerable:!0,get:function(){return n.SpeechResponsePayload}}),Object.defineProperty(e,"TextResponsePayload",{enumerable:!0,get:function(){return n.TextResponsePayload}})})(fP);var qg;function _k(){if(qg)return jo;qg=1,Object.defineProperty(jo,"__esModule",{value:!0}),jo.ConversationServiceAdapter=void 0;const e=b(),t=T(),r=O(),n=Gs,i=zu,s=vP(),a=qt,o=fP;let c=class extends r.ServiceRecognizerBase{constructor(l,p,d,h,m){super(l,p,d,h,m),this.privConnectionConfigPromise=void 0,this.privLastPartialUtteranceId="",this.privConversationServiceConnector=m,this.privConversationAuthentication=l,this.receiveMessageOverride=()=>this.receiveConversationMessageOverride(),this.recognizeOverride=()=>this.noOp(),this.postConnectImplOverride=y=>this.conversationConnectImpl(y),this.configConnectionOverride=()=>this.configConnection(),this.disconnectOverride=()=>this.privDisconnect(),this.privConversationRequestSession=new i.ConversationRequestSession((0,e.createNoDashGuid)()),this.privConversationConnectionFactory=p,this.privConversationIsDisposed=!1}isDisposed(){return super.isDisposed()||this.privConversationIsDisposed}async dispose(l){this.privConversationIsDisposed=!0,this.privConnectionConfigPromise!==void 0&&await(await this.privConnectionConfigPromise).dispose(l),await super.dispose(l)}async sendMessage(l){return(await this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,l))}async sendMessageAsync(l){await(await this.fetchConnection()).send(new n.ConversationConnectionMessage(e.MessageType.Text,l))}privDisconnect(){if(!this.terminateMessageLoop)return this.cancelRecognition(this.privConversationRequestSession.sessionId,this.privConversationRequestSession.requestId,t.CancellationReason.Error,t.CancellationErrorCode.NoError,"Disconnecting"),this.terminateMessageLoop=!0,Promise.resolve()}async processTypeSpecificMessages(){return!0}cancelRecognition(l,p,d,h,m){this.terminateMessageLoop=!0;const y=new t.ConversationTranslationCanceledEventArgs(d,m,h,void 0,l);try{this.privConversationServiceConnector.canceled&&this.privConversationServiceConnector.canceled(this.privConversationServiceConnector,y)}catch{}}async conversationConnectImpl(l){return this.privConnectionLoop=this.startMessageLoop(),l}async receiveConversationMessageOverride(){if(this.isDisposed()||this.terminateMessageLoop)return Promise.resolve();const l=new e.Deferred;try{const d=await(await this.fetchConnection()).read();if(this.isDisposed()||this.terminateMessageLoop)return l.resolve(),Promise.resolve();if(!d)return this.receiveConversationMessageOverride();const h=this.privConversationRequestSession.sessionId,m=d.conversationMessageType.toLowerCase();let y=!1;try{switch(m){case"info":case"participant_command":case"command":const S=o.CommandResponsePayload.fromJSON(d.textBody);switch(S.command.toLowerCase()){case"participantlist":const E=o.ParticipantsListPayloadResponse.fromJSON(d.textBody),I=E.participants.map(ae=>({avatar:ae.avatar,displayName:ae.nickname,id:ae.participantId,isHost:ae.ishost,isMuted:ae.ismuted,isUsingTts:ae.usetts,preferredLanguage:ae.locale}));this.privConversationServiceConnector.participantsListReceived&&this.privConversationServiceConnector.participantsListReceived(this.privConversationServiceConnector,new s.ParticipantsListEventArgs(E.roomid,E.token,E.translateTo,E.profanityFilter,E.roomProfanityFilter,E.roomLocked,E.muteAll,I,h));break;case"settranslatetolanguages":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setTranslateToLanguages,S.value,h));break;case"setprofanityfiltering":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setProfanityFiltering,S.value,h));break;case"setmute":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setMute,S.value,h));break;case"setmuteall":this.privConversationServiceConnector.muteAllCommandReceived&&this.privConversationServiceConnector.muteAllCommandReceived(this.privConversationServiceConnector,new s.MuteAllEventArgs(S.value,h));break;case"roomexpirationwarning":this.privConversationServiceConnector.conversationExpiration&&this.privConversationServiceConnector.conversationExpiration(this.privConversationServiceConnector,new t.ConversationExpirationEventArgs(S.value,this.privConversationRequestSession.sessionId));break;case"setusetts":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.setUseTTS,S.value,h));break;case"setlockstate":this.privConversationServiceConnector.lockRoomCommandReceived&&this.privConversationServiceConnector.lockRoomCommandReceived(this.privConversationServiceConnector,new s.LockRoomEventArgs(S.value,h));break;case"changenickname":this.privConversationServiceConnector.participantUpdateCommandReceived&&this.privConversationServiceConnector.participantUpdateCommandReceived(this.privConversationServiceConnector,new s.ParticipantAttributeEventArgs(S.participantId,a.ConversationTranslatorCommandTypes.changeNickname,S.value,h));break;case"joinsession":const R=o.ParticipantPayloadResponse.fromJSON(d.textBody),D={avatar:R.avatar,displayName:R.nickname,id:R.participantId,isHost:R.ishost,isMuted:R.ismuted,isUsingTts:R.usetts,preferredLanguage:R.locale};this.privConversationServiceConnector.participantJoinCommandReceived&&this.privConversationServiceConnector.participantJoinCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(D,h));break;case"leavesession":const A={id:S.participantId};this.privConversationServiceConnector.participantLeaveCommandReceived&&this.privConversationServiceConnector.participantLeaveCommandReceived(this.privConversationServiceConnector,new s.ParticipantEventArgs(A,h));break;case"disconnectsession":const K={id:S.participantId};break;case"token":const rt=new r.CognitiveTokenAuthentication(()=>{const ae=S.token;return Promise.resolve(ae)},()=>{const ae=S.token;return Promise.resolve(ae)});this.authentication=rt,this.privConversationServiceConnector.onToken(rt);break;default:break}break;case"partial":case"final":const v=o.SpeechResponsePayload.fromJSON(d.textBody),f=m==="final"?t.ResultReason.TranslatedParticipantSpeech:t.ResultReason.TranslatingParticipantSpeech,g=new t.ConversationTranslationResult(v.participantId,this.getTranslations(v.translations),v.language,v.id,f,v.recognition,void 0,void 0,d.textBody,void 0);v.isFinal?((g.text!==void 0&&g.text.length>0||v.id===this.privLastPartialUtteranceId)&&(y=!0),y&&this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.final,g,h))):g.text!==void 0&&(this.privLastPartialUtteranceId=v.id,this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.partial,g,h)));break;case"translated_message":const C=o.TextResponsePayload.fromJSON(d.textBody),P=new t.ConversationTranslationResult(C.participantId,this.getTranslations(C.translations),C.language,void 0,void 0,C.originalText,void 0,void 0,void 0,d.textBody,void 0);this.privConversationServiceConnector.translationReceived&&this.privConversationServiceConnector.translationReceived(this.privConversationServiceConnector,new s.ConversationReceivedTranslationEventArgs(a.ConversationTranslatorMessageTypes.instantMessage,P,h));break;default:break}}catch{}return this.receiveConversationMessageOverride()}catch{this.terminateMessageLoop=!0}return l.promise}async startMessageLoop(){if(this.isDisposed())return Promise.resolve();this.terminateMessageLoop=!1;const l=this.receiveConversationMessageOverride();try{return await l}catch(p){return this.cancelRecognition(this.privRequestSession?this.privRequestSession.sessionId:"",this.privRequestSession?this.privRequestSession.requestId:"",t.CancellationReason.Error,t.CancellationErrorCode.RuntimeError,p),null}}configConnection(){return this.isDisposed()?Promise.resolve(void 0):this.privConnectionConfigPromise!==void 0?this.privConnectionConfigPromise.then(l=>l.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection()):this.privConnectionConfigPromise,()=>(this.privConnectionId=null,this.privConnectionConfigPromise=void 0,this.configConnection())):this.terminateMessageLoop?Promise.resolve(void 0):(this.privConnectionConfigPromise=this.connectImpl().then(l=>l),this.privConnectionConfigPromise)}getTranslations(l){let p;if(l!==void 0){p=new t.Translations;for(const d of l)p.set(d.lang,d.translation)}return p}};return jo.ConversationServiceAdapter=c,jo}var Ug;function Ak(){if(Ug)return Fr;Ug=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.ConversationTranslatorRecognizer=Fr.ConversationRecognizerFactory=void 0;const e=O(),t=b(),r=z,n=T(),i=Sk(),s=_k();class a{static fromConfig(u,l,p){return new o(u,l,p)}}Fr.ConversationRecognizerFactory=a;let o=class extends n.Recognizer{constructor(u,l,p){const d=l;r.Contracts.throwIfNull(d,"speechConfig");const h=u;r.Contracts.throwIfNull(h,"conversationImpl"),super(p,d.properties,new i.ConversationConnectionFactory),this.privConversation=h,this.privIsDisposed=!1,this.privProperties=d.properties.clone(),this.privConnection=n.Connection.fromRecognizer(this),this.privProperties.getProperty(n.PropertyId.WebWorkerLoadType,"on").toLowerCase()==="on"&&typeof Blob<"u"&&typeof Worker<"u"?(this.privSetTimeout=t.Timeout.setTimeout,this.privClearTimeout=t.Timeout.clearTimeout):typeof window<"u"?(this.privSetTimeout=window.setTimeout.bind(window),this.privClearTimeout=window.clearTimeout.bind(window)):(this.privSetTimeout=setTimeout,this.privClearTimeout=clearTimeout)}set connected(u){this.privConnection.connected=u}set disconnected(u){this.privConnection.disconnected=u}get speechRecognitionLanguage(){return this.privSpeechRecognitionLanguage}get properties(){return this.privProperties}isDisposed(){return this.privIsDisposed}connect(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),r.Contracts.throwIfNullOrWhitespace(u,"token"),this.privReco.conversationTranslatorToken=u,this.resetConversationTimeout(),this.privReco.connectAsync(l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d)}}disconnect(u,l){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privReco.disconnect().then(()=>{u&&u()},p=>{l&&l(p)})}catch(p){if(l)if(p instanceof Error){const d=p;l(d.name+": "+d.message)}else l(p);this.dispose(!0).catch(d=>{t.Events.instance.onEvent(new t.BackgroundEvent(d))})}}sendRequest(u,l,p){try{r.Contracts.throwIfDisposed(this.privIsDisposed),this.sendMessage(u,l,p)}catch(d){if(p)if(d instanceof Error){const h=d;p(h.name+": "+h.message)}else p(d);this.dispose(!0).catch(h=>{t.Events.instance.onEvent(new t.BackgroundEvent(h))})}}onToken(u){this.privConversation.onToken(u)}async close(){this.privIsDisposed||(this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close()),this.privConnection=void 0,await this.dispose(!0))}async dispose(u){this.privIsDisposed||u&&(this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privIsDisposed=!0,this.privConnection&&(this.privConnection.closeConnection(),this.privConnection.close(),this.privConnection=void 0),await super.dispose(u))}createRecognizerConfig(u){return new e.RecognizerConfig(u,this.privProperties)}createServiceRecognizer(u,l,p,d){const h=p;return new s.ConversationServiceAdapter(u,l,h,d,this)}sendMessage(u,l,p){const d=this.privReco;((m,y,S)=>{m!==void 0?m.then(()=>{try{y&&y()}catch(v){S&&S(`'Unhandled error on promise callback: ${v}'`)}},v=>{try{S&&S(v)}catch{}}):S&&S("Null promise")})(d.sendMessageAsync(u),l,p),this.resetConversationTimeout()}resetConversationTimeout(){this.privTimeoutToken!==void 0&&this.privClearTimeout(this.privTimeoutToken),this.privTimeoutToken=this.privSetTimeout(()=>{this.sendRequest(this.privConversation.getKeepAlive())},6e4)}};return Fr.ConversationTranslatorRecognizer=o,Fr}var xo={},$g;function kk(){if($g)return xo;$g=1,Object.defineProperty(xo,"__esModule",{value:!0}),xo.TranscriberRecognizer=void 0;const e=b(),t=z,r=T(),n=O(),i=tt;let s=class extends r.Recognizer{constructor(o,c){const u=o;t.Contracts.throwIfNull(u,"speechTranslationConfig");const l=c;t.Contracts.throwIfNull(l,"audioConfigImpl"),t.Contracts.throwIfNullOrWhitespace(u.speechRecognitionLanguage,r.PropertyId[r.PropertyId.SpeechServiceConnection_RecoLanguage]),super(c,u.properties,new n.TranscriberConnectionFactory),this.privDisposedRecognizer=!1,this.isMeetingRecognizer=!1}get speechRecognitionLanguage(){return t.Contracts.throwIfDisposed(this.privDisposedRecognizer),this.properties.getProperty(r.PropertyId.SpeechServiceConnection_RecoLanguage)}get properties(){return this.privProperties}get authorizationToken(){return this.properties.getProperty(r.PropertyId.SpeechServiceAuthorization_Token)}set authorizationToken(o){t.Contracts.throwIfNullOrWhitespace(o,"token"),this.properties.setProperty(r.PropertyId.SpeechServiceAuthorization_Token,o)}set conversation(o){t.Contracts.throwIfNullOrUndefined(o,"Conversation"),this.isMeetingRecognizer=!1,this.privConversation=o}getConversationInfo(){return t.Contracts.throwIfNullOrUndefined(this.privConversation,"Conversation"),this.privConversation.conversationInfo}set meeting(o){t.Contracts.throwIfNullOrUndefined(o,"Meeting"),this.isMeetingRecognizer=!0,this.privMeeting=o}getMeetingInfo(){return t.Contracts.throwIfNullOrUndefined(this.privMeeting,"Meeting"),this.privMeeting.meetingInfo}IsMeetingRecognizer(){return this.isMeetingRecognizer}startContinuousRecognitionAsync(o,c){(0,e.marshalPromiseToCallbacks)(this.startContinuousRecognitionAsyncImpl(i.RecognitionMode.Conversation),o,c)}stopContinuousRecognitionAsync(o,c){(0,e.marshalPromiseToCallbacks)(this.stopContinuousRecognitionAsyncImpl(),o,c)}async close(){this.privDisposedRecognizer||await this.dispose(!0)}async pushConversationEvent(o,c){const u=this.privReco;t.Contracts.throwIfNullOrUndefined(u,"serviceRecognizer"),await u.sendSpeechEventAsync(o,c)}async pushMeetingEvent(o,c){const u=this.privReco;t.Contracts.throwIfNullOrUndefined(u,"serviceRecognizer"),await u.sendMeetingSpeechEventAsync(o,c)}async enforceAudioGating(){const u=(await this.audioConfig.format).channels;if(u===1){if(this.properties.getProperty("f0f5debc-f8c9-4892-ac4b-90a7ab359fd2","false").toLowerCase()!=="true")throw new Error("Single channel audio configuration for MeetingTranscriber is currently under private preview, please contact diarizationrequest@microsoft.com for more details")}else if(u!==8)throw new Error(`Unsupported audio configuration: Detected ${u}-channel audio`)}connectMeetingCallbacks(o){this.isMeetingRecognizer=!0,this.canceled=(c,u)=>{o.canceled&&o.canceled(o,u)},this.recognizing=(c,u)=>{o.transcribing&&o.transcribing(o,u)},this.recognized=(c,u)=>{o.transcribed&&o.transcribed(o,u)},this.sessionStarted=(c,u)=>{o.sessionStarted&&o.sessionStarted(o,u)},this.sessionStopped=(c,u)=>{o.sessionStopped&&o.sessionStopped(o,u)}}disconnectCallbacks(){this.canceled=void 0,this.recognizing=void 0,this.recognized=void 0,this.sessionStarted=void 0,this.sessionStopped=void 0}async dispose(o){this.privDisposedRecognizer||(o&&(this.privDisposedRecognizer=!0,await this.implRecognizerStop()),await super.dispose(o))}createRecognizerConfig(o){return new n.RecognizerConfig(o,this.properties)}createServiceRecognizer(o,c,u,l){const p=u;return new n.TranscriptionServiceRecognizer(o,c,p,l,this)}};return xo.TranscriberRecognizer=s,xo}var Wg;function Mk(){return Wg||(Wg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InternalParticipants=e.ConversationTranslatorMessageTypes=e.ConversationTranslatorCommandTypes=e.ParticipantsListEventArgs=e.ParticipantEventArgs=e.ParticipantAttributeEventArgs=e.MuteAllEventArgs=e.LockRoomEventArgs=e.ConversationReceivedTranslationEventArgs=e.TranscriberRecognizer=e.ConversationRecognizerFactory=e.ConversationConnectionConfig=e.ConversationManager=void 0;var t=fk();Object.defineProperty(e,"ConversationManager",{enumerable:!0,get:function(){return t.ConversationManager}});var r=Gn;Object.defineProperty(e,"ConversationConnectionConfig",{enumerable:!0,get:function(){return r.ConversationConnectionConfig}});var n=Ak();Object.defineProperty(e,"ConversationRecognizerFactory",{enumerable:!0,get:function(){return n.ConversationRecognizerFactory}});var i=kk();Object.defineProperty(e,"TranscriberRecognizer",{enumerable:!0,get:function(){return i.TranscriberRecognizer}});var s=vP();Object.defineProperty(e,"ConversationReceivedTranslationEventArgs",{enumerable:!0,get:function(){return s.ConversationReceivedTranslationEventArgs}}),Object.defineProperty(e,"LockRoomEventArgs",{enumerable:!0,get:function(){return s.LockRoomEventArgs}}),Object.defineProperty(e,"MuteAllEventArgs",{enumerable:!0,get:function(){return s.MuteAllEventArgs}}),Object.defineProperty(e,"ParticipantAttributeEventArgs",{enumerable:!0,get:function(){return s.ParticipantAttributeEventArgs}}),Object.defineProperty(e,"ParticipantEventArgs",{enumerable:!0,get:function(){return s.ParticipantEventArgs}}),Object.defineProperty(e,"ParticipantsListEventArgs",{enumerable:!0,get:function(){return s.ParticipantsListEventArgs}});var a=qt;Object.defineProperty(e,"ConversationTranslatorCommandTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorCommandTypes}}),Object.defineProperty(e,"ConversationTranslatorMessageTypes",{enumerable:!0,get:function(){return a.ConversationTranslatorMessageTypes}}),Object.defineProperty(e,"InternalParticipants",{enumerable:!0,get:function(){return a.InternalParticipants}})}(bl)),bl}var ch={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesisAudioMetadata=e.MetadataType=void 0,function(r){r.WordBoundary="WordBoundary",r.Bookmark="Bookmark",r.Viseme="Viseme",r.SentenceBoundary="SentenceBoundary",r.SessionEnd="SessionEnd",r.AvatarSignal="TalkingAvatarSignal"}(e.MetadataType||(e.MetadataType={}));class t{constructor(n){this.privSynthesisAudioMetadata=JSON.parse(n)}static fromJSON(n){return new t(n)}get Metadata(){return this.privSynthesisAudioMetadata.Metadata}}e.SynthesisAudioMetadata=t})(ch);var Bo={},wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.SynthesisStartedEvent=wt.ConnectingToSynthesisServiceEvent=wt.SynthesisTriggeredEvent=wt.SpeechSynthesisEvent=void 0;const Vg=b();class ju extends Vg.PlatformEvent{constructor(t,r,n=Vg.EventType.Info){super(t,n),this.privRequestId=r}get requestId(){return this.privRequestId}}wt.SpeechSynthesisEvent=ju;class Ok extends ju{constructor(t,r,n){super("SynthesisTriggeredEvent",t),this.privSessionAudioDestinationId=r,this.privTurnAudioDestinationId=n}get audioSessionDestinationId(){return this.privSessionAudioDestinationId}get audioTurnDestinationId(){return this.privTurnAudioDestinationId}}wt.SynthesisTriggeredEvent=Ok;class Dk extends ju{constructor(t,r){super("ConnectingToSynthesisServiceEvent",t),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}wt.ConnectingToSynthesisServiceEvent=Dk;class bk extends ju{constructor(t,r){super("SynthesisStartedEvent",t),this.privAuthFetchEventId=r}get authFetchEventId(){return this.privAuthFetchEventId}}wt.SynthesisStartedEvent=bk;var Hg;function Nk(){if(Hg)return Bo;Hg=1,Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.SynthesisTurn=void 0;const e=b(),t=Ce,r=T(),n=ch,i=wt;let s=class zp{constructor(){this.privIsDisposed=!1,this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!1,this.privBytesReceived=0,this.privInTurn=!1,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privRequestId=(0,e.createNoDashGuid)(),this.privTurnDeferral=new e.Deferred,this.privTurnDeferral.resolve()}get requestId(){return this.privRequestId}get streamId(){return this.privStreamId}set streamId(o){this.privStreamId=o}get audioOutputFormat(){return this.privAudioOutputFormat}set audioOutputFormat(o){this.privAudioOutputFormat=o}get turnCompletionPromise(){return this.privTurnDeferral.promise}get isSynthesisEnded(){return this.privIsSynthesisEnded}get isSynthesizing(){return this.privIsSynthesizing}get currentTextOffset(){return this.privTextOffset}get currentSentenceOffset(){return this.privSentenceOffset}get bytesReceived(){return this.privBytesReceived}get audioDuration(){return this.privAudioDuration}get extraProperties(){if(this.privWebRTCSDP){const o=new r.PropertyCollection;return o.setProperty(r.PropertyId.TalkingAvatarService_WebRTC_SDP,this.privWebRTCSDP),o}}async getAllReceivedAudio(){return this.privReceivedAudio?Promise.resolve(this.privReceivedAudio):this.privIsSynthesisEnded?(await this.readAllAudioFromStream(),Promise.resolve(this.privReceivedAudio)):null}async getAllReceivedAudioWithHeader(){if(this.privReceivedAudioWithHeader)return this.privReceivedAudioWithHeader;if(!this.privIsSynthesisEnded)return null;if(this.audioOutputFormat.hasHeader){const o=await this.getAllReceivedAudio();return this.privReceivedAudioWithHeader=this.audioOutputFormat.addHeader(o),this.privReceivedAudioWithHeader}else return this.getAllReceivedAudio()}startNewSynthesis(o,c,u,l){this.privIsSynthesisEnded=!1,this.privIsSynthesizing=!0,this.privRequestId=o,this.privRawText=c,this.privIsSSML=u,this.privAudioOutputStream=new t.PullAudioOutputStreamImpl,this.privAudioOutputStream.format=this.privAudioOutputFormat,this.privReceivedAudio=null,this.privReceivedAudioWithHeader=null,this.privBytesReceived=0,this.privTextOffset=0,this.privNextSearchTextIndex=0,this.privSentenceOffset=0,this.privNextSearchSentenceIndex=0,this.privPartialVisemeAnimation="",this.privWebRTCSDP="",l!==void 0&&(this.privTurnAudioDestination=l,this.privTurnAudioDestination.format=this.privAudioOutputFormat),this.onEvent(new i.SynthesisTriggeredEvent(this.requestId,void 0,l===void 0?void 0:l.id()))}onPreConnectionStart(o){this.privAuthFetchEventId=o,this.onEvent(new i.ConnectingToSynthesisServiceEvent(this.privRequestId,this.privAuthFetchEventId))}onAuthCompleted(o){o&&this.onComplete()}onConnectionEstablishCompleted(o){if(o===200){this.onEvent(new i.SynthesisStartedEvent(this.requestId,this.privAuthFetchEventId)),this.privBytesReceived=0;return}else o===403&&this.onComplete()}onServiceResponseMessage(o){const c=JSON.parse(o);this.streamId=c.audio.streamId}onServiceTurnEndResponse(){this.privInTurn=!1,this.privTurnDeferral.resolve(),this.onComplete()}onServiceTurnStartResponse(o){this.privTurnDeferral&&this.privInTurn&&(this.privTurnDeferral.reject("Another turn started before current completed."),this.privTurnDeferral.promise.then().catch(()=>{})),this.privInTurn=!0,this.privTurnDeferral=new e.Deferred;const c=JSON.parse(o);c.webrtc&&(this.privWebRTCSDP=c.webrtc.connectionString)}onAudioChunkReceived(o){this.isSynthesizing&&(this.privAudioOutputStream.write(o),this.privBytesReceived+=o.byteLength,this.privTurnAudioDestination!==void 0&&this.privTurnAudioDestination.write(o))}onTextBoundaryEvent(o){this.updateTextOffset(o.Data.text.Text,o.Type)}onVisemeMetadataReceived(o){o.Data.AnimationChunk!==void 0&&(this.privPartialVisemeAnimation+=o.Data.AnimationChunk)}onSessionEnd(o){this.privAudioDuration=o.Data.Offset}async constructSynthesisResult(){const o=await this.getAllReceivedAudioWithHeader();return new r.SpeechSynthesisResult(this.requestId,r.ResultReason.SynthesizingAudioCompleted,o,void 0,this.extraProperties,this.audioDuration)}dispose(){this.privIsDisposed||(this.privIsDisposed=!0)}onStopSynthesizing(){this.onComplete()}getAndClearVisemeAnimation(){const o=this.privPartialVisemeAnimation;return this.privPartialVisemeAnimation="",o}onEvent(o){e.Events.instance.onEvent(o)}static isXmlTag(o){return o.length>=2&&o[0]==="<"&&o[o.length-1]===">"}updateTextOffset(o,c){c===n.MetadataType.WordBoundary?(this.privTextOffset=this.privRawText.indexOf(o,this.privNextSearchTextIndex),this.privTextOffset>=0&&(this.privNextSearchTextIndex=this.privTextOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privTextOffset)&&!zp.isXmlTag(o)&&this.updateTextOffset(o,c))):(this.privSentenceOffset=this.privRawText.indexOf(o,this.privNextSearchSentenceIndex),this.privSentenceOffset>=0&&(this.privNextSearchSentenceIndex=this.privSentenceOffset+o.length,this.privIsSSML&&this.withinXmlTag(this.privSentenceOffset)&&!zp.isXmlTag(o)&&this.updateTextOffset(o,c)))}onComplete(){this.privIsSynthesizing&&(this.privIsSynthesizing=!1,this.privIsSynthesisEnded=!0,this.privAudioOutputStream.close(),this.privInTurn=!1,this.privTurnAudioDestination!==void 0&&(this.privTurnAudioDestination.close(),this.privTurnAudioDestination=void 0))}async readAllAudioFromStream(){if(this.privIsSynthesisEnded){this.privReceivedAudio=new ArrayBuffer(this.bytesReceived);try{await this.privAudioOutputStream.read(this.privReceivedAudio)}catch{this.privReceivedAudio=new ArrayBuffer(0)}}}withinXmlTag(o){return this.privRawText.indexOf("<",o+1)>this.privRawText.indexOf(">",o+1)}};return Bo.SynthesisTurn=s,Bo}var Fo={},Kg;function zk(){if(Kg)return Fo;Kg=1,Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.SynthesisAdapterBase=void 0;const e=b(),t=T(),r=O(),n=Gt;let i=class{constructor(a,o,c,u){if(this.speakOverride=void 0,this.receiveMessageOverride=void 0,this.connectImplOverride=void 0,this.configConnectionOverride=void 0,this.privConnectionConfigurationPromise=void 0,!a)throw new e.ArgumentNullError("authentication");if(!o)throw new e.ArgumentNullError("connectionFactory");if(!c)throw new e.ArgumentNullError("synthesizerConfig");this.privAuthentication=a,this.privConnectionFactory=o,this.privSynthesizerConfig=c,this.privIsDisposed=!1,this.privSessionAudioDestination=u,this.privSynthesisTurn=new r.SynthesisTurn,this.privConnectionEvents=new e.EventSource,this.privServiceEvents=new e.EventSource,this.privSynthesisContext=new r.SynthesisContext,this.privAgentConfig=new r.AgentConfig,this.connectionEvents.attach(l=>{if(l.name==="ConnectionClosedEvent"){const p=l;p.statusCode!==1e3&&this.cancelSynthesisLocal(t.CancellationReason.Error,p.statusCode===1007?t.CancellationErrorCode.BadRequestParameters:t.CancellationErrorCode.ConnectionFailure,`${p.reason} websocket error code: ${p.statusCode}`)}})}get synthesisContext(){return this.privSynthesisContext}get agentConfig(){return this.privAgentConfig}get connectionEvents(){return this.privConnectionEvents}get serviceEvents(){return this.privServiceEvents}set activityTemplate(a){this.privActivityTemplate=a}get activityTemplate(){return this.privActivityTemplate}set audioOutputFormat(a){this.privAudioOutputFormat=a,this.privSynthesisTurn.audioOutputFormat=a,this.privSessionAudioDestination!==void 0&&(this.privSessionAudioDestination.format=a),this.synthesisContext!==void 0&&(this.synthesisContext.audioOutputFormat=a)}isDisposed(){return this.privIsDisposed}async dispose(a){this.privIsDisposed=!0,this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.close(),this.privConnectionConfigurationPromise!==void 0&&await(await this.privConnectionConfigurationPromise).dispose(a)}async connect(){await this.connectImpl()}async sendNetworkMessage(a,o){const c=typeof o=="string"?e.MessageType.Text:e.MessageType.Binary,u=typeof o=="string"?"application/json":"";return(await this.fetchConnection()).send(new n.SpeechConnectionMessage(c,a,this.privSynthesisTurn.requestId,u,o))}async Speak(a,o,c,u,l,p){let d;if(o?d=a:d=this.privSynthesizer.buildSsml(a),this.speakOverride!==void 0)return this.speakOverride(d,c,u,l);this.privSuccessCallback=u,this.privErrorCallback=l,this.privSynthesisTurn.startNewSynthesis(c,a,o,p);try{await this.connectImpl();const h=await this.fetchConnection();await this.sendSynthesisContext(h),await this.sendSsmlMessage(h,d,c),this.onSynthesisStarted(c),this.receiveMessage()}catch(h){return this.cancelSynthesisLocal(t.CancellationReason.Error,t.CancellationErrorCode.ConnectionFailure,h),Promise.reject(h)}}async stopSpeaking(){return await this.connectImpl(),(await this.fetchConnection()).send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.control",this.privSynthesisTurn.requestId,"application/json",JSON.stringify({action:"stop"})))}cancelSynthesis(a,o,c,u){const l=new t.PropertyCollection;l.setProperty(r.CancellationErrorCodePropertyName,t.CancellationErrorCode[c]);const p=new t.SpeechSynthesisResult(a,t.ResultReason.Canceled,void 0,u,l);if(this.onSynthesisCancelled(p),this.privSuccessCallback)try{this.privSuccessCallback(p)}catch{}}cancelSynthesisLocal(a,o,c){this.privSynthesisTurn.isSynthesizing&&(this.privSynthesisTurn.onStopSynthesizing(),this.cancelSynthesis(this.privSynthesisTurn.requestId,a,o,c))}processTypeSpecificMessages(a){return!0}async receiveMessage(){try{const o=await(await this.fetchConnection()).read();if(this.receiveMessageOverride!==void 0)return this.receiveMessageOverride();if(this.privIsDisposed)return;if(!o)return this.privSynthesisTurn.isSynthesizing?this.receiveMessage():void 0;const c=n.SpeechConnectionMessage.fromConnectionMessage(o);if(c.requestId.toLowerCase()===this.privSynthesisTurn.requestId.toLowerCase())switch(c.path.toLowerCase()){case"turn.start":this.privSynthesisTurn.onServiceTurnStartResponse(c.textBody);break;case"response":this.privSynthesisTurn.onServiceResponseMessage(c.textBody);break;case"audio":this.privSynthesisTurn.streamId.toLowerCase()===c.streamId.toLowerCase()&&c.binaryBody&&(this.privSynthesisTurn.onAudioChunkReceived(c.binaryBody),this.onSynthesizing(c.binaryBody),this.privSessionAudioDestination!==void 0&&this.privSessionAudioDestination.write(c.binaryBody));break;case"audio.metadata":const u=r.SynthesisAudioMetadata.fromJSON(c.textBody).Metadata;for(const p of u)switch(p.Type){case r.MetadataType.WordBoundary:case r.MetadataType.SentenceBoundary:this.privSynthesisTurn.onTextBoundaryEvent(p);const d=new t.SpeechSynthesisWordBoundaryEventArgs(p.Data.Offset,p.Data.Duration,p.Data.text.Text,p.Data.text.Length,p.Type===r.MetadataType.WordBoundary?this.privSynthesisTurn.currentTextOffset:this.privSynthesisTurn.currentSentenceOffset,p.Data.text.BoundaryType);this.onWordBoundary(d);break;case r.MetadataType.Bookmark:const h=new t.SpeechSynthesisBookmarkEventArgs(p.Data.Offset,p.Data.Bookmark);this.onBookmarkReached(h);break;case r.MetadataType.Viseme:if(this.privSynthesisTurn.onVisemeMetadataReceived(p),p.Data.IsLastAnimation){const m=new t.SpeechSynthesisVisemeEventArgs(p.Data.Offset,p.Data.VisemeId,this.privSynthesisTurn.getAndClearVisemeAnimation());this.onVisemeReceived(m)}break;case r.MetadataType.AvatarSignal:this.onAvatarEvent(p);break;case r.MetadataType.SessionEnd:this.privSynthesisTurn.onSessionEnd(p);break}break;case"turn.end":this.privSynthesisTurn.onServiceTurnEndResponse();let l;try{l=await this.privSynthesisTurn.constructSynthesisResult(),this.privSuccessCallback&&this.privSuccessCallback(l)}catch(p){this.privErrorCallback&&this.privErrorCallback(p)}this.onSynthesisCompleted(l);break;default:this.processTypeSpecificMessages(c)||this.privServiceEvents&&this.serviceEvents.onEvent(new e.ServiceEvent(c.path.toLowerCase(),c.textBody))}return this.receiveMessage()}catch{}}sendSynthesisContext(a){this.setSynthesisContextSynthesisSection();const o=this.synthesisContext.toJSON();if(o)return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"synthesis.context",this.privSynthesisTurn.requestId,"application/json",o))}setSpeechConfigSynthesisSection(){}connectImpl(a=!1){if(this.privConnectionPromise!=null)return this.privConnectionPromise.then(c=>c.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()):this.privConnectionPromise,()=>(this.privConnectionId=null,this.privConnectionPromise=null,this.connectImpl()));this.privAuthFetchEventId=(0,e.createNoDashGuid)(),this.privConnectionId=(0,e.createNoDashGuid)(),this.privSynthesisTurn.onPreConnectionStart(this.privAuthFetchEventId);const o=a?this.privAuthentication.fetchOnExpiry(this.privAuthFetchEventId):this.privAuthentication.fetch(this.privAuthFetchEventId);return this.privConnectionPromise=o.then(async c=>{this.privSynthesisTurn.onAuthCompleted(!1);const u=await this.privConnectionFactory.create(this.privSynthesizerConfig,c,this.privConnectionId);u.events.attach(p=>{this.connectionEvents.onEvent(p)});const l=await u.open();return l.statusCode===200?(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.resolve(u)):l.statusCode===403&&!a?this.connectImpl(!0):(this.privSynthesisTurn.onConnectionEstablishCompleted(l.statusCode),Promise.reject(`Unable to contact server. StatusCode: ${l.statusCode},
                    ${this.privSynthesizerConfig.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Url)} Reason: ${l.reason}`))},c=>{throw this.privSynthesisTurn.onAuthCompleted(!0),new Error(c)}),this.privConnectionPromise.catch(()=>{}),this.privConnectionPromise}sendSpeechServiceConfig(a,o){if(o)return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"speech.config",this.privSynthesisTurn.requestId,"application/json",o))}sendSsmlMessage(a,o,c){return a.send(new n.SpeechConnectionMessage(e.MessageType.Text,"ssml",c,"application/ssml+xml",o))}async fetchConnection(){return this.privConnectionConfigurationPromise!==void 0?this.privConnectionConfigurationPromise.then(a=>a.state()===e.ConnectionState.Disconnected?(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection()):this.privConnectionConfigurationPromise,()=>(this.privConnectionId=null,this.privConnectionConfigurationPromise=void 0,this.fetchConnection())):(this.privConnectionConfigurationPromise=this.configureConnection(),await this.privConnectionConfigurationPromise)}async configureConnection(){const a=await this.connectImpl();return this.configConnectionOverride!==void 0?this.configConnectionOverride(a):(this.setSpeechConfigSynthesisSection(),await this.sendSpeechServiceConfig(a,this.privSynthesizerConfig.SpeechServiceConfig.serialize()),a)}onAvatarEvent(a){}onSynthesisStarted(a){}onSynthesizing(a){}onSynthesisCancelled(a){}onSynthesisCompleted(a){}onWordBoundary(a){}onVisemeReceived(a){}onBookmarkReached(a){}};return Fo.SynthesisAdapterBase=i,i.telemetryDataEnabled=!0,Fo}var qo={},Jg;function Lk(){if(Jg)return qo;Jg=1,Object.defineProperty(qo,"__esModule",{value:!0}),qo.AvatarSynthesisAdapter=void 0;const e=T(),t=O();let r=class extends t.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,void 0),this.privAvatarSynthesizer=o,this.privSynthesizer=o,this.privAvatarConfig=c}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(void 0)}setSpeechConfigSynthesisSection(){this.privSynthesizerConfig.synthesisVideoSection={format:{bitrate:this.privAvatarConfig.videoFormat?.bitrate,codec:this.privAvatarConfig.videoFormat?.codec,crop:{bottomRight:{x:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.bottomRight?.y},topLeft:{x:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.x,y:this.privAvatarConfig.videoFormat?.cropRange?.topLeft?.y}},resolution:{height:this.privAvatarConfig.videoFormat?.height,width:this.privAvatarConfig.videoFormat?.width}},protocol:{name:"WebRTC",webrtcConfig:{clientDescription:btoa(this.privSynthesizerConfig.parameters.getProperty(e.PropertyId.TalkingAvatarService_WebRTC_SDP)),iceServers:this.privAvatarConfig.remoteIceServers??this.privAvatarSynthesizer.iceServers}},talkingAvatar:{background:{color:this.privAvatarConfig.backgroundColor,image:{url:this.privAvatarConfig.backgroundImage?.toString()}},character:this.privAvatarConfig.character,customized:this.privAvatarConfig.customized,style:this.privAvatarConfig.style,useBuiltInVoice:this.privAvatarConfig.useBuiltInVoice}}}onAvatarEvent(i){if(this.privAvatarSynthesizer.avatarEventReceived){const s=new e.AvatarEventArgs(i.Data.Offset,i.Data.Name);try{this.privAvatarSynthesizer.avatarEventReceived(this.privAvatarSynthesizer,s)}catch{}}}};return qo.AvatarSynthesisAdapter=r,qo}var Uo={},Gg;function jk(){if(Gg)return Uo;Gg=1,Object.defineProperty(Uo,"__esModule",{value:!0}),Uo.SpeechSynthesisAdapter=void 0;const e=T(),t=O();let r=class extends t.SynthesisAdapterBase{constructor(i,s,a,o,c){super(i,s,a,c),this.privSpeechSynthesizer=o,this.privSynthesizer=o}setSynthesisContextSynthesisSection(){this.privSynthesisContext.setSynthesisSection(this.privSpeechSynthesizer)}onSynthesisStarted(i){const s=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(i,e.ResultReason.SynthesizingAudioStarted));this.privSpeechSynthesizer.synthesisStarted&&this.privSpeechSynthesizer.synthesisStarted(this.privSpeechSynthesizer,s)}onSynthesizing(i){if(this.privSpeechSynthesizer.synthesizing)try{const s=this.privSynthesisTurn.audioOutputFormat.addHeader(i),a=new e.SpeechSynthesisEventArgs(new e.SpeechSynthesisResult(this.privSynthesisTurn.requestId,e.ResultReason.SynthesizingAudio,s));this.privSpeechSynthesizer.synthesizing(this.privSpeechSynthesizer,a)}catch{}}onSynthesisCancelled(i){if(this.privSpeechSynthesizer.SynthesisCanceled){const s=new e.SpeechSynthesisEventArgs(i);try{this.privSpeechSynthesizer.SynthesisCanceled(this.privSpeechSynthesizer,s)}catch{}}}onSynthesisCompleted(i){if(this.privSpeechSynthesizer.synthesisCompleted)try{this.privSpeechSynthesizer.synthesisCompleted(this.privSpeechSynthesizer,new e.SpeechSynthesisEventArgs(i))}catch{}}onWordBoundary(i){if(this.privSpeechSynthesizer.wordBoundary)try{this.privSpeechSynthesizer.wordBoundary(this.privSpeechSynthesizer,i)}catch{}}onVisemeReceived(i){if(this.privSpeechSynthesizer.visemeReceived)try{this.privSpeechSynthesizer.visemeReceived(this.privSpeechSynthesizer,i)}catch{}}onBookmarkReached(i){if(this.privSpeechSynthesizer.bookmarkReached)try{this.privSpeechSynthesizer.bookmarkReached(this.privSpeechSynthesizer,i)}catch{}}};return Uo.SpeechSynthesisAdapter=r,Uo}var $o={},Qg;function xk(){if(Qg)return $o;Qg=1,Object.defineProperty($o,"__esModule",{value:!0}),$o.SynthesisRestAdapter=void 0;const e=ge(),t=T(),r=Ct(),n=fe;let i=class{constructor(a,o){let c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!c){const l=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Region,"westus"),p=r.ConnectionFactoryBase.getHostSuffix(l);c=a.parameters.getProperty(t.PropertyId.SpeechServiceConnection_Host,`https://${l}.tts.speech${p}`)}this.privUri=`${c}/cognitiveservices/voices/list`;const u=e.RestConfigBase.requestOptions;this.privRestAdapter=new e.RestMessageAdapter(u),this.privAuthentication=o}getVoicesList(a){return this.privRestAdapter.setHeaders(n.HeaderNames.ConnectionId,a),this.privAuthentication.fetch(a).then(o=>(this.privRestAdapter.setHeaders(o.headerName,o.token),this.privRestAdapter.request(e.RestRequestType.Get,this.privUri)))}};return $o.SynthesisRestAdapter=i,$o}var zl={},Yg;function Bk(){return Yg||(Yg=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SynthesizerConfig=e.SynthesisServiceType=void 0;const t=O();var r;(function(i){i[i.Standard=0]="Standard",i[i.Custom=1]="Custom"})(r=e.SynthesisServiceType||(e.SynthesisServiceType={}));class n{constructor(s,a){this.privSynthesisServiceType=r.Standard,this.avatarEnabled=!1,this.privSpeechServiceConfig=s||new t.SpeechServiceConfig(new t.Context(null)),this.privParameters=a}get parameters(){return this.privParameters}get synthesisServiceType(){return this.privSynthesisServiceType}set synthesisServiceType(s){this.privSynthesisServiceType=s}set synthesisVideoSection(s){this.privSpeechServiceConfig.Context.synthesis={video:s}}get SpeechServiceConfig(){return this.privSpeechServiceConfig}}e.SynthesizerConfig=n}(zl)),zl}var Wo={},Xg;function Fk(){if(Xg)return Wo;Xg=1,Object.defineProperty(Wo,"__esModule",{value:!0}),Wo.SynthesisContext=void 0;const e=T();let t=class{constructor(){this.privContext={}}setSection(n,i){this.privContext[n]=i}set audioOutputFormat(n){this.privAudioOutputFormat=n}toJSON(){return JSON.stringify(this.privContext)}setSynthesisSection(n){const i=this.buildSynthesisContext(n);this.setSection("synthesis",i)}buildSynthesisContext(n){return{audio:{metadataOptions:{bookmarkEnabled:!!n?.bookmarkReached,punctuationBoundaryEnabled:n?.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestPunctuationBoundary,!!n?.wordBoundary),sentenceBoundaryEnabled:n?.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestSentenceBoundary,!1),sessionEndEnabled:!0,visemeEnabled:!!n?.visemeReceived,wordBoundaryEnabled:n?.properties.getProperty(e.PropertyId.SpeechServiceResponse_RequestWordBoundary,!!n?.wordBoundary)},outputFormat:this.privAudioOutputFormat.requestAudioFormatString},language:{autoDetection:n?.autoDetectSourceLanguage}}}};return Wo.SynthesisContext=t,Wo}var Vo={},Zg;function qk(){if(Zg)return Vo;Zg=1,Object.defineProperty(Vo,"__esModule",{value:!0}),Vo.SpeakerRecognitionConfig=void 0;const e=O();let t=class{constructor(n,i){this.privContext=n||new e.Context(null),this.privParameters=i}get parameters(){return this.privParameters}get Context(){return this.privContext}};return Vo.SpeakerRecognitionConfig=t,Vo}var Ho={},em;function Uk(){if(em)return Ho;em=1,Object.defineProperty(Ho,"__esModule",{value:!0}),Ho.SpeakerServiceRecognizer=void 0;const e=ge(),t=b(),r=T(),n=O(),i=Gt;let s=class extends n.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privSpeakerRecognizer=p,this.privSpeakerAudioSource=u,this.recognizeSpeaker=d=>this.recognizeSpeakerOnce(d),this.sendPrePayloadJSONOverride=()=>this.noOp()}processTypeSpecificMessages(o){let c=!1;const u=new r.PropertyCollection;switch(o.messageType===t.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.response":const p=JSON.parse(o.textBody);let d;p.status.statusCode.toLowerCase()!=="success"?d=new r.SpeakerRecognitionResult(p,r.ResultReason.Canceled,r.CancellationErrorCode.ServiceError,p.status.reason):d=new r.SpeakerRecognitionResult(p,r.ResultReason.RecognizedSpeaker),this.privResultDeferral&&this.privResultDeferral.resolve(d),c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){if(new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]),this.privResultDeferral){const h=new r.SpeakerRecognitionResult({scenario:this.privSpeakerModel.scenario,status:{statusCode:p,reason:p}},r.ResultReason.Canceled,l,p);try{this.privResultDeferral.resolve(h)}catch(m){this.privResultDeferral.reject(m)}}}async recognizeSpeakerOnce(o){this.privSpeakerModel=o,this.voiceProfileType=o.scenario,this.privResultDeferral||(this.privResultDeferral=new t.Deferred),this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const c=this.connectImpl(),u=this.sendPreAudioMessages(this.extractSpeakerContext(o)),l=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),p=await this.privSpeakerAudioSource.format,d=await this.privSpeakerAudioSource.deviceInfo,h=new e.ReplayableAudioNode(l,p.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(h,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:d};try{await c,await u}catch(S){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,S)}const m=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,m),this.receiveMessage(),this.sendAudio(h).then(()=>{},S=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,S)}),this.privResultDeferral.promise}async sendPreAudioMessages(o){const c=await this.fetchConnection();await this.sendSpeakerRecognition(c,o)}async sendSpeakerRecognition(o,c){const u=JSON.stringify(c);return o.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.context",this.privRequestSession.requestId,"application/json; charset=utf-8",u))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}};return Ho.SpeakerServiceRecognizer=s,Ho}var Ko={},tm;function $k(){if(tm)return Ko;tm=1,Object.defineProperty(Ko,"__esModule",{value:!0}),Ko.VoiceServiceRecognizer=void 0;const e=ge(),t=b(),r=T(),n=O(),i=Gt;let s=class extends n.ServiceRecognizerBase{constructor(o,c,u,l,p){super(o,c,u,l,p),this.privDeferralMap=new t.DeferralMap,this.privSpeakerAudioSource=u,this.sendPrePayloadJSONOverride=()=>this.noOp()}set SpeakerAudioSource(o){this.privSpeakerAudioSource=o}processTypeSpecificMessages(o){let c=!1;const u=new r.PropertyCollection;switch(o.messageType===t.MessageType.Text&&u.setProperty(r.PropertyId.SpeechServiceResponse_JsonResult,o.textBody),o.path.toLowerCase()){case"speaker.profiles":const p=JSON.parse(o.textBody);switch(p.operation.toLowerCase()){case"create":this.handleCreateResponse(p,o.requestId);break;case"delete":case"reset":this.handleResultResponse(p,o.requestId);break;case"fetch":const y=JSON.parse(o.textBody);this.handleFetchResponse(y,o.requestId);break}c=!0;break;case"speaker.phrases":const d=JSON.parse(o.textBody);this.handlePhrasesResponse(d,o.requestId),c=!0;break;case"speaker.profile.enrollment":const h=JSON.parse(o.textBody),m=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(h.enrollment?h.enrollment.enrollmentStatus:h.status.statusCode),h.enrollment?JSON.stringify(h.enrollment):void 0,h.status.reason);this.privDeferralMap.getId(o.requestId)&&this.privDeferralMap.complete(o.requestId,m),this.privRequestSession.onSpeechEnded(),c=!0;break}const l=new t.Deferred;return l.resolve(c),l.promise}cancelRecognition(o,c,u,l,p){new r.PropertyCollection().setProperty(n.CancellationErrorCodePropertyName,r.CancellationErrorCode[l]);const h=new r.VoiceProfileEnrollmentResult(r.ResultReason.Canceled,p,p);this.privDeferralMap.getId(c)&&this.privDeferralMap.complete(c,h)}async createProfile(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new t.Deferred;return await u,await this.sendCreateProfile(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async resetProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("reset",o.profileType,o)}async deleteProfile(o){return this.voiceProfileType=o.profileType.toString(),this.sendCommonRequest("delete",o.profileType,o)}async retrieveEnrollmentResult(o){return this.voiceProfileType=o.profileType.toString(),this.privExpectedProfileId=o.profileId,this.sendCommonRequest("fetch",o.profileType,o)}async getAllProfiles(o){return this.voiceProfileType=o.toString(),this.sendCommonRequest("fetch",o)}async getActivationPhrases(o,c){this.voiceProfileType=o.toString();const u=this.connectImpl();try{const l=new t.Deferred;return await u,await this.sendPhrasesRequest(l,o,c),this.receiveMessage(),l.promise}catch(l){throw l}}async enrollProfile(o){this.voiceProfileType=o.profileType.toString();const c=new t.Deferred;this.privRequestSession.startNewRecognition(),this.privRequestSession.listenForServiceTelemetry(this.privSpeakerAudioSource.events),this.privRecognizerConfig.parameters.setProperty(r.PropertyId.Speech_SessionId,this.privRequestSession.sessionId);const u=this.connectImpl(),l=this.sendPreAudioMessages(o,c),p=await this.privSpeakerAudioSource.attach(this.privRequestSession.audioNodeId),d=await this.privSpeakerAudioSource.format,h=await this.privSpeakerAudioSource.deviceInfo,m=new e.ReplayableAudioNode(p,d.avgBytesPerSec);await this.privRequestSession.onAudioSourceAttachCompleted(m,!1),this.privRecognizerConfig.SpeechServiceConfig.Context.audio={source:h};try{await u,await l}catch(v){this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.ConnectionFailure,v)}const y=new r.SessionEventArgs(this.privRequestSession.sessionId);return this.privRecognizer.sessionStarted&&this.privRecognizer.sessionStarted(this.privRecognizer,y),this.receiveMessage(),this.sendAudio(m).then(()=>{},v=>{this.cancelRecognition(this.privRequestSession.sessionId,this.privRequestSession.requestId,r.CancellationReason.Error,r.CancellationErrorCode.RuntimeError,v)}),c.promise}async sendPreAudioMessages(o,c){const u=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,c),await this.sendBaseRequest(u,"enroll",this.scenarioFrom(o.profileType),o)}async sendPhrasesRequest(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=this.scenarioFrom(c),d={locale:u,scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.phrases",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCreateProfile(o,c,u){const l=await this.fetchConnection();this.privRequestSession.onSpeechContext(),this.privDeferralMap.add(this.privRequestSession.requestId,o);const p=c===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":c===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification",d={locale:u,number:"1",scenario:p};return l.send(new i.SpeechConnectionMessage(t.MessageType.Text,"speaker.profile.create",this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(d)))}async sendCommonRequest(o,c,u=void 0){const l=this.connectImpl();try{const p=new t.Deferred;this.privRequestSession.onSpeechContext(),await l;const d=await this.fetchConnection();return this.privDeferralMap.add(this.privRequestSession.requestId,p),await this.sendBaseRequest(d,o,this.scenarioFrom(c),u),this.receiveMessage(),p.promise}catch(p){throw p}}async sendBaseRequest(o,c,u,l){const p={scenario:u};return l?p.profileIds=[l.profileId]:p.maxPageSize=-1,o.send(new i.SpeechConnectionMessage(t.MessageType.Text,`speaker.profile.${c}`,this.privRequestSession.requestId,"application/json; charset=utf-8",JSON.stringify(p)))}extractSpeakerContext(o){return{features:{interimResult:"enabled",progressiveDetection:"disabled"},profileIds:o.profileIds,scenario:o.scenario}}handlePhrasesResponse(o,c){if(this.privDeferralMap.getId(c))if(o.status.statusCode.toLowerCase()!=="success"){const u=r.ResultReason.Canceled,l=new r.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,[]);this.privDeferralMap.complete(c,l)}else if(o.phrases&&o.phrases.length>0){const u=r.ResultReason.EnrollingVoiceProfile,l=new r.VoiceProfilePhraseResult(u,o.status.statusCode,o.passPhraseType,o.phrases);this.privDeferralMap.complete(c,l)}else throw new Error("Voice Profile get activation phrases failed, no phrases received");else throw new Error(`Voice Profile get activation phrases request for requestID ${c} not found`)}handleCreateResponse(o,c){if(o.profiles&&o.profiles.length>0)if(this.privDeferralMap.getId(c)){const u=o.profiles.map(l=>l.profileId);this.privDeferralMap.complete(c,u)}else throw new Error(`Voice Profile create request for requestID ${c} not found`);else throw new Error("Voice Profile create failed, no profile id received")}handleResultResponse(o,c){if(this.privDeferralMap.getId(c)){const u=o.operation.toLowerCase()==="delete"?r.ResultReason.DeletedVoiceProfile:r.ResultReason.ResetVoiceProfile,l=o.status.statusCode.toLowerCase()==="success"?u:r.ResultReason.Canceled,p=new r.VoiceProfileResult(l,`statusCode: ${o.status.statusCode}, errorDetails: ${o.status.reason}`);this.privDeferralMap.complete(c,p)}else throw new Error(`Voice Profile create request for requestID ${c} not found`)}handleFetchResponse(o,c){if(this.privDeferralMap.getId(c)&&o.profiles[0]){if(this.privExpectedProfileId&&o.profiles.length===1&&o.profiles[0].profileId===this.privExpectedProfileId){this.privExpectedProfileId=void 0;const u=o.profiles[0],l=new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(u.enrollmentStatus),JSON.stringify(u),o.status.reason);this.privDeferralMap.complete(c,l)}else if(o.profiles.length>0){const u=o.profiles,l=[];for(const p of u)l.push(new r.VoiceProfileEnrollmentResult(this.enrollmentReasonFrom(p.enrollmentStatus),JSON.stringify(p),o.status.reason));this.privDeferralMap.complete(c,l)}}else throw new Error(`Voice Profile fetch request for requestID ${c} not found`)}enrollmentReasonFrom(o){switch(o.toLowerCase()){case"enrolled":return r.ResultReason.EnrolledVoiceProfile;case"invalidlocale":case"invalidphrase":case"invalidaudioformat":case"invalidscenario":case"invalidprofilecount":case"invalidoperation":case"audiotooshort":case"audiotoolong":case"toomanyenrollments":case"storageconflict":case"profilenotfound":case"incompatibleprofiles":case"incompleteenrollment":return r.ResultReason.Canceled;default:return r.ResultReason.EnrollingVoiceProfile}}scenarioFrom(o){return o===r.VoiceProfileType.TextIndependentIdentification?"TextIndependentIdentification":o===r.VoiceProfileType.TextIndependentVerification?"TextIndependentVerification":"TextDependentVerification"}};return Ko.VoiceServiceRecognizer=s,Ko}var gP={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.type=e.connectivity=e.Device=e.OS=e.System=e.Context=e.SpeechServiceConfig=void 0;class t{constructor(o){this.context=o}serialize(){return JSON.stringify(this,(o,c)=>{if(c&&typeof c=="object"&&!Array.isArray(c)){const u={};for(const l in c)Object.hasOwnProperty.call(c,l)&&(u[l&&l.charAt(0).toLowerCase()+l.substring(1)]=c[l]);return u}return c})}get Context(){return this.context}get Recognition(){return this.recognition}set Recognition(o){this.recognition=o.toLowerCase()}}e.SpeechServiceConfig=t;class r{constructor(o){this.system=new n,this.os=o}}e.Context=r;class n{constructor(){const o="1.44.1";this.name="SpeechSDK",this.version=o,this.build="JavaScript",this.lang="JavaScript"}}e.System=n;class i{constructor(o,c,u){this.platform=o,this.name=c,this.version=u}}e.OS=i;class s{constructor(o,c,u){this.manufacturer=o,this.model=c,this.version=u}}e.Device=s,function(a){a.Bluetooth="Bluetooth",a.Wired="Wired",a.WiFi="WiFi",a.Cellular="Cellular",a.InBuilt="InBuilt",a.Unknown="Unknown"}(e.connectivity||(e.connectivity={})),function(a){a.Phone="Phone",a.Speaker="Speaker",a.Car="Car",a.Headset="Headset",a.Thermostat="Thermostat",a.Microphones="Microphones",a.Deskphone="Deskphone",a.RemoteControl="RemoteControl",a.Unknown="Unknown",a.File="File",a.Stream="Stream"}(e.type||(e.type={}))})(gP);var rm;function O(){return rm||(rm=1,function(e){var t=q&&q.__createBinding||(Object.create?function(s,a,o,c){c===void 0&&(c=o),Object.defineProperty(s,c,{enumerable:!0,get:function(){return a[o]}})}:function(s,a,o,c){c===void 0&&(c=o),s[c]=a[o]}),r=q&&q.__exportStar||function(s,a){for(var o in s)o!=="default"&&!Object.prototype.hasOwnProperty.call(a,o)&&t(a,s,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.AutoDetectSourceLanguagesOpenRangeOptionName=e.ForceDictationPropertyName=e.ServicePropertiesPropertyName=e.CancellationErrorCodePropertyName=e.OutputFormatPropertyName=e.SpeechSynthesisAdapter=e.AvatarSynthesisAdapter=void 0,r(wc,e),r(Vc,e),r(Jn,e),r(eC,e),r(tC,e),r(O1(),e),r(D1(),e),r(Su,e),r(b1(),e),r(N1(),e),r(z1(),e),r(nP,e),r(Cu,e),r(j1(),e),r(x1(),e),r(B1(),e),r(F1(),e),r(VC(),e),r(q1(),e),r(iP,e),r(U1(),e),r(Pu,e),r(W1(),e),r(V1(),e),r(Ru,e),r(Eu,e),r(wu,e),r(H1(),e),r(K1(),e),r(J1(),e),r(G1(),e),r(Q1(),e),r(Iu,e),r(X1(),e),r(Tu,e),r(uP,e),r(_u,e),r(ku,e),r(Mu,e),r(dk(),e),r(bu,e),r(Mk(),e),r(ch,e),r(Nk(),e),r(zk(),e);var n=Lk();Object.defineProperty(e,"AvatarSynthesisAdapter",{enumerable:!0,get:function(){return n.AvatarSynthesisAdapter}});var i=jk();Object.defineProperty(e,"SpeechSynthesisAdapter",{enumerable:!0,get:function(){return i.SpeechSynthesisAdapter}}),r(xk(),e),r(Bk(),e),r(Fk(),e),r(qk(),e),r(Uk(),e),r($k(),e),r(gP,e),e.OutputFormatPropertyName="OutputFormat",e.CancellationErrorCodePropertyName="CancellationErrorCode",e.ServicePropertiesPropertyName="ServiceProperties",e.ForceDictationPropertyName="ForceDictation",e.AutoDetectSourceLanguagesOpenRangeOptionName="UND"}(fl)),fl}(function(e){var t=q&&q.__createBinding||(Object.create?function(i,s,a,o){o===void 0&&(o=a),Object.defineProperty(i,o,{enumerable:!0,get:function(){return s[a]}})}:function(i,s,a,o){o===void 0&&(o=a),i[o]=s[a]}),r=q&&q.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,i,a)};Object.defineProperty(e,"__esModule",{value:!0});const n=O();new n.AgentConfig,r(T(),e)})(Se);const Wk=()=>{const[e,t]=w.useState(""),[r,n]=w.useState(!1),i=()=>{const o=Se.SpeechConfig.fromSubscription("FEiRYB2sEoGSNPvTy8vlDoclyXGbdQQC82FYkuYOWtbKOj7UgRIoJQQJ99BFACYeBjFXJ3w3AAAYACOGT00f","eastus");o.speechRecognitionLanguage="en-US";const c=Se.AudioConfig.fromDefaultMicrophoneInput(),u=new Se.SpeechRecognizer(o,c);n(!0),t("Listening..."),u.recognizeOnceAsync(l=>{n(!1),l.reason===Se.ResultReason.RecognizedSpeech?t(l.text):t("Could not recognize speech."),u.close()})};return H.jsxs("div",{style:{padding:"1rem"},children:[H.jsx("h3",{children:"🎙️ Azure Speech-to-Text Demo"}),H.jsx("button",{onClick:i,disabled:r,children:r?"Listening...":"Start Recording"}),H.jsxs("p",{children:[H.jsx("strong",{children:"Result:"})," ",e]})]})},Vk=()=>{const[e,t]=w.useState("Hello, welcome to Azure TTS!"),r=()=>{const s=Se.SpeechConfig.fromSubscription("FEiRYB2sEoGSNPvTy8vlDoclyXGbdQQC82FYkuYOWtbKOj7UgRIoJQQJ99BFACYeBjFXJ3w3AAAYACOGT00f","eastus");s.speechSynthesisVoiceName="en-US-JennyNeural";const a=Se.AudioConfig.fromDefaultSpeakerOutput(),o=new Se.SpeechSynthesizer(s,a);o.speakTextAsync(e,c=>{c.reason===Se.ResultReason.SynthesizingAudioCompleted?console.log("Speech synthesis succeeded."):console.error("Speech synthesis failed. Reason:",c.errorDetails),o.close()},c=>{console.error("Error during synthesis:",c),o.close()})};return H.jsxs("div",{children:[H.jsx("h2",{children:"Azure Text to Speech (Female Voice)"}),H.jsx("textarea",{rows:4,value:e,onChange:n=>t(n.target.value),style:{width:"100%"}}),H.jsx("button",{onClick:r,children:"Speak"})]})},Hk=()=>{const[e,t]=w.useState(""),[r,n]=w.useState(!1),i="FEiRYB2sEoGSNPvTy8vlDoclyXGbdQQC82FYkuYOWtbKOj7UgRIoJQQJ99BFACYeBjFXJ3w3AAAYACOGT00f",s="eastus",a=()=>{const c=Se.SpeechConfig.fromSubscription(i,s);c.speechRecognitionLanguage="en-US";const u=Se.AudioConfig.fromDefaultMicrophoneInput(),l=new Se.SpeechRecognizer(c,u);n(!0),l.recognizeOnceAsync(p=>{n(!1),p.reason===Se.ResultReason.RecognizedSpeech?(t(p.text),o(p.text)):console.error("Speech recognition failed:",p.errorDetails),l.close()})},o=c=>{const u=Se.SpeechConfig.fromSubscription(i,s);u.speechSynthesisVoiceName="en-US-JennyNeural";const l=Se.AudioConfig.fromDefaultSpeakerOutput(),p=new Se.SpeechSynthesizer(u,l);p.speakTextAsync(c,d=>{d.reason===Se.ResultReason.SynthesizingAudioCompleted?console.log("Text spoken successfully."):console.error("Synthesis failed:",d.errorDetails),p.close()},d=>{console.error("Error during synthesis:",d),p.close()})};return H.jsxs("div",{style:{padding:"1rem",maxWidth:500},children:[H.jsx("h2",{children:"🎤 Speech to Text ➡️ 🗣️ Text to Speech"}),H.jsx("button",{onClick:a,disabled:r,children:r?"Listening...":"Start Speech Recognition"}),H.jsxs("p",{children:[H.jsx("strong",{children:"Recognized:"})," ",e]})]})},Kk=()=>{const[e,t]=w.useState(!1),[r,n]=w.useState(!0),[i,s]=w.useState(!1);return H.jsxs("div",{className:"application-level",children:[H.jsx(Wk,{}),H.jsx(Vk,{}),H.jsx(Hk,{})]})},Jk=()=>H.jsxs("div",{children:[H.jsx("div",{className:"complex-main-route-section",children:H.jsx("div",{className:"tab-list"})}),H.jsx(zI,{children:H.jsx(_S,{path:"*",element:H.jsx(Kk,{})})})]});function Gk(){return H.jsx("div",{className:"App",children:H.jsx(Jk,{})})}const Qk=document.getElementById("root"),Yk=fS(Qk);Yk.render(H.jsx(oT,{children:H.jsx(Gk,{})}));
